# gender_equality_trigger
# male_can_hold_minor_title_trigger
# female_can_hold_minor_title_trigger
# female_can_hold_minor_commander_title_trigger

# can_enter_festival_physical_competitions_trigger

# preferred_gender_based_on_laws_trigger

gender_equality_trigger = {
	OR = {
		religion = cathar
		religion = messalian
		has_religion_feature = religion_equal
		has_religion_feature = religion_feature_bon
		has_law = status_of_women_4
		has_gender_equal_game_rule_trigger = yes
	}
}

male_can_hold_minor_title_trigger = {
	trigger_if = {
		limit = { has_gender_equal_game_rule_trigger = no }

		is_female = no

		custom_tooltip = {
			text = tooltip_not_matriarchal_liege_religion_feature

			NOR = {
				has_religion_feature = religion_matriarchal

				liege = {
					has_religion_feature = religion_matriarchal
				}
			}
		}
	}
}

female_can_hold_minor_title_trigger = {
	trigger_if = {
		limit = { has_gender_equal_game_rule_trigger = no }

		is_female = yes

		OR = {
			custom_tooltip = {
				text = tooltip_feminist_liege_vanilla_religion

				is_feminist_trigger = yes
				liege = { is_feminist_trigger = yes }
			}

			custom_tooltip = {
				text = tooltip_feminist_liege_religion_feature

				OR = {
					has_religion_feature = religion_equal
					has_religion_feature = religion_matriarchal
				}

				liege = {
					OR = {
						has_religion_feature = religion_equal
						has_religion_feature = religion_matriarchal
					}
				}
			}

			has_law = status_of_women_3
			has_law = status_of_women_4
		}
	}
}

# Currently only used under a custom tooltip, but need not be
# TODO: Should probably replace trigger_ifs with custom tooltips
female_can_hold_minor_commander_title_trigger = {
	trigger_if = {
		limit = { has_gender_equal_game_rule_trigger = no }

		is_female = yes

		OR = {
			has_character_flag = special_marshal

			# TODO: Add custom tooltip here?
			trigger_if = {
				limit = {
					OR = {
						trait = shieldmaiden
						trait = martial_lady
						trait = martial_lady_pagan
						trait = martial_lady_tengri
						is_member_of_any_warrior_lodge_trigger = yes
					}
				}

				religion = liege
			}

			custom_tooltip = {
				text = tooltip_feminist_liege_vanilla_religion

				is_feminist_trigger = yes
				liege = { is_feminist_trigger = yes }
			}

			custom_tooltip = {
				text = tooltip_feminist_liege_religion_feature

				OR = {
					has_religion_feature = religion_equal
					has_religion_feature = religion_matriarchal
				}

				liege = {
					OR = {
						has_religion_feature = religion_equal
						has_religion_feature = religion_matriarchal
					}
				}
			}

			has_law = status_of_women_4

			# Special Cases
			liege = { has_character_flag = female_adventurer }

			trigger_if = {
				limit = {
					liege = {
						culture_group = iranian
						religion_group = zoroastrian_group
					}
				}
				religion_group = zoroastrian_group
				culture_group = iranian
				any_dynasty_member = { higher_real_tier_than = BARON }
			}
		}
	}
}

# Sex restrictions on Great Tribal Festival activities.
can_enter_festival_physical_competitions_trigger = {
	is_adult = yes

	trigger_if = {
		limit = { is_female = no }

		OR = {
			NOT = { has_religion_feature = religion_matriarchal }
			is_member_of_any_warrior_lodge_trigger = yes
			has_character_flag = special_marshal
		}
	}
	trigger_else = {
		OR = {
			trait = shieldmaiden
			has_religion_feature = religion_matriarchal
			is_member_of_any_warrior_lodge_trigger = yes
			has_character_flag = special_marshal
		}
	}
}

preferred_gender_based_on_laws_trigger = {
	trigger_if = {
		limit = {
			PREV = {
				NOT = { has_law = true_cognatic_succession }
			}
		}

		trigger_if = {
			limit = { is_female = no }

			PREV = {
				OR = {
					has_law = cognatic_succession
					has_law = agnatic_succession
				}
			}
		}
		trigger_else = {
			PREV = {
				OR = {
					has_law = enatic_succession
					has_law = enatic_cognatic_succession
				}
			}
		}
	}
}