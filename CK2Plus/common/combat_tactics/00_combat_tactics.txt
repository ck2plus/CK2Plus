### At the moment we have a pretty basic icon system for combat tactics showing
### the uniticon which has the biggest bonus value in the tactic.
### This is the sprite number for each unit:
### 1=LI 2=HI 3=PIKE 4=LC 5=KNIGHTS 6=ARCHERS 7=HORSE ARCH.

# Must be first in file. This tactic will be set if anything goes wrong
no_tactic = {
	days = 1 # tactic lasts one day
	sprite = 1 # index of icon

	trigger = {
		always = no # never use unless set explicitly by code
	}
}

generic_skirmish_tactic = {
	days = 18 # tactic lasts one day
	sprite = 4 # index of icon
	group = skirmish

	trigger = {
		phase = skirmish
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 2 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 4 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 6 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 8 } } }
		}
	}
}

harass_tactic = {
	days = 18
	sprite = 4
	group = harass

	trigger = {
		phase = skirmish
		NOT = { horse_archers = 0.5 }

		OR = {
			light_cavalry = 0.05
			camel_cavalry = 0.05
		}

		trigger_if = {
			limit = {
				OR = {
					light_cavalry = 0.45
					camel_cavalry = 0.45
				}
			}

			flank_has_leader = yes
			leader = { martial >= 12 }
			NOR = {
				light_cavalry = 0.75
				camel_cavalry = 0.75
			}
		}
	}

	mean_time_to_happen = {
		days = 2

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.4
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.4
				}
			}
		}

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.5
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.5
				}
			}
		}
	}

	light_cavalry_offensive = 3
	camel_cavalry_offensive = 3
	horse_archers_offensive = -1.5
	archers_offensive = -1.5
	light_cavalry_defensive = -0.4
	camel_cavalry_defensive = -0.4

	enemy = {
		group = swarm
		factor = 1
	}
}

disorganised_harass_tactic = {
	days = 18
	sprite = 4
	group = harass

	trigger = {
		phase = skirmish
		NOT = { horse_archers = 0.5 }

		OR = {
			light_cavalry = 0.4
			camel_cavalry = 0.4
		}

		OR = {
			flank_has_leader = no
			leader = { martial < 12 }

			OR = {
				light_cavalry = 0.75
				camel_cavalry = 0.75
			}
		}

	}

	mean_time_to_happen = {
		days = 2

		mult_modifier = {
			factor = 1.5

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.5
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.5
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.7
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.9
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.9
				}
			}
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 2 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 4 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 6 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 8 } } }
		}
	}

	light_cavalry_offensive = 1.0
	camel_cavalry_offensive = 1.0
	horse_archers_offensive = -1.5
	archers_offensive = -1.5
	light_cavalry_defensive = -0.6
	camel_cavalry_defensive = -0.6

	enemy = {
		group = swarm
		factor = 1
	}
}

volly_harass_tactic = {
	days = 18
	sprite = 4
	group = harass

	trigger = {
		phase = skirmish
		light_infantry = 0.1
		archers = 0.01
		NOT = { archers = 0.3 }

		OR = {
			light_cavalry = 0.01
			camel_cavalry = 0.01
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			light_troops = {
				who = archers
				value >= 0.2
			}
			light_troops = {
				who = light_infantry
				value >= 0.4
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = archers
				value >= 0.2
			}
			light_troops = {
				who = light_infantry
				value >= 0.4
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			light_troops = {
				who = archers
				value >= 0.2
			}
			light_troops = {
				who = light_infantry
				value >= 0.4
			}
		}
	}

	light_cavalry_offensive = 1.0
	camel_cavalry_offensive = 1.0
	archers_offensive = 0.6
	light_infantry_offensive = 0.8
	horse_archers_offensive = -1.8

	enemy = {
		group = swarm
		factor = 1
	}
}

volley_tactic = {
	days = 18
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		archers = 0.01
		NOT = { archers = 0.4 }
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			light_troops = {
				who = archers
				value >= 0.1
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = archers
				value >= 0.2
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			light_troops = {
				who = archers
				value >= 0.3
			}
		}
	}

	light_cavalry_offensive = -1.5
	camel_cavalry_offensive = -1.5
	horse_archers_offensive = -1.5
	archers_offensive = 2.0

	enemy = {
		group = harass
		factor = 1
	}
}

swarm_volley_tactic = {
	days = 18
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		archers = 0.01
		horse_archers = 0.01

		location = {
			NOR = {
				terrain = forest
				terrain = woods
				terrain = mountain
				terrain = impassable_mountains
				terrain = jungle
				terrain = marsh
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			light_troops = {
				who = archers
				value >= 0.7
			}
			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = archers
				value >= 0.6
			}
			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			light_troops = {
				who = archers
				value >= 0.5
			}
			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}
	}

	light_cavalry_offensive = -1.8
	camel_cavalry_offensive = -1.8
	horse_archers_offensive = 0.6
	archers_offensive = 1.2

	enemy = {
		group = harass
		factor = 1
	}
}

swarm_tactic = {
	days = 18
	sprite = 7
	group = swarm

	trigger = {
		phase = skirmish
		horse_archers = 0.01

		trigger_if = {
			limit = { horse_archers = 0.35 }

			flank_has_leader = yes
			leader = { martial >= 12 }
			NOT = { horse_archers = 0.65 }
		}

		location = {
			NOR = {
				terrain = forest
				terrain = woods
				terrain = mountain
				terrain = impassable_mountains
				terrain = jungle
				terrain = marsh
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			light_troops = {
				who = horse_archers
				value >= 0.2
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			light_troops = {
				who = horse_archers
				value >= 0.4
			}
		}
	}

	light_cavalry_offensive = -1.5
	camel_cavalry_offensive = -1.5
	horse_archers_offensive = 1.0
	archers_offensive = -1.5

	enemy = {
		group = volley
		factor = 1
	}
}

disorganised_swarm_tactic = {
	days = 18
	sprite = 7
	group = swarm

	trigger = {
		phase = skirmish
		horse_archers = 0.30

		OR = {
			flank_has_leader = no
			leader = { martial < 12 }
			horse_archers = 0.5
		}

		location = {
			NOR = {
				terrain = forest
				terrain = woods
				terrain = mountain
				terrain = impassable_mountains
				terrain = jungle
				terrain = marsh
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			light_troops = {
				who = horse_archers
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			light_troops = {
				who = horse_archers
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			light_troops = {
				who = horse_archers
				value >= 0.9
			}
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 2 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 4 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 6 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 8 } } }
		}
	}

	light_cavalry_offensive = -1.5
	camel_cavalry_offensive = -1.5
	horse_archers_offensive = 0.5
	horse_archers_defensive = -1.0
	archers_offensive = -1.5
}

harras_swarm_tactic = {
	days = 18
	sprite = 7
	group = swarm

	trigger = {
		phase = skirmish
		horse_archers = 0.01

		trigger_if = {
			limit = { horse_archers = 0.35 }

			flank_has_leader = yes
			leader = { martial >= 12 }
			NOT = { horse_archers = 0.65 }
		}

		location = {
			NOR = {
				terrain = forest
				terrain = woods
				terrain = mountain
				terrain = impassable_mountains
				terrain = jungle
				terrain = marsh
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			light_troops = {
				who = horse_archers
				value >= 0.2
			}

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			light_troops = {
				who = horse_archers
				value >= 0.4
			}

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
			}
		}
	}

	light_cavalry_offensive = 0.6
	camel_cavalry_offensive = 0.6
	horse_archers_offensive = 1.2
	archers_offensive = -1.8

	enemy = {
		group = volley
		factor = 1
	}
}

shieldwall_tactic = {
	days = 12
	sprite = 2 # index of icon
	group = defensive

	trigger = {
		phase = skirmish
		archers = 0.01

		OR = {
			heavy_infantry = 0.2
			light_infantry = 0.2
			pikemen = 0.2
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			heavy_troops = {
				who = pikemen
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }

			heavy_troops = {
				who = pikemen
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.3
			}
		}
	}

	light_infantry_defensive = 1.2
	heavy_infantry_defensive = 3
	pikemen_defensive = 2.4
	archers_offensive = 0.6
	light_cavalry_defensive = -0.5
	camel_cavalry_defensive = -0.5
	knights_defensive = -0.5
	horse_archers_defensive = -0.5
}

feint_tactic = {
	days = 12
	sprite = 2 # index of icon
	group = defensive

	trigger = {
		phase = skirmish
		light_infantry = 0.2
		archers = 0.2
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			troops = {
				who = light_infantry
				value >= 0.4
			}
		}
	}

	light_infantry_offensive = 1.0
	light_infantry_defensive = 0.5
	archers_offensive = 1.5
	heavy_infantry_offensive = -0.5
	heavy_infantry_defensive = -0.5
	knights_offensive = -0.5
	knights_defensive = -0.5
}

prepare_tactic = {
	days = 1
	sprite = 2
	group = defensive

	trigger = {
		phase = skirmish
		days >= 15
	}

	mean_time_to_happen = {
		days = 1

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 2 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 4 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 6 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 8 } } }
		}
	}

	change_phase_to = melee
}

charge_on_undefended_tactic = {
	days = 2
	sprite = 5
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 3
	}

	mean_time_to_happen = {
		days = 1

		mult_modifier = {
			factor = 100

			enemy = {
				troops = {
					who = archers
					value >= 0.6
				}
			}
		}
	}

	change_phase_to = melee
}

charge_of_opportunity_tactic = {
	days = 6
	sprite = 5 # index of icon
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 10
	}

	mean_time_to_happen = {
		days = 3
	}

	change_phase_to = melee

	knights_offensive = 3
	horse_archers_offensive = 3
	heavy_infantry_offensive = 1.2
}

charge_tactic = {
	days = 6
	sprite = 5 # index of icon
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 10
	}

	mean_time_to_happen = {
		days = 10

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			heavy_troops = {
				who = knights
				value >= 0.1
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.1
			}
		}
	}

	change_phase_to = melee

	knights_offensive = 3
	horse_archers_offensive = 3
	heavy_infantry_offensive = 1.2
}

wait_tactic = {
	days = 1
	sprite = 2
	group = stand_fast

	trigger = {
		phase = melee
	}

	mean_time_to_happen = {
		days = 1

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_MELEE = 2 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_MELEE = 4 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_MELEE = 6 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_MELEE = 8 } } }
		}
	}
}

advance_tactic = {
	days = 18
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		heavy_infantry = 0.01
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.5
			}
		}
	}

	knights_offensive = -1.5
	heavy_infantry_offensive = 3
	pikemen_offensive = -1.5

	enemy = {
		group = stand_fast
		factor = 3
	}
}

awesome_advance_tactic = {
	days = 18
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		heavy_infantry = 0.01
		knights = 0.01
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 9 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.7
			}
			heavy_troops = {
				who = knights
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 13 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.6
			}
			heavy_troops = {
				who = knights
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 17 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.5
			}
			heavy_troops = {
				who = knights
				value >= 0.3
			}
		}
	}

	knights_offensive = 0.6
	heavy_infantry_offensive = 2.4
	pikemen_offensive = -1.8

	enemy = {
		group = stand_fast
		factor = 3
	}
}

stand_fast_tactic = {
	days = 18
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		pikemen = 0.01
		location = { terrain = forest }
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			heavy_troops = {
				who = pikemen
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			heavy_troops = {
				who = pikemen
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			heavy_troops = {
				who = pikemen
				value >= 0.5
			}
		}
	}

	knights_offensive = -1.5
	heavy_infantry_offensive = -1.5
	pikemen_offensive = 3

	enemy = {
		group = charge
		factor = 3
	}
}

slow_advance_tactic = {
	days = 18
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		pikemen = 0.01
		heavy_infantry = 0.01
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			heavy_troops = {
				who = pikemen
				value >= 0.7
			}
			heavy_troops = {
				who = heavy_infantry
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			heavy_troops = {
				who = pikemen
				value >= 0.6
			}
			heavy_troops = {
				who = heavy_infantry
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			heavy_troops = {
				who = pikemen
				value >= 0.5
			}
			heavy_troops = {
				who = heavy_infantry
				value >= 0.3
			}
		}
	}

	knights_offensive = -1.8
	heavy_infantry_offensive = 0.6
	pikemen_offensive = 2.4

	enemy = {
		group = charge
		factor = 3
	}
}

awesome_charge_tactic = {
	days = 18
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		knights = 0.01
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			heavy_troops = {
				who = knights
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			heavy_troops = {
				who = knights
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			heavy_troops = {
				who = knights
				value >= 0.5
			}
		}
	}

	knights_offensive = 3
	heavy_infantry_offensive = -1.5
	pikemen_offensive = -1.5

	enemy = {
		group = advance
		factor = 3
	}
}

awesomer_charge_tactic = {
	days = 18
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		knights = 0.01
		pikemen = 0.01
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 9 }

			heavy_troops = {
				who = knights
				value >= 0.7
			}
			heavy_troops = {
				who = pikemen
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 13 }

			heavy_troops = {
				who = knights
				value >= 0.6
			}
			heavy_troops = {
				who = pikemen
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 17 }

			heavy_troops = {
				who = knights
				value >= 0.5
			}
			heavy_troops = {
				who = pikemen
				value >= 0.3
			}
		}
	}

	knights_offensive = 2.4
	heavy_infantry_offensive = -1.8
	pikemen_offensive = 0.6

	enemy = {
		group = advance
		factor = 3
	}
}

barrage_tactic = {
	days = 6
	sprite = 6 # index of icon
	group = defensive

	trigger = {
		phase = melee
		archers = 0.2
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}
	}

	archers_offensive = 2.4
	horse_archers_offensive = 2.4
}

raid_tactic = {
	days = 6
	sprite = 1
	group = defensive

	trigger = {
		phase = melee
		NOT = { horse_archers = 0.5 }

		OR = {
			light_cavalry = 0.2
			camel_cavalry = 0.2
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				troops = {
					who = light_cavalry
					value >= 0.3
				}
				troops = {
					who = camel_cavalry
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			troops = {
				who = light_infantry
				value >= 0.3
			}
		}
	}

	light_cavalry_offensive = 2.4
	camel_cavalry_offensive = 2.4
	light_infantry_offensive = 2.4
}

pursue_tactic = {
	days = 15
	sprite = 4
	group = charge

	trigger = {
		phase = pursue
	}

	mean_time_to_happen = {
		days = 10
	}
}

#########################
# Combat Flavor Tactics #
#########################

# Bad Tactics

reckless_charge_tactic = {
	days = 6
	sprite = 5 # index of icon
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 10
		flank_has_leader = yes

		leader = {
			OR = {
				trait = aggressive_leader
				trait = wroth
			}
		}
	}

	mean_time_to_happen = {
		days = 10

		mult_modifier = {
			factor = 3
			flank_has_leader = yes
			leader = { martial < 7 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial < 7 }

			heavy_troops = {
				who = knights
				value >= 0.1
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial < 7 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.1
			}
		}
	}

	change_phase_to = melee

	knights_defensive = -0.5
	knights_offensive = 1.2
	horse_archers_defensive = -0.5
	horse_archers_offensive = 1.2
	heavy_infantry_defensive = -0.3
	heavy_infantry_offensive = 0.6
}


timid_advance_tactic = {
	days = 18
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		heavy_infantry = 0.01
		flank_has_leader = yes

		leader = {
			OR = {
				trait = craven
				trait = organizer
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial < 7 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.5
			}
		}
	}

	knights_offensive = -2.1
	heavy_infantry_offensive = -2.1
	pikemen_offensive = 1.2

	enemy = {
		group = stand_fast
		factor = 1.2
	}
}

confused_orders_tactic = {
	days = 18
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		archers = 0.01
		flank_has_leader = yes

		leader = {
			OR = {
				trait = lisp
				trait = stutter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial < 7 }

			light_troops = {
				who = archers
				value >= 0.5
			}
		}
	}

	archers_offensive = -1.2
	horse_archers_offensive = -1.2

	enemy = {
		group = charge
		factor = -1.2
	}
}

hesitant_commander_tactic = {
	days = 18
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		flank_has_leader = yes

		leader = {
			OR = {
				trait = slothful
				trait = shy
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial < 7 }
		}
	}

	knights_offensive = -1.5
	heavy_infantry_offensive = -1.5
}

charging_own_skirmishers_tactic = {
	days = 6
	sprite = 5 # index of icon
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 10
		flank_has_leader = yes
		leader = { trait = cruel }
	}

	mean_time_to_happen = {
		days = 10

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial < 10 }

			heavy_troops = {
				who = knights
				value >= 0.1
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial < 10 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.1
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.1
				}
			}
		}
	}

	change_phase_to = melee

	knights_offensive = 3
	light_cavalry_offensive = 1.8
	camel_cavalry_offensive = 1.8
	archers_offensive = -4.2
	archers_defensive = -0.5
	horse_archers_offensive = -1.2
	horse_archers_defensive = -0.3
}

# Good tactics

inspired_defense_tactic = {
	days = 12
	sprite = 2
	group = defensive

	trigger = {
		phase = skirmish
		flank_has_leader = yes

		leader = {
			OR = {
				trait = inspiring_leader
				trait = defensive_leader
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 14 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = {
				martial >= 14
				trait = defensive_leader
			}
		}
	}

	knights_defensive = 1.5
	heavy_infantry_defensive = 1.5
	light_infantry_defensive = 1.5
	light_cavalry_defensive = 1.5
	camel_cavalry_defensive = 1.5
	archers_defensive = 1.5
	horse_archers_defensive = 1.5
	pikemen_defensive = 1.5
	war_elephants_defensive = 1.5

	enemy = {
		group = charge
		factor = 1.2
	}
	enemy = {
		group = advance
		factor = 0.6
	}
}

heroic_countercharge_tactic = {
	days = 18
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		knights = 0.01
		flank_has_leader = yes

		OR = {
			light_cavalry = 0.01
			camel_cavalry = 0.01
		}

		leader = {
			OR = {
				trait = aggressive_leader
				trait = brave
				trait = cavalry_leader
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 14 }

			heavy_troops = {
				who = knights
				value >= 0.1
			}
		}
	}

	knights_offensive = 3.6
	light_cavalry_offensive = 3.6
	camel_cavalry_offensive = 3.6
	heavy_infantry_offensive = 0.6
	pikemen_offensive = 0.6

	enemy = {
		group = charge
		factor = 3
	}
}

glorious_countercharge_tactic = { # Call to Glory tactic. - Generic
	days = 18
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		flank_has_leader = yes
		leader = { has_character_modifier = call_to_glory }

		OR = {
			light_cavalry = 0.01
			light_infantry = 0.01
			pikemen = 0.01
			horse_archers = 0.01
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 14 }

			light_troops = {
				who = light_cavalry
				value >= 0.1
			}
		}
	}

	heavy_infantry_offensive = 1.75
	light_infantry_offensive = 1.75
	light_cavalry_offensive = 1.75
	camel_cavalry_offensive = 1.75
	archers_offensive = 1.75
	horse_archers_offensive = 1.75
	pikemen_offensive = 1.75

	enemy = {
		group = charge
		factor = 3
	}
}

# Norse Lodge: light_infantry + heavy_infantry				150 + 100
# Tengri Lodge: light_cavalry + horse_archers				100 + 150
# Slavic Lodge: light_infantry + light_cavalry				200 + 50
# Baltic Lodge: light_infantry + heavy_infantry + archers	100 + 100 + 50
# Finnish Lodge: light_infantry + archers					100 + 150
# West-African Lodge: light_infantry + pikemen				150 + 100
# Zunist Lodge: pikemen + archers							150 + 100
# Bon Lodge: light_infantry + light_cavalry + archers		100 + 50 + 100
# Hellenic Lodge: pikemen + heavy infantry					200 + 50

# Winter's Maw Tactic - Norse (heavy infantry)
# Wolf's Howling Tactic - Tengri (horse archers)
# Slavic Last Stand Tactic - Slavic (light infantry)
# Baltic Last Stand Tactic - Baltic (heavy infantry)
# Elk's Lament Tactic - Finnish (archers)
# Bull Horns Tactic - West-africans (pikemen)
# Lightburst Tactic - Zunists (archers)
# Balanced Charge Tactic - Bon (light infantry/cavalry)
# Quincunx Tactic - Hellenic (pikemen)

# Call to Glory - Winter's Maw Tactic - Norse (heavy infantry)
glorious_norse_tactic = {
	days = 18
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		heavy_infantry = 0.01
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_norse
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.5
			}
		}
	}

	light_infantry_defensive = 1.5
	heavy_infantry_offensive = 2.75

	enemy = {
		group = stand_fast
		factor = 1
	}
}

# Call to Glory - Wolf's Howling Tactic - Tengri (horse archers)
glorious_tengri_tactic = {
	days = 6
	sprite = 1
	group = defensive

	trigger = {
		phase = melee
		horse_archers = 0.
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_tengri

			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}

		location = {
			NOR = {
				terrain = forest
				terrain = woods
				terrain = mountain
				terrain = impassable_mountains
				terrain = jungle
				terrain = marsh
			}
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 10 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 4 }

			light_troops = {
				who = horse_archers
				value >= 0.4
			}
		}
	}

	change_phase_to = skirmish

	horse_archers_offensive = 2.0
	light_cavalry_offensive = 1.2
}

# Call to Glory - Slavic Last Stand Tactic - Slavic (light infantry)
glorious_slavic_tactic = {
	days = 18
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		light_infantry = 0.01
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_slavic
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			light_troops = {
				who = light_infantry
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			light_troops = {
				who = light_infantry
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			light_troops = {
				who = light_infantry
				value >= 0.5
			}
		}
	}

	light_infantry_offensive = 1.25
	light_infantry_defensive = 2.5
	light_cavalry_defensive = 1.25

	enemy = {
		group = charge
		factor = 3
	}
}

# Call to Glory - Baltic Last Stand Tactic - Baltic (heavy infantry)
glorious_baltic_tactic = {
	days = 18
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		heavy_infantry = 0.01
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_baltic
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.5
			}
		}
	}

	heavy_infantry_offensive = 1.25
	heavy_infantry_defensive = 2.5
	light_infantry_defensive = 1.25

	enemy = {
		group = charge
		factor = 3
	}
}

# Call to Glory - Elk's Lament Tactic - Finnish (archers)
glorious_finnish_tactic = {
	days = 6
	sprite = 6
	group = volley

	trigger = {
		phase = melee
		archers = 0.05
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_finnish

			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}

		location = {
			NOT = { terrain = desert }
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 2

			leader = { martial >= 10 }

			light_troops = {
				who = archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 2

			leader = { martial >= 4 }

			light_troops = {
				who = archers
				value >= 0.4
			}
		}
	}

	change_phase_to = skirmish

	archers_offensive = 2.5
	light_infantry_defensive = 1.5
}

# Call to Glory - Bull Horns Tactic - West-africans (pikemen)
glorious_west_african_tactic = {
	days = 18
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		pikemen = 0.01
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_west_african
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = pikemen
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = pikemen
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = pikemen
				value >= 0.5
			}
		}
	}

	archers_offensive = 1.5
	light_infantry_offensive = 1.5
	pikemen_offensive = 2.5

	enemy = {
		group = advance
		factor = 3
	}
}

# Call to Glory - Sunburst Tactic - Zunists (archers)
glorious_zun_tactic = {
	days = 18
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		archers = 0.01
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_zun
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			light_troops = {
				who = archers
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			light_troops = {
				who = archers
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			light_troops = {
				who = archers
				value >= 0.4
			}
		}
	}

	archers_offensive = 3.75
	archers_defensive = 1.25

	enemy = {
		group = harass
		factor = 1
	}

	enemy = {
		group = charge
		factor = 1
	}
}

# Call to Glory - Balanced Tactic - Bon (light infantry/cavalry)
glorious_bon_tactic = {
	days = 18
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		light_infantry = 0.01
		light_cavalry = 0.01
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_bon
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			light_troops = {
				who = light_infantry
				value >= 0.6
			}
			light_troops = {
				who = light_cavalry
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			light_troops = {
				who = light_infantry
				value >= 0.5
			}
			light_troops = {
				who = light_cavalry
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			light_troops = {
				who = light_infantry
				value >= 0.4
			}
			light_troops = {
				who = light_cavalry
				value >= 0.2
			}
		}
	}

	light_infantry_offensive = 1.5
	light_infantry_defensive = 1.5
	light_cavalry_offensive = 1.5
	light_cavalry_defensive = 1.5

	enemy = {
		group = charge
		factor = 3
	}
}

# Call to Glory - Quincunx Tactic - Hellenic (pikemen)
glorious_hellenic_tactic = {
	days = 18
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		pikemen = 0.01
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_hellenic
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = pikemen
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = pikemen
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = pikemen
				value >= 0.4
			}
		}
	}

	pikemen_offensive = 1.75
	pikemen_defensive = 2.75
	light_infantry_offensive = -0.5

	enemy = {
		group = charge
		factor = 3
	}
}

###########################

clever_ambush_tactic = {
	days = 18
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		light_cavalry = 0.1
		flank_has_leader = yes

		OR = {
			light_infantry = 0.1
			camel_cavalry = 0.1
		}

		leader = {
			OR = {
				trait = trickster
				trait = quick
				trait = genius
				trait = shrewd
			}

			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}

		location = {
			OR = {
				terrain = forest
				terrain = hills
				terrain = mountain
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 14 }

			troops = {
				who = light_infantry
				value >= 0.2
			}

			OR = {
				troops = {
					who = light_cavalry
					value >= 0.2
				}
				troops = {
					who = camel_cavalry
					value >= 0.2
				}
			}
		}

		mult_modifier = {
			factor = 3

			leader = {
				trait = trickster
				martial >= 14
			}

			troops = {
				who = light_infantry
				value >= 0.2
			}

			OR = {
				troops = {
					who = light_cavalry
					value >= 0.2
				}
				troops = {
					who = camel_cavalry
					value >= 0.2
				}
			}
		}
	}

	light_cavalry_offensive = 2.4
	camel_cavalry_offensive = 2.4
	light_infantry_offensive = 1.2
	horse_archers_offensive = 1.2
	archers_offensive = 1.2

	enemy = {
		group = advance
		factor = 3
	}
}

religious_fervour_tactic = {
	days = 18
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		flank_has_leader = yes

		leader = {
			OR = {
				AND = {
					trait = zealous
					trait = inspiring_leader
				}

				trait = possessed
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			leader = {
				martial >= 14
				trait = possessed
			}
		}
	}

	knights_offensive = 1.5
	heavy_infantry_offensive = 1.5
	light_infantry_offensive = 1.5
	light_cavalry_offensive = 1.5
	camel_cavalry_offensive = 1.5
	archers_offensive = 1.5
	horse_archers_offensive = 1.5
	pikemen_offensive = 1.5
	war_elephants_offensive = 1.5
}

############################
# Culture Specific Tactics #
############################

# Altaic (Mongol, etc)
retreat_and_ambush_tactic = {
	days = 6
	sprite = 1
	group = defensive

	trigger = {
		phase = melee
		horse_archers = 0.2
		flank_has_leader = yes

		leader = {
			culture_group = altaic

			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}

		location = {
			NOR = {
				terrain = forest
				terrain = woods
				terrain = mountain
				terrain = impassable_mountains
				terrain = jungle
				terrain = marsh
			}
		}
	}

	mean_time_to_happen = {
		days = 2

		mult_modifier = {
			factor = 2

			leader = { martial >= 10 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 2

			leader = { martial >= 4 }

			light_troops = {
				who = horse_archers
				value >= 0.4
			}
		}
	}

	change_phase_to = skirmish

	horse_archers_offensive = 2.0
	light_cavalry_offensive = 1.2
	archers_offensive = 1.0
}

# Scandinavian
berserker_charge_tactic = {
	days = 18
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		heavy_infantry = 0.01
		flank_has_leader = yes
		leader = { culture_group = north_germanic }
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			leader = { martial >= 10 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.3
			}
		}
	}

	heavy_infantry_offensive = 3.6
	heavy_infantry_defensive = -0.5
	light_infantry_offensive = 1.2
	light_infantry_defensive = -0.3

	enemy = {
		group = stand_fast
		factor = 1
	}
}

# Scottish
schiltron_formation_tactic = {
	days = 18
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		pikemen = 0.01
		flank_has_leader = yes
		leader = { culture = scottish }
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = pikemen
				value >= 0.6
			}
			heavy_troops = {
				who = heavy_infantry
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = pikemen
				value >= 0.5
			}
			heavy_troops = {
				who = heavy_infantry
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = pikemen
				value >= 0.4
			}
			heavy_troops = {
				who = heavy_infantry
				value >= 0.2
			}
		}
	}

	light_infantry_defensive = 1.2
	heavy_infantry_defensive = 2.4
	pikemen_defensive = 3.6
	pikemen_offensive = 2.4
	archers_offensive = 0.6
	light_cavalry_defensive = -0.4
	knights_defensive = -0.4
	horse_archers_defensive = -0.4

	enemy = {
		group = charge
		factor = 3
	}
}

# Italian
pike_column_advance_tactic = {
	days = 18
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		pikemen = 0.01
		flank_has_leader = yes

		leader = {
			OR = {
				culture = italian
				culture = roman
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = pikemen
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = pikemen
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = pikemen
				value >= 0.4
			}
		}
	}

	knights_offensive = 0.6
	heavy_infantry_offensive = 1.2
	pikemen_offensive = 3

	enemy = {
		group = stand_fast
		factor = 3
	}
}

# English/Welsh
massive_longbow_volley_tactic = {
	days = 18
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		archers = 0.01
		flank_has_leader = yes

		leader = {
			OR = {
				culture = english
				culture = welsh
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			light_troops = {
				who = archers
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			light_troops = {
				who = archers
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			light_troops = {
				who = archers
				value >= 0.4
			}
		}
	}

	archers_offensive = 3.5

	enemy = {
		group = harass
		factor = 1
	}

	enemy = {
		group = charge
		factor = 1
	}
}

# Frank/Norman/German/Occitan/Breton
couched_lance_charge_tactic = {
	days = 18
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		knights = 0.01
		flank_has_leader = yes

		leader = {
			OR = {
				culture = french
				culture = outremer
				culture = occitan
				culture = norman
				culture = german
				culture = breton
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = knights
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = knights
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = knights
				value >= 0.4
			}
		}
	}

	knights_offensive = 4.2
	heavy_infantry_offensive = -0.6
	pikemen_offensive = 0.6

	enemy = {
		group = advance
		factor = 3
	}
}

# Tibetan
mountain_ambush_tactic = {
	days = 18
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		light_infantry = 0.1
		flank_has_leader = yes

		leader = {
			culture_group = tibetan_group
			martial >= 9

			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}

		location = {
			OR = {
				terrain = hills
				terrain = mountain
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			troops = {
				who = light_infantry
				value >= 0.2
			}
		}

		mult_modifier = {
			factor = 2
			leader = { martial >= 14 }
		}

		mult_modifier = {
			factor = 3
			leader = { trait = trickster }
		}
	}

	light_cavalry_offensive = 2.4
	light_infantry_offensive = 1.5
	heavy_infantry_offensive = 1.25
	horse_archers_offensive = 1.5
	archers_offensive = 1.2

	enemy = {
		group = advance
		factor = 3
	}
}

# Arab
desert_ambush_tactic = {
	days = 18
	sprite = 3
	group = stand_fast

	trigger = {
		location = { terrain = desert }
		phase = melee
		light_infantry = 0.1
		flank_has_leader = yes

		OR = {
			light_cavalry = 0.1
			camel_cavalry = 0.1
		}

		leader = {
			culture_group = arabic

			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 10 }

			OR = {
				troops = {
					who = light_cavalry
					value >= 0.2
				}
				troops = {
					who = camel_cavalry
					value >= 0.2
				}
			}

			troops = {
				who = light_infantry
				value >= 0.2
			}
		}

		mult_modifier = {
			factor = 3

			leader = {
				trait = trickster
				martial >= 10
			}

			OR = {
				troops = {
					who = light_cavalry
					value >= 0.2
				}
				troops = {
					who = camel_cavalry
					value >= 0.2
				}
			}

			troops = {
				who = light_infantry
				value >= 0.2
			}
		}
	}

	light_cavalry_offensive = 1.8
	camel_cavalry_offensive = 2.4
	light_infantry_offensive = 1.2
	horse_archers_offensive = 1.2
	archers_offensive = 1.2

	enemy = {
		group = advance
		factor = 3
	}
}

# Byzantine
embolon_charge_formation_tactic = {
	days = 18
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		knights = 0.01
		flank_has_leader = yes
		leader = { culture_group = byzantine }
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = knights
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = knights
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = knights
				value >= 0.4
			}
		}
	}

	knights_offensive = 2.4
	light_cavalry_offensive = 1.8
	heavy_infantry_offensive = -1.2
	pikemen_offensive = 0.6

	enemy = {
		group = advance
		factor = 3
	}
}

# War Elephants
crushing_charge_tactic = {
	days = 10
	sprite = 5
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 10

		OR = {
			war_elephants = 0.01
			knights = 0.2
		}
	}

	mean_time_to_happen = {
		days = 2

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 8 }
			war_elephants = 0.04
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
			war_elephants = 0.03
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 18 }
			war_elephants = 0.02
		}

		mult_modifier = {
			factor = 8

			flank_has_leader = yes
			leader = { martial >= 18 }

			troops = {
				who = knights
				value >= 0.4
			}
		}
	}

	change_phase_to = melee

	knights_offensive = 1.75
	war_elephants_offensive = 2.5
}

gray_wall_tactic = {
	days = 12
	sprite = 2
	group = defensive

	trigger = {
		phase = skirmish
		war_elephants = 0.025
	}

	mean_time_to_happen = {
		days = 5

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
			war_elephants = 0.05
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
			war_elephants = 0.075
		}
	}

	light_infantry_defensive = 1.2
	heavy_infantry_defensive = 3
	pikemen_defensive = 2.4
	war_elephants_defensive = 1.5
	archers_offensive = 1.2
	archers_defensive = 0.6
	light_cavalry_defensive = -0.5
	knights_defensive = -0.5
	horse_archers_defensive = -0.5
}

force_back_tactic = {
	days = 24
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee

		OR = {
			war_elephants = 0.005
			heavy_infantry = 0.25
			pikemen = 0.25
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.7
				}
				heavy_troops = {
					who = heavy_infantry
					value >= 0.3
				}
				troops = {
					who = war_elephants
					value >= 0.04
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.6
				}
				heavy_troops = {
					who = heavy_infantry
					value >= 0.3
				}
				troops = {
					who = war_elephants
					value >= 0.02
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.5
				}
				heavy_troops = {
					who = heavy_infantry
					value >= 0.3
				}
				troops = {
					who = war_elephants
					value >= 0.01
				}
			}
		}
	}

	knights_offensive = -1.8
	archers_offensive = -1.0
	light_cavalry_defensive = -0.2
	horse_archers_offensive = -1.0
	heavy_infantry_offensive = 1.6
	pikemen_offensive = 2.4
	war_elephants_offensive = 1.2

	enemy = {
		group = charge
		factor = 3
	}
}

elephant_trample_tactic = {
	days = 12
	sprite = 5
	group = advance

	trigger = {
		phase = melee
		war_elephants = 0.01
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.7
				}
				heavy_troops = {
					who = heavy_infantry
					value >= 0.3
				}
				troops = {
					who = war_elephants
					value >= 0.04
				}
				troops = {
					who = knights
					value >= 0.25
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.6
				}
				heavy_troops = {
					who = heavy_infantry
					value >= 0.3
				}
				troops = {
					who = war_elephants
					value >= 0.02
				}
				troops = {
					who = knights
					value >= 0.25
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.5
				}
				heavy_troops = {
					who = heavy_infantry
					value >= 0.3
				}
				troops = {
					who = war_elephants
					value >= 0.01
				}
				troops = {
					who = knights
					value >= 0.25
				}
			}
		}
	}

	knights_offensive = 2.0
	heavy_infantry_offensive = 2.0
	pikemen_offensive = 2.0
	war_elephants_offensive = 2.5
	war_elephants_defensive = -0.4
	light_cavalry_offensive = 0.5
	light_cavalry_defensive = -0.2
	archers_offensive = -1.0
	horse_archers_offensive = -1.0
}

##########################################################################
# Siege offensive tactics
##########################################################################
# Must be first "siege = attacker"
no_siege_offense_tactic = {
	days = 1
	sprite = 1
	siege = attacker

	trigger = {
		always = no # never use unless set explicitly by code
	}
}

default_siege_offense_tactic = {
	days = 5
	sprite = 1
	siege = attacker

	trigger = {
		always = yes
	}

	mean_time_to_happen = {
		days = 10
	}
}


##########################################################################
# Siege defensive tactics
##########################################################################

# Must be first "siege = defender"
no_siege_defense_tactic = {
	days = 1
	sprite = 1
	siege = defender

	trigger = {
		always = no # never use unless set explicitly by code
	}
}

default_siege_defense_tactic = {
	days = 5
	sprite = 1
	siege = defender

	trigger = {
		always = yes
	}

	mean_time_to_happen = {
		days = 10
	}
}


##########################################################################
# Combat MTTH definitions(do not remove)
##########################################################################

flank_retreat_odds = {
	# MTTH range is 0-100, if flank morale is below MTTH, flank will retreat
	mean_time_to_happen = {
		days = 20
	}
}

flank_pursue_odds = {
	# MTTH range is 0-100, chance (in %) of pursuing a fleeing flank
	mean_time_to_happen = {
		days = 25
	}
}