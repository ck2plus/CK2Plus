###################################
#
# Events for Decadence in Muslim Dynasties
#
# Id 91000 - 91499 reserved
#
###################################

# Written by Henrik FÃ¥hraeus & Henrik Eklund

# A tribe comes riding in from the wastes to topple a decadent dynasty
character_event = {
	id = 91000
	desc = EVTDESC91000
	picture = GFX_evt_moors
	border = GFX_event_normal_frame_war

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_invasion

	only_independent = yes
	religion_group = muslim

	trigger = {
		always = no # Disabled in CK2Plus
		uses_decadence = yes
		decadence >= 75
		higher_tier_than = COUNT

		NOT = {
			any_war = {
				defender = { character = ROOT }
				using_cb = decadence_invasion # Already under tribal invasion
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 1.33
			decadence >= 80
		}

		mult_modifier = {
			factor = 2
			decadence >= 85
		}

		mult_modifier = {
			factor = 2
			decadence >= 90
		}

		mult_modifier = {
			factor = 2
			decadence >= 95
		}
	}

	immediate = {
		random_potential_tribal_county = { # A county suitable for tribal takeover
			location = {
				create_character = {
					random_traits = yes
					dynasty = random
					religion = ROOT
					culture = ROOT
					female = no
					age = 38
					attributes = {
						martial = 7
					}
					add_trait = skilled_tactician
				}

				new_character = {
					create_title = {
						tier = DUKE
						landless = yes
						temporary = yes
						culture = ROOT
						name = DECADENCE_REVOLT
						holder = THIS
					}

					ROOT = {
						trigger_switch = {
							on_trigger = real_tier

							DUKE	= { PREV = { wealth = 500  } }
							KING	= { PREV = { wealth = 1000 } }
							EMPEROR = { PREV = { wealth = 2000 } }
						}
					}

					while = {
						count = 6

						spawn_unit = {
							province = PREV
							home = PREV
							owner = THIS
							match_character = ROOT
							match_mult = 0.2
							earmark = decadence_revolters
							reinforces = yes
							reinforce_rate_multiplier = 0.25
						}
					}

					create_character = {
						random_traits = yes
						dynasty = THIS
						religion = THIS
						culture = THIS
						female = no
						age = 20
						attributes = {
							martial = 7
						}
						add_trait = skilled_tactician
					}

					new_character = {
						set_father = PREV
					}

					create_character = {
						random_traits = yes
						dynasty = THIS
						religion = THIS
						culture = THIS
						female = no
						age = 18
						attributes = {
							martial = 7
						}
						add_trait = skilled_tactician
					}

					new_character = {
						set_father = PREV
					}

					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						age = 20
						attributes = {
							martial = 7
						}
						add_trait = skilled_tactician
					}

					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						age = 22
						attributes = {
							martial = 7
						}
						add_trait = skilled_tactician
					}

					create_character = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						age = 22
						attributes = {
							martial = 7
						}
						add_trait = skilled_tactician
					}

					set_character_flag = decadence_invader

					war = {
						target = ROOT
						casus_belli = decadence_invasion
					}

					clr_character_flag = decadence_invader

					log = "91000: Decadence revolt in [Root.PrimaryTitle.GetName]!"
				}
			}
		}
	}

	option = {
		name = EVTOPTA91000

		decadence = -50
	}
}

### Decadence Trait-Based Events

### Raises Decadence

# Drunkard
character_event = {
	id = 91200
	desc = EVTDESC91200
	picture = GFX_evt_drunk

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = drunkard
		NOT = { has_character_flag = decadence_drunkard }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91200

		piety = -50
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_drunkard
		set_character_flag = decadence_change
	}
}

# Homosexual
character_event = {
	id = 91201
	desc = EVTDESC91201
	picture = GFX_evt_carriage

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = homosexual
		NOT = { has_character_flag = decadence_homosexual }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91201

		piety = -50
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_homosexual
		set_character_flag = decadence_change
	}
}

# Hedonist
character_event = {
	id = 91202
	desc = EVTDESC91202
	picture = GFX_evt_lunatic

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = hedonist
		NOT = { has_character_flag = decadence_hedonist }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91202

		piety = -50
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_hedonist
		set_character_flag = decadence_change
	}
}

# Impaler
character_event = {
	id = 91203
	desc = EVTDESC91203
	picture = GFX_evt_torture

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = impaler
		NOT = { has_character_flag = decadence_impaler }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91203

		piety = -50
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_impaler
		set_character_flag = decadence_change
	}
}

# Lustful
character_event = {
	id = 91204
	desc = EVTDESC91204
	picture = GFX_evt_sultan

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = lustful

		NOR = {
			trait = homosexual
			has_character_flag = decadence_lustful
		}
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91204

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_lustful
		set_character_flag = decadence_change
	}
}

# Gluttonous
character_event = {
	id = 91205
	desc = EVTDESC91205
	picture = GFX_evt_feast

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = gluttonous
		NOT = { has_character_flag = decadence_gluttonous }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91205

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_gluttonous
		set_character_flag = decadence_change
	}
}

# Greedy
character_event = {
	id = 91206
	desc = EVTDESC91206
	picture = GFX_evt_jugglers

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = greedy
		NOT = { has_character_flag = decadence_greedy }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91206

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_greedy
		set_character_flag = decadence_change
	}
}

# Slothful
character_event = {
	id = 91207
	desc = EVTDESC91207
	picture = GFX_evt_carriage

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = slothful
		NOT = { has_character_flag = decadence_slothful }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91207

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_slothful
		set_character_flag = decadence_change
	}
}

# Envious
character_event = {
	id = 91208
	desc = EVTDESC91208
	picture = GFX_evt_throne_room

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = envious
		NOT = { has_character_flag = decadence_envious }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91208

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_envious
		set_character_flag = decadence_change
	}
}

# Wroth
character_event = {
	id = 91209
	desc = EVTDESC91209
	picture = GFX_evt_burning_house

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = wroth
		NOT = { has_character_flag = decadence_wroth }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91209

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_wroth
		set_character_flag = decadence_change
	}
}

# Proud
character_event = {
	id = 91210
	desc = EVTDESC91210
	picture = GFX_evt_market

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = proud
		NOT = { has_character_flag = decadence_proud }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91210

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_proud
		set_character_flag = decadence_change
	}
}

# Deceitful
character_event = {
	id = 91211
	desc = EVTDESC91211
	picture = GFX_evt_lunatic

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = deceitful
		NOT = { has_character_flag = decadence_deceitful }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91211

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_deceitful
		set_character_flag = decadence_change
	}
}

# Craven
character_event = {
	id = 91212
	desc = EVTDESC91212
	picture = GFX_evt_throne_room

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_rulers = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = craven
		NOT = { has_character_flag = decadence_craven }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91212

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_craven
		set_character_flag = decadence_change
	}
}

# Content
character_event = {
	id = 91213
	desc = EVTDESC91213
	picture = GFX_evt_child_talking

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_rulers = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = content
		NOT = { has_character_flag = decadence_content }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91213

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_content
		set_character_flag = decadence_change
	}
}

# Arbitrary
character_event = {
	id = 91214
	desc = EVTDESC91214
	picture = GFX_evt_throne_room

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_rulers = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = arbitrary
		NOT = { has_character_flag = decadence_arbitrary }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91214

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_arbitrary
		set_character_flag = decadence_change
	}
}

# Cynical
character_event = {
	id = 91215
	desc = EVTDESC91215
	picture = GFX_evt_bishop_muslim

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_rulers = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = cynical
		NOT = { has_character_flag = decadence_cynical }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91215

		piety = -50
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_cynical
		set_character_flag = decadence_change
	}
}

# Paranoid
character_event = {
	id = 91216
	desc = EVTDESC91216
	picture = GFX_evt_carriage

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_rulers = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = paranoid
		NOT = { has_character_flag = decadence_paranoid }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91216

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_paranoid
		set_character_flag = decadence_change
	}
}

# Cruel
character_event = {
	id = 91217
	desc = EVTDESC91217
	picture = GFX_evt_lunatic

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_rulers = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = cruel
		NOT = { has_character_flag = decadence_cruel }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91217

		piety = -25
		pf_tradition_minus1_effect = yes
		set_character_flag = decadence_cruel
		set_character_flag = decadence_change
	}
}

### Lowers Decadence

# Genius
character_event = {
	id = 91218
	desc = EVTDESC91218
	picture = GFX_evt_monk_muslim

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_rulers = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		is_smart_trigger = yes
		NOT = { has_character_flag = decadence_genius }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91218

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_genius
		set_character_flag = decadence_change
	}
}

# Celibate
character_event = {
	id = 91219
	desc = EVTDESC91219
	picture = GFX_evt_bishop_muslim

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_rulers = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = celibate
		NOT = { has_character_flag = decadence_celibate }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91219

		piety = 50
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_celibate
		set_character_flag = decadence_change
	}
}

# Scholar
character_event = {
	id = 91220
	desc = EVTDESC91220
	picture = GFX_evt_monk_muslim

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = scholar
		NOT = { has_character_flag = decadence_scholar }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91220

		piety = 50
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_scholar
		set_character_flag = decadence_change
	}
}

# Chaste
character_event = {
	id = 91221
	desc = EVTDESC91221
	picture = GFX_evt_birth

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = chaste
		NOT = { has_character_flag = decadence_chaste }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91221

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_chaste
		set_character_flag = decadence_change
	}
}

# Temperate
character_event = {
	id = 91222
	desc = EVTDESC91222
	picture = GFX_evt_emissary

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = temperate
		NOT = { has_character_flag = decadence_temperate }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91222

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_temperate
		set_character_flag = decadence_change
	}
}

# Charitable
character_event = {
	id = 91223
	desc = EVTDESC91223
	picture = GFX_evt_burning_house

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = charitable
		NOT = { has_character_flag = decadence_charitable }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91223

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_charitable
		set_character_flag = decadence_change
	}
}

# Diligent
character_event = {
	id = 91224
	desc = EVTDESC91224
	picture = GFX_evt_monk_muslim

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = diligent
		NOT = { has_character_flag = decadence_diligent }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91224

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_diligent
		set_character_flag = decadence_change
	}
}

# Kind
character_event = {
	id = 91225
	desc = EVTDESC91225
	picture = GFX_evt_emissary

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = kind
		NOT = { has_character_flag = decadence_kind }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91225

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_kind
		set_character_flag = decadence_change
	}
}

# Patient
character_event = {
	id = 91226
	desc = EVTDESC91226
	picture = GFX_evt_throne_room

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = patient
		NOT = { has_character_flag = decadence_patient }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91226

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_patient
		set_character_flag = decadence_change
	}
}

# Humble
character_event = {
	id = 91227
	desc = EVTDESC91227
	picture = GFX_evt_desert

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = humble
		NOT = { has_character_flag = decadence_humble }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91227

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_humble
		set_character_flag = decadence_change
	}
}

# Honest
character_event = {
	id = 91228
	desc = EVTDESC91228
	picture = GFX_evt_emissary

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = honest
		NOT = { has_character_flag = decadence_honest }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91228

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_honest
		set_character_flag = decadence_change
	}
}

# Brave
character_event = {
	id = 91229
	desc = EVTDESC91229
	picture = GFX_evt_moors

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = brave
		NOT = { has_character_flag = decadence_brave }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91229

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_brave
		set_character_flag = decadence_change
	}
}

# Ambitious
character_event = {
	id = 91230
	desc = EVTDESC91230
	picture = GFX_evt_throne_room

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = ambitious
		NOT = { has_character_flag = decadence_ambitious }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91230

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_ambitious
		set_character_flag = decadence_change
	}
}

# Just
character_event = {
	id = 91231
	desc = EVTDESC91231
	picture = GFX_evt_bishop_muslim

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = just
		NOT = { has_character_flag = decadence_just }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91231

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_just
		set_character_flag = decadence_change
	}
}

# Zealous
character_event = {
	id = 91232
	desc = EVTDESC91232
	picture = GFX_evt_bishop_muslim

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = zealous
		NOT = { has_character_flag = decadence_zealous }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91232

		piety = 50
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_zealous
		set_character_flag = decadence_change
	}
}

# Mujahid
character_event = {
	id = 91233
	desc = EVTDESC91233
	picture = GFX_evt_battle

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = mujahid
		NOT = { has_character_flag = decadence_mujahid }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91233

		piety = 50
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_mujahid
		set_character_flag = decadence_change
	}
}

# Hafiz
character_event = {
	id = 91234
	desc = EVTDESC91234
	picture = GFX_evt_monk_muslim

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = hafiz
		NOT = { has_character_flag = decadence_hafiz }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91234

		piety = 50
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_hafiz
		set_character_flag = decadence_change
	}
}

# Hajjaj
character_event = {
	id = 91235
	desc = EVTDESC91235
	picture = GFX_evt_kaaba

	is_triggered_only = yes # on_yearly_pulse, random_events, decadence_trait_events

	only_playable = yes
	religion_group = muslim
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trait = hajjaj
		NOT = { has_character_flag = decadence_hajjaj }
	}

	weight_multiplier = {
		factor = 1
		decadence_events_score = yes
	}

	option = {
		name = EVTOPTA91235

		piety = 25
		pf_tradition_plus1_effect = yes
		set_character_flag = decadence_hajjaj
		set_character_flag = decadence_change
	}
}

# Vassal can declare independence after a successful Decadence invasion - No longer needed, realm title is destroyed as of 3.0
# character_event = {
# 	id = 91240
# 	desc = EVTDESC91240
# 	picture = GFX_evt_council
#
# 	is_triggered_only = yes
#
# 	option = {
# 		name = EVTOPTA91240 # Remain loyal
#
# 		ai_chance = {
# 			factor = 100
#
#			mult_modifier = {
# 				factor = 10
# 				trait = content
# 			}
#
#			mult_modifier = {
# 				factor = 4
#
# 				trait = zealous
#
# 				liege = {
# 					controls_religion = yes # Stay loyal to the Caliph
# 					religion = ROOT
# 				}
# 			}
# 		}
# 	}
#
# 	option = {
# 		name = EVTOPTB91240 # Declare independence
#
# 		set_defacto_liege = ROOT
#
# 		liege = {
#			show_scope_change = no
#
# 			opinion = {
# 				name = opinion_traitor
# 				who = ROOT
# 				years = 20
# 			}
#
#			log = "91240: [Root.GetTitledName] declares independence from [This.GetTitledName] after a decadence revolt"
#
# 			ROOT = {
#				show_scope_change = no
#
# 				any_demesne_title = {
#					show_scope_change = no
#
# 					remove_claim = PREVPREV
# 				}
# 			}
# 		}
#
# 		ai_chance = {
# 			factor = 50
#
# 			mult_modifier = {
# 				factor = 3
# 				trait = ambitious
# 			}
#
# 			mult_modifier = {
# 				factor = 1000
# 				in_faction = faction_independence
# 			}
#
# 			mult_modifier = {
# 				factor = 50
# 				real_tier = KING
# 			}
#
# 			mult_modifier = {
# 				factor = 100
# 				NOT = { religion_group = liege }
# 			}
#
# 			mult_modifier = {
# 				factor = 5
# 				religion_group = liege
# 				NOT = { religion = liege }
# 			}
#
# 			mult_modifier = {
# 				factor = 5
# 				NOT = { culture_group = liege }
# 			}
#
# 			mult_modifier = {
# 				factor = 2
# 				culture_group = liege
# 				NOT = { culture = liege }
# 			}
# 		}
# 	}
# }

narrative_event = {
	id = 91241
	title = EVTTITLE91241
	desc = EVTDESC91241
	picture = GFX_evt_moors

	is_triggered_only = yes # decadence_invasion, on_success

	ai = no

	option = {
		name = EVTOPTA91241
	}
}

# IMPORTANT EVENT
# Muslim gains the Decadent Trait

character_event = {
	id = 91300
	desc = EVTDESC91300
	picture = GFX_evt_sultan

	is_triggered_only = yes # on_yearly_pulse, random_events, gain_decadent

	religion_group = muslim
	only_men = yes
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		num_of_dynasty_members >= 3 # Does not trigger for tiny dynasties
		lower_real_tier_than = KING

		biggest_realm_size_relative = {
			NOT = { character = PREV }
			realm_size >= 5
			same_realm = ROOT
		}

		OR = {
			trait = lunatic
			trait = possessed
			trait = drunkard
			trait = homosexual
			trait = hedonist
			trait = impaler

			calc_true_if = {
				amount = 2
				trait = gluttonous
				trait = lustful
				trait = greedy
				trait = slothful
				trait = envious
				trait = wroth
				trait = proud
				trait = deceitful
				trait = craven
				trait = content
				trait = arbitrary
				trait = cynical
				trait = paranoid
				trait = cruel
			}
		}

		holy_order = no
		is_offmap_ruler = no

		trigger_if = {
			limit = { has_character_flag = was_straightened_up }

			had_character_flag = {
				flag = was_straightened_up
				years >= 10
			}
		}

		NOR = {
			trait = decadent
			trait = zealous
			trait = mujahid
			trait = adventurer
			has_character_flag = straightened_up
			has_character_flag = invasion_china_claimant

			dynasty_head = {
				has_opinion_modifier = {
					name = opinion_straightened_up
					who = ROOT
				}
			}

			any_liege = {
 				dynasty = ROOT

				any_dynasty_member = {
					count >= 20

					trait = decadent
					is_alive = yes
				}
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 2.0
			trait = indulgent_wastrel
		}

		mult_modifier = {
			factor = 1.33
			trait = naive_appeaser
		}

		mult_modifier = {
			factor = 1.33
			trait = amateurish_plotter
		}

		mult_modifier = {
			factor = 10
			trait = hedonist
		}

		mult_modifier = {
			factor = 10
			trait = bad_priest_muslim
		}

		mult_modifier = {
			factor = 2
			trait = gluttonous
		}

		mult_modifier = {
			factor = 4
			trait = drunkard
		}

		mult_modifier = {
			factor = 2
			trait = homosexual
		}

		mult_modifier = {
			factor = 1.33
			trait = slothful
		}

		mult_modifier = {
			factor = 2
			trait = lunatic
		}

		mult_modifier = {
			factor = 1.33
			trait = cynical
		}

		mult_modifier = {
			factor = 2.0
			trait = lustful
		}

		mult_modifier = {
			factor = 1.33
			trait = greedy
		}

		mult_modifier = {
			factor = 1.33
			trait = wroth
		}

		mult_modifier = {
			factor = 1.33
			trait = cruel
		}

		mult_modifier = {
			factor = 1.33
			trait = arbitrary
		}

		mult_modifier = {
			factor = 0.33
			trait = chaste
		}

		mult_modifier = {
			factor = 0.33
			trait = just
		}

		mult_modifier = {
			factor = 0.33
			trait = diligent
		}

		mult_modifier = {
			factor = 2
			trait = temperate
		}

		mult_modifier = {
			factor = 0.5
			trait = faqih
		}

		mult_modifier = {
			factor = 0.2
			trait = hafiz
		}

		mult_modifier = {
			factor = 0.1
			trait = ashari
		}

		mult_modifier = {
			factor = 0.5
			trait = detached_priest
		}

		mult_modifier = {
			factor = 0.25
			trait = dutiful_cleric
		}

		mult_modifier = {
			factor = 0.125
			trait = scholarly_theologian
		}

		mult_modifier = {
			factor = 0.1
			trait = mastermind_theologian
		}

		mult_modifier = {
			factor = 0.4
			real_tier = BARON
		}

		mult_modifier = {
			factor = 0.2
			real_tier = COUNT
		}

		mult_modifier = {
			factor = 0.1
			real_tier = DUKE
		}

		# mult_modifier = {
		# 	factor = 1.33
		#
		# 	biggest_realm_size_relative = {
		# 		realm_size >= 100
		# 	}
		# }

		mult_modifier = {
			factor = 1.33

			biggest_realm_size_relative = {
				realm_size >= 150
			}
		}

		# mult_modifier = {
		# 	factor = 1.33
		#
		# 	biggest_realm_size_relative = {
		# 		realm_size >= 200
		# 	}
		# }

		mult_modifier = {
			factor = 2

			biggest_realm_size_relative = {
				realm_size >= 250
			}
		}

		# mult_modifier = {
		# 	factor = 1.33
		#
		# 	biggest_realm_size_relative = {
		# 		realm_size >= 300
		# 	}
		# }
		#
		# mult_modifier = {
		# 	factor = 1.33
		#
		# 	biggest_realm_size_relative = {
		# 		realm_size >= 350
		# 	}
		# }
		#
		# mult_modifier = {
		# 	factor = 1.33
		#
		# 	biggest_realm_size_relative = {
		# 		realm_size >= 400
		# 	}
		# }
		#
		# mult_modifier = {
		# 	factor = 1.33
		#
		# 	biggest_realm_size_relative = {
		# 		realm_size >= 450
		# 	}
		# }
		#
		# mult_modifier = {
		# 	factor = 1.33
		#
		# 	biggest_realm_size_relative = {
		# 		realm_size >= 500
		# 	}
		# }

		# CK2Plus
		mult_modifier = {
			factor = 1.33
			trait = impaler
		}

		mult_modifier = {
			factor = 1.33
			trait = envious
		}

		mult_modifier = {
			factor = 1.33
			trait = proud
		}

		mult_modifier = {
			factor = 1.33
			trait = deceitful
		}

		mult_modifier = {
			factor = 1.33
			trait = craven
		}

		mult_modifier = {
			factor = 1.33
			trait = content
		}

		mult_modifier = {
			factor = 1.33
			trait = paranoid
		}

		mult_modifier = {
			factor = 1.33
			is_dumb_trigger = yes
		}

		mult_modifier = {
			factor = 2
			trait = imbecile
		}

		mult_modifier = {
			factor = 2
			trait = inbred
		}

		mult_modifier = {
			factor = 0.2
			trait = celibate
		}

		mult_modifier = {
			factor = 0.5
			trait = genius
		}

		mult_modifier = {
			factor = 0.5
			trait = humble
		}

		mult_modifier = {
			factor = 0.8
			trait = scholar
		}

		mult_modifier = {
			factor = 0.8
			trait = charitable
		}

		mult_modifier = {
			factor = 0.8
			trait = kind
		}

		mult_modifier = {
			factor = 0.8
			trait = patient
		}

		mult_modifier = {
			factor = 0.8
			trait = honest
		}

		mult_modifier = {
			factor = 0.8
			trait = brave
		}

		mult_modifier = {
			factor = 0.8
			trait = ambitious
		}

		mult_modifier = {
			factor = 1.33

			highest_ranked_relative = {
				real_tier = KING
			}
		}

		mult_modifier = {
			factor = 2.0

			highest_ranked_relative = {
				real_tier = EMPEROR
			}
		}

		mult_modifier = {
			factor = 1.11

			any_dynasty_member = {
				count >= 25
				is_alive = yes
			}
		}

		mult_modifier = {
			factor = 1.11

			any_dynasty_member = {
				count >= 50
				is_alive = yes
			}
		}

		mult_modifier = {
			factor = 1.11

			any_dynasty_member = {
				count >= 75
				is_alive = yes
			}
		}

		mult_modifier = {
			factor = 1.11

			any_dynasty_member = {
				count >= 100
				is_alive = yes
			}
		}

		mult_modifier = {
			factor = 0.833

			any_dynasty_member = {
				count >= 8
				trait = decadent
				is_alive = yes
			}
		}

		mult_modifier = {
			factor = 0.67

			any_dynasty_member = {
				count >= 12
				trait = decadent
				is_alive = yes
			}
		}

		mult_modifier = {
			factor = 0.5

			any_dynasty_member = {
				count >= 16
				trait = decadent
				is_alive = yes
			}
		}
	}

	option = {
		name = EVTOPTA91300

		add_trait = decadent
		piety = -50

		any_player = {
			limit = {
				dynasty = ROOT
				is_liege_or_above_of = ROOT

				NOR = {
					character = ROOT
					any_liege = { dynasty = ROOT }
				}
			}

			character_event = {
				id = 91370
				days = 1
			}
		}
	}
}

# Muslim ruler tries to convince a dynasty member to lose the 'Decadent' Trait
# Fired from decision "convince_to_straighten_up"
character_event = {
	id = 91350
	desc = EVTDESC91350
	picture = GFX_evt_council

	is_triggered_only = yes # convince_to_straighten_up, dynasty_decisions.txt

	immediate = {
		save_event_target_as = takfir_target
	}

	option = {
		name = EVTOPTA91350 # Refuse

		FROMFROM = {
			show_scope_change = no

			character_event = {
				id = 91351
				days = 3
				tooltip = EVTTOOLTIP91351
			}
		}

		ai_chance = {
			factor = 25

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = FROMFROM
					value < 0
				}
			}

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = FROMFROM
					value < -25
				}
			}

			mult_modifier = {
				factor = 4

				personal_opinion = {
					who = FROMFROM
					value < -50
				}
			}

			mult_modifier = {
				factor = 4
				trait = hedonist
			}

			mult_modifier = {
				factor = 2
				trait = gluttonous
			}

			mult_modifier = {
				factor = 2
				trait = arbitrary
			}

			mult_modifier = {
				factor = 2
				trait = drunkard
			}

			mult_modifier = {
				factor = 2
				trait = slothful
			}

			mult_modifier = {
				factor = 1.5
				diplomacy >= 12
			}

			mult_modifier = {
				factor = 1.5
				learning >= 12
			}

			mult_modifier = {
				factor = 1.5
				intrigue >= 12
			}

			# CK2Plus
			mult_modifier = {
				factor = 3
				is_ruler = yes
			}

			mult_modifier = {
				factor = 3
				higher_real_tier_than = COUNT
			}

			mult_modifier = {
				factor = 3
				higher_real_tier_than = DUKE
			}

			mult_modifier = {
				factor = 10

				OR = {
					trait = lunatic
					trait = possessed
				}
			}

			mult_modifier = {
				factor = 4
				trait = imbecile
			}

			mult_modifier = {
				factor = 4
				trait = proud
			}

			mult_modifier = {
				factor = 4
				trait = paranoid
			}

			mult_modifier = {
				factor = 2
				is_dumb_trigger = yes
			}

			mult_modifier = {
				factor = 2
				trait = wroth
			}

			mult_modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	option = {
		name = EVTOPTB91350 # Accept

		FROMFROM = {
			show_scope_change = no

			character_event = {
				id = 91352
				days = 3
				tooltip = EVTTOOLTIP91352
			}
		}

		remove_trait = decadent
		piety = 25
		prestige = -100

		ai_chance = {
			factor = 5

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = FROMFROM
					value >= 25
				}
			}

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = FROMFROM
					value >= 50
				}
			}

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = FROMFROM
					value >= 75
				}
			}

			mult_modifier = {
				factor = 4
				trait = temperate
			}

			mult_modifier = {
				factor = 4
				trait = craven
			}

			mult_modifier = {
				factor = 2
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = patient
			}

			mult_modifier = {
				factor = 2
				trait = diligent
			}

			mult_modifier = {
				factor = 2
				trait = trusting
			}
		}
	}
}

# The decadent character refuses
character_event = {
	id = 91351
	desc = EVTDESC91351
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA91351 # Denounce

		opinion = {
			name = opinion_takfir
			who = FROM
			years = 20
		}

		hidden_effect = {
			any_dynasty_member = {
				limit = {
					is_playable = yes
					is_offmap_ruler = no

					NOR = {
						trait = decadent
						character = FROM
					}
				}

				opinion = {
					name = opinion_takfir
					who = event_target:takfir_target
					years = 20
				}

				character_event = {
					id = 91369 # Inform players
					days = 1
				}
			}
		}
	}

	option = {
		name = EVTOPTB91351 # Convince (diplo)
		tooltip_info = diplomacy

		trigger = { diplomacy >= 12 }

		FROM = {
			show_scope_change = no

			character_event = {
				id = 91355
				days = 3
				tooltip = EVTTOOLTIP91355
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTC91351 # Theological Debate (learning)
		tooltip_info = learning

		trigger = {
			learning >= 12
			religion = FROM
		}

		FROM = {
			show_scope_change = no

			character_event = {
				id = 91360
				days = 3
				tooltip = EVTTOOLTIP91360
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTD91351 # Threaten (intrigue)
		tooltip_info = intrigue

		trigger = { intrigue >= 12 }

		FROM = {
			show_scope_change = no

			character_event = {
				id = 91365
				days = 3
				tooltip = EVTTOOLTIP91365
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTE91351 # Demand because of favor

		trigger = { holds_favor_on = FROM }

		remove_favor = FROM

		FROM = {
			show_scope_change = no

			character_event = {
				id = 91378
				days = 5
				tooltip = EVTOPTE91351_TOOLTIP
			}
		}

		ai_chance = { factor = 30 }
	}
}

# The decadent character accepts at once
character_event = {
	id = 91352
	desc = EVTDESC91352
	picture = GFX_evt_council

	is_triggered_only = yes

	option = {
		name = EVTOPTA91352

		FROM = {
			set_character_flag = was_straightened_up
		}

		opinion = {
			name = opinion_straightened_up
			who = FROM
			years = 100
		}
	}
}

# Attempt at diplomatic persuasion
character_event = {
	id = 91355
	desc = EVTDESC91355
	picture = GFX_evt_council

	is_triggered_only = yes

	option = {
		name = EVTOPTA91355 # Refuse

		FROM = {
			show_scope_change = no

			character_event = {
				id = 91356
				days = 3
				tooltip = EVTTOOLTIP91351
			}
		}

		prestige = -100

		ai_chance = {
			factor = 10

			mult_modifier = {
				factor = 4
				trait = imbecile
			}

			mult_modifier = {
				factor = 4
				trait = proud
			}

			mult_modifier = {
				factor = 2
				trait = hedonist
			}

			mult_modifier = {
				factor = 2
				is_dumb_trigger = yes
			}

			mult_modifier = {
				factor = 2
				trait = wroth
			}

			mult_modifier = {
				factor = 2
				trait = drunkard
			}

			mult_modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	option = {
		name = EVTOPTB91355 # Accept

		FROM = {
			show_scope_change = no

			character_event = {
				id = 91357
				days = 3
				tooltip = EVTTOOLTIP91352
			}
		}

		remove_trait = decadent

		ai_chance = {
			factor = 10

			mult_modifier = {
				factor = 4
				trait = craven
			}

			mult_modifier = {
				factor = 2
				trait = temperate
			}

			mult_modifier = {
				factor = 2
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = trusting
			}

			mult_modifier = {
				factor = 0.5

				is_ruler = yes
				lower_tier_than = DUKE
			}

			mult_modifier = {
				factor = 0.1

				OR = {
					diplomacy >= 12
					learning >= 12
					intrigue >= 12
					higher_real_tier_than = COUNT
				}
			}
		}
	}

	option = {
		name = EVTOPTC91355 # Bribe (diplo)
		tooltip_info = diplomacy

		trigger = { diplomacy >= 12 }

		FROM = {
			character_event = {
				id = 91372
				days = 3
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTD91355 # Engage in theological debate (learning)
		tooltip_info = learning

		trigger = { learning >= 12 }

		FROM = {
			character_event = {
				id = 91373
				days = 3
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 10

				OR = {
					trait = scholar
					trait = faqih
					trait = theologian
				}
			}
		}
	}

	option = {
		name = EVTOPTE91355 # Seduce wife (intrigue)
		tooltip_info = intrigue

		trigger = {
			FROM = {
				is_married = yes
			}

			OR = {
				intrigue >= 12
				trait = master_seducer

				trigger_if = {
					limit = { trait = attractive }
					intrigue >= 8
				}
			}

			NOR = {
				trait = chaste
				trait = celibate
				trait = eunuch
			}
		}

		FROM = {
			random_spouse = {
				character_event = {
					id = 91374
					days = 3
				}
			}
		}

		ai_chance = {
			factor = 100

			trigger = {
				OR = {
					trait = lustful
					trait = hedonist
					trait = master_seducer
					trait = deceitful
					trait = cruel
				}
			}
		}
	}
}

# The decadent character refuses the diplomatic attempt
character_event = {
	id = 91356
	desc = EVTDESC91356
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = {
		name = EVTOPTA91351 # Denounce

		opinion = {
			name = opinion_takfir
			who = FROM
			years = 20
		}

		hidden_effect = {
			any_dynasty_member = {
				limit = {
					is_playable = yes
					is_offmap_ruler = no

					NOR = {
						trait = decadent
						character = FROM
					}
				}

				opinion = {
					name = opinion_takfir
					who = event_target:takfir_target
					years = 20
				}

				character_event = {
					id = 91369 # Inform players
					days = 1
				}
			}
		}
	}
}

# The decadent character folds after the diplomatic attempt
character_event = {
	id = 91357
	desc = EVTDESC91357
	picture = GFX_evt_council

	is_triggered_only = yes

	option = {
		name = EVTOPTA91352

		FROM = {
			set_character_flag = was_straightened_up
		}

		opinion = {
			name = opinion_straightened_up
			who = FROM
			years = 100
		}
	}
}

# Attempt at religious persuasion
character_event = {
	id = 91360
	desc = EVTDESC91360
	picture = GFX_evt_bishop_muslim

	is_triggered_only = yes

	immediate = {
		random_playable_ruler = {
			limit = {
				holy_order = yes
				religion = ROOT
				holy_order_not_expelled_trigger = yes
			}

			preferred_limit = {
				independent = yes
			}

			random_demesne_title = {
				limit = { holy_order = yes }

				save_event_target_as = join_holy_order
			}
		}
	}

	option = {
		name = EVTOPTA91360 # Refuse

		FROM = {
			show_scope_change = no

			character_event = {
				id = 91356
				days = 3
				tooltip = EVTTOOLTIP91351
			}
		}

		piety = -100

		ai_chance = {
			factor = 10

			mult_modifier = {
				factor = 4
				trait = imbecile
			}

			mult_modifier = {
				factor = 4
				trait = proud
			}

			mult_modifier = {
				factor = 2
				trait = hedonist
			}

			mult_modifier = {
				factor = 2
				is_dumb_trigger = yes
			}

			mult_modifier = {
				factor = 2
				trait = wroth
			}

			mult_modifier = {
				factor = 2
				trait = drunkard
			}

			mult_modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	option = {
		name = EVTOPTB91360 # Join the Bektashi Order

		trigger = {
			event_target:join_holy_order = {
				has_holder = yes
			}

			is_sunni_branch = yes
			is_ruler = no
			is_heretic = no
		}

		FROM = {
			character_event = {
				id = 91361
				days = 3
			}
		}

		remove_trait = decadent
		piety = 100

		if = {
			limit = { has_character_modifier = estates_1 }

			remove_character_modifier = estates_1
			wealth = 40
		}

		any_spouse = {
			show_scope_change = no

			remove_spouse = ROOT
			character_event = { id = 91377 }
		}

		event_target:join_holy_order = {
			show_scope_change = no

			holder_scope = {
				show_scope_change = no

				ROOT = {
					show_scope_change = no

					move_character = PREV
					end_inaccessibility_effect = yes

					transfer_scaled_wealth = {
						to = PREV
						value = all
					}

					any_child = {
						limit = {
							is_adult = no
							at_location = ROOT
						}

						move_character = FROM
					}
				}
			}
		}

		any_spouse = {
			show_scope_change = no

			remove_spouse = ROOT
			character_event = { id = 91377 }
		}

		ai_chance = {
			factor = 10

			mult_modifier = {
				factor = 4
				trait = craven
			}

			mult_modifier = {
				factor = 2
				trait = temperate
			}

			mult_modifier = {
				factor = 2
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = trusting
			}

			mult_modifier = {
				factor = 0.1

				OR = {
					trait = cynical
					diplomacy >= 12
					learning >= 12
					intrigue >= 12

					any_spouse = {
						reverse_opinion = {
							who = ROOT
							value >= 90
						}
					}
				}
			}
		}
	}

	# option = {
	# 	name = EVTOPTC91360 # Join the Assassins
	#
	# 	trigger = {
	# 		d_fedayeen = {
	# 			has_holder = yes
	# 		}
	#
	# 		is_shiite_branch = yes
	# 		NOT = { religion = qarmatian }
	# 		is_ruler = no
	# 		is_heretic = no
	#
	# 		OR = {
	# 			religion = shiite
	# 			religion = druze
	# 			religion = hurufi
	# 		}
	# 	}
	#
	# 	FROM = {
	# 		character_event = {
	# 			id = 91361
	# 			days = 3
	# 		}
	# 	}
	#
	# 	remove_trait = decadent
	# 	clr_character_flag = negotiated_to_drop_decadence
	# 	piety = 100
	#
	# 	d_fedayeen = {
	# 		show_scope_change = no
	#
	# 		holder_scope = {
	# 			show_scope_change = no
	#
	# 			ROOT = {
	# 				show_scope_change = no
	#
	# 				move_character = PREV
	# 			}
	# 		}
	# 	}
	#
	# 	any_spouse = {
	# 		show_scope_change = no
	#
	# 		remove_spouse = ROOT
	# 		character_event = { id = 91377 }
	# 	}
	#
	# 	ai_chance = {
	# 		factor = 5
	#
	# 		mult_modifier = {
	# 			factor = 0.7
	#
	# 			any_spouse = {
	# 				reverse_opinion = {
	# 					who = ROOT
	# 					value >= 100
	# 				}
	# 			}
	# 		}
	# 	}
	# }

	option = {
		name = EVTOPTD91360 # Go on Hajj

		trigger = {
			is_ruler = yes
			has_regent = no
			is_ill = no

			NOR = {
				trait = hajjaj
				trait = on_hajj
				trait = infirm
				trait = blinded
				religion = druze
				religion = qarmatian
			}
		}

		remove_trait = decadent
		piety = 50

		FROM = {
			character_event = {
				id = 91362
				days = 3
			}
		}

		clr_character_flag = promise_hajj
		set_character_flag = activated_hajj
		letter_event = { id = 86000 } # Start Hajj

		ai_chance = {
			factor = 10

			mult_modifier = {
				factor = 4
				trait = craven
			}

			mult_modifier = {
				factor = 2
				trait = temperate
			}

			mult_modifier = {
				factor = 2
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = trusting
			}

			mult_modifier = {
				factor = 0.5
				lower_tier_than = DUKE
			}

			mult_modifier = {
				factor = 0.1

				OR = {
					trait = cynical
					diplomacy >= 12
					learning >= 12
					intrigue >= 12
					higher_real_tier_than = COUNT
				}
			}
		}
	}

	# option = {
	# 	name = EVTOPTE91360 # Donate money to charity
	#
	# 	remove_trait = decadent
	# 	set_character_flag = straightened_up
	# 	clr_character_flag = negotiated_to_drop_decadence
	#
	# 	FROM = {
	# 		character_event = {
	# 			id = 91363
	# 			days = 3
	# 		}
	# 	}
	#
	# 	wealth = -10
	# 	piety = 20
	#
	# 	ai_chance = { factor = 5 }
	# }

	option = {
		name = EVTOPTC91355 # Bribe (diplo)
		tooltip_info = diplomacy

		trigger = { diplomacy >= 12 }

		FROM = {
			character_event = {
				id = 91372
				days = 3
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTD91355 # Engage in theological debate (learning)
		tooltip_info = learning

		trigger = { learning >= 12 }

		FROM = {
			character_event = {
				id = 91373
				days = 3
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 10

				OR = {
					trait = scholar
					trait = faqih
					trait = theologian
				}
			}
		}
	}

	option = {
		name = EVTOPTE91355 # Seduce wife (intrigue)
		tooltip_info = intrigue

		trigger = {
			FROM = {
				is_married = yes
			}

			OR = {
				intrigue >= 12
				trait = master_seducer

				trigger_if = {
					limit = { trait = attractive }
					intrigue >= 8
				}
			}

			NOR = {
				trait = chaste
				trait = celibate
				trait = eunuch
			}
		}

		FROM = {
			random_spouse = {
				character_event = {
					id = 91374
					days = 3
				}
			}
		}

		ai_chance = {
			factor = 100

			trigger = {
				OR = {
					trait = lustful
					trait = hedonist
					trait = master_seducer
					trait = deceitful
					trait = cruel
				}
			}
		}
	}
}

# The decadent character joined a holy order
character_event = {
	id = 91361
	desc = EVTDESC91361
	picture = GFX_evt_melee

	is_triggered_only = yes

	option = {
		name = EVTOPTA91361

		FROM = {
			set_character_flag = was_straightened_up
		}

		opinion = {
			name = opinion_straightened_up
			who = FROM
			years = 100
		}
	}
}

# The decadent character went on the Hajj
character_event = {
	id = 91362
	desc = EVTDESC91362
	picture = GFX_evt_kaaba

	is_triggered_only = yes

	option = {
		name = EVTOPTA91362

		FROM = {
			set_character_flag = was_straightened_up
		}

		opinion = {
			name = opinion_straightened_up
			who = FROM
			years = 100
		}
	}
}

# The decadent character gave money to charity
# character_event = {
# 	id = 91363
# 	desc = EVTDESC91363
# 	picture = GFX_evt_kaaba
#
# 	is_triggered_only = yes
#
# 	option = {
# 		name = EVTOPTA91363
#
# 		opinion = {
# 			name = opinion_straightened_up
# 			who = FROM
# 			years = 100
# 		}
# 	}
# }

# Attempt at Intrigue persuasion
character_event = {
	id = 91365
	desc = EVTDESC91365
	picture = GFX_evt_shadow

	is_triggered_only = yes

	option = {
		name = EVTOPTA91365 # Refuse

		FROM = {
			show_scope_change = no

			character_event = {
				id = 91366
				days = 3
				tooltip = EVTTOOLTIP91351
			}
		}

		prestige = -100

		ai_chance = {
			factor = 10

			mult_modifier = {
				factor = 4
				trait = imbecile
			}

			mult_modifier = {
				factor = 4
				trait = proud
			}

			mult_modifier = {
				factor = 2
				trait = hedonist
			}

			mult_modifier = {
				factor = 2
				is_dumb_trigger = yes
			}

			mult_modifier = {
				factor = 2
				trait = wroth
			}

			mult_modifier = {
				factor = 2
				trait = drunkard
			}

			mult_modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	option = {
		name = EVTOPTB91365 # Accept

		FROM = {
			show_scope_change = no

			character_event = {
				id = 91367
				days = 3
				tooltip = EVTTOOLTIP91352
			}
		}

		remove_trait = decadent

		ai_chance = {
			factor = 10

			mult_modifier = {
				factor = 4
				trait = craven
			}

			mult_modifier = {
				factor = 2
				trait = temperate
			}

			mult_modifier = {
				factor = 2
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = trusting
			}

			mult_modifier = {
				factor = 0.5

				is_ruler = yes
				lower_tier_than = DUKE
			}

			mult_modifier = {
				factor = 0.1

				OR = {
					diplomacy >= 12
					learning >= 12
					intrigue >= 12
					higher_real_tier_than = COUNT
				}
			}
		}
	}

	option = {
		name = EVTOPTC91365 # Suicide

		trigger = {
			OR = {
				trait = stressed
				trait = depressed
				is_maimed_trigger = yes
				trait = blinded
				trait = eunuch
				trait = pneumonic
				trait = leper
				trait = craven
				trait = inbred
				trait = imbecile
			}
		}

		FROM = {
			character_event = {
				id = 91368
				days = 3
			}
		}

		death = {
			death_reason = death_suicide
		}

		ai_chance = { factor = 5 }
	}

	option = {
		name = EVTOPTC91355 # Bribe (diplo)
		tooltip_info = diplomacy

		trigger = { diplomacy >= 12 }

		FROM = {
			character_event = {
				id = 91372
				days = 3
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTD91355 # Engage in theological debate (learning)
		tooltip_info = learning

		trigger = { learning >= 12 }

		FROM = {
			character_event = {
				id = 91373
				days = 3
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 10

				OR = {
					trait = scholar
					trait = faqih
					trait = theologian
				}
			}
		}
	}

	option = {
		name = EVTOPTE91355 # Seduce wife (intrigue)
		tooltip_info = intrigue

		trigger = {
			FROM = {
				is_married = yes
			}

			OR = {
				intrigue >= 12
				trait = master_seducer

				trigger_if = {
					limit = { trait = attractive }
					intrigue >= 8
				}
			}

			NOR = {
				trait = chaste
				trait = celibate
				trait = eunuch
			}
		}

		FROM = {
			random_spouse = {
				character_event = {
					id = 91374
					days = 3
				}
			}
		}

		ai_chance = {
			factor = 100

			trigger = {
				OR = {
					trait = lustful
					trait = hedonist
					trait = master_seducer
					trait = deceitful
					trait = cruel
				}
			}
		}
	}
}

# The decadent character refuses the Intrigue attempt
character_event = {
	id = 91366
	desc = EVTDESC91366
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = {
		name = EVTOPTA91351 # Denounce

		opinion = {
			name = opinion_takfir
			who = FROM
			years = 20
		}

		hidden_effect = {
			any_dynasty_member = {
				limit = {
					uses_decadence = yes
					is_playable = yes
					is_offmap_ruler = no

					NOR = {
						trait = decadent
						character = FROM
					}
				}

				opinion = {
					name = opinion_takfir
					who = event_target:takfir_target
					years = 20
				}

				character_event = {
					id = 91369 # Inform players
					days = 1
				}
			}
		}
	}
}

# The decadent character folds after the Intrigue attempt
character_event = {
	id = 91367
	desc = EVTDESC91367
	picture = GFX_evt_council

	is_triggered_only = yes

	option = {
		name = EVTOPTA91352

		FROM = {
			set_character_flag = was_straightened_up
		}

		opinion = {
			name = opinion_straightened_up
			who = FROM
			years = 100
		}
	}
}

# The decadent character suicides after the Intrigue attempt
character_event = {
	id = 91368
	desc = EVTDESC91368
	picture = GFX_evt_lunatic

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA91368
	}
}

# Other rulers of the dynasty are notified of the failure to straighten the character up
character_event = {
	id = 91369
	desc = EVTDESC91369
	picture = GFX_evt_jugglers

	notification = yes
	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA91369
	}
}

# Player rulers of the dynasty are notified when someone goes decadent
character_event = {
	id = 91370
	desc = EVTDESC91370
	picture = GFX_evt_jugglers

	notification = yes
	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA91370
	}
}

# Resets flag negotiated_to_drop_decadence
# character_event = {
# 	id = 91371
#
# 	hide_window = yes
# 	is_triggered_only = yes
#
# 	immediate = {
# 		clr_character_flag = negotiated_to_drop_decadence
# 	}
# }

# The decadent character tries to bribe dynasty head
character_event = {
	id = 91372
	desc = EVTDESC91372
	picture = GFX_evt_emissary

	is_triggered_only = yes

	option = {
		name = EVTOPTA91372 # Accept

		create_character = {
			random_traits = no
			dynasty = NONE
			female = no
			age = 20
			religion = ROOT
			culture = ROOT
			add_trait = eunuch
			add_trait = diligent
			add_trait = quick
			add_trait = brave
			add_trait = brilliant_strategist

			attributes = {
				martial = 10
			}
		}

		# hidden_effect = {
		# 	any_dynasty_member = {
		# 		limit = {
		# 			is_playable = yes
		# 			is_offmap_ruler = no
		#
		# 			NOR = {
		# 				trait = decadent
		# 				character = ROOT
		# 			}
		# 		}
		#
		# 		opinion = {
		# 			name = opinion_takfir
		# 			who = event_target:takfir_target
		# 			years = 20
		# 		}
		#
		# 		character_event = {
		# 			id = 91369 # Inform players
		# 			days = 1
		# 		}
		# 	}
		# }

		ai_chance = { factor = 4 }
	}

	option = {
		name = EVTOPTA91351 # Denounce

		opinion = {
			name = opinion_takfir
			who = FROM
			years = 20
		}

		hidden_effect = {
			any_dynasty_member = {
				limit = {
					is_playable = yes
					is_offmap_ruler = no

					NOR = {
						trait = decadent
						character = ROOT
					}
				}

				opinion = {
					name = opinion_takfir
					who = event_target:takfir_target
					years = 20
				}

				character_event = {
					id = 91369 # Inform players
					days = 1
				}
			}
		}

		ai_chance = { factor = 5 }
	}
}

# The decadent character justifies his decadence
character_event = {
	id = 91373
	desc = EVTDESC91373
	picture = GFX_evt_library

	is_triggered_only = yes

	option = {
		name = EVTOPTA91373 # Accept

		piety = 100

		# hidden_effect = {
		# 	any_dynasty_member = {
		# 		limit = {
		# 			is_playable = yes
		# 			is_offmap_ruler = no
		#
		# 			NOR = {
		# 				trait = decadent
		# 				character = ROOT
		# 			}
		# 		}
		#
		# 		opinion = {
		# 			name = opinion_takfir
		# 			who = event_target:takfir_target
		# 			years = 20
		# 		}
		#
		# 		character_event = {
		# 			id = 91369 # Inform players
		# 			days = 1
		# 		}
		# 	}
		# }

		ai_chance = { factor = 4 }
	}

	option = {
		name = EVTOPTA91351 # Denounce

		opinion = {
			name = opinion_takfir
			who = FROM
			years = 20
		}

		hidden_effect = {
			any_dynasty_member = {
				limit = {
					is_playable = yes
					is_offmap_ruler = no

					NOR = {
						trait = decadent
						character = ROOT
					}
				}

				opinion = {
					name = opinion_takfir
					who = event_target:takfir_target
					years = 20
				}

				character_event = {
					id = 91369 # Inform players
					days = 1
				}
			}
		}

		ai_chance = { factor = 5 }
	}
}

# The decadent character seduces the spouse of the dynasty head
character_event = {
	id = 91374
	desc = EVTDESC91374
	picture = GFX_evt_lovers

	is_triggered_only = yes

	option = {
		name = EVTOPTA91374 # Spouse falls for the decadent character

		# add_lover = FROM

		FROMFROM = {
			show_scope_change = no

			character_event = {
				id = 91375 # Ask spouse to let your lover be
				days = 1
				tooltip = EVTTOOLTIP91374A
			}
		}

		ai_chance = {
			factor = 3

			trigger = {
				NOT = { trait = celibate }
			}

			mult_modifier = {
				factor = 2

				opinion = {
					who = spouse
					value < 0
				}
			}
		}
	}

	option = {
		name = EVTOPTB91374 # Spouse sees through the decadent character

		opinion = {
			name = opinion_used
			who = FROM
			years = 20
		}

		FROMFROM = {
			show_scope_change = no

			character_event = {
				id = 91376 # Tell spouse of the decadent character's plans
				days = 1
				tooltip = EVTTOOLTIP91374B
			}
		}

		ai_chance = { factor = 5 }
	}
}

# Dynasty head is asked by wife to leave decadent character alone
character_event = {
	id = 91375
	desc = EVTDESC91375
	picture = GFX_evt_quarrel

	is_triggered_only = yes

	option = {
		name = EVTOPTA91373 # Accept

		reverse_opinion = {
			name = opinion_pleased
			who = FROM
			years = 20
		}

		# hidden_effect = {
		# 	any_dynasty_member = {
		# 		limit = {
		# 			is_playable = yes
		# 			is_offmap_ruler = no
		#
		# 			NOR = {
		# 				trait = decadent
		# 				character = ROOT
		# 			}
		# 		}
		#
		# 		opinion = {
		# 			name = opinion_takfir
		# 			who = event_target:takfir_target
		# 			years = 20
		# 		}
		#
		# 		character_event = {
		# 			id = 91369 # Inform players
		# 			days = 1
		# 		}
		# 	}
		# }

		ai_chance = { factor = 4 }
	}

	option = {
		name = EVTOPTA91351 # Denounce

		reverse_opinion = {
			name = opinion_very_disappointed
			who = FROM
			years = 20
		}

		opinion = {
			name = opinion_takfir
			who = FROMFROM
			years = 20
		}

		hidden_effect = {
			any_dynasty_member = {
				limit = {
					is_playable = yes
					is_offmap_ruler = no

					NOR = {
						trait = decadent
						character = ROOT
					}
				}

				opinion = {
					name = opinion_takfir
					who = event_target:takfir_target
					years = 20
				}

				character_event = {
					id = 91369 # Inform players
					days = 1
				}
			}
		}

		ai_chance = { factor = 5 }
	}
}

# Dynasty head is informed about decadent character's attempt to seduce your spouse
character_event = {
	id = 91376
	desc = EVTDESC91376
	picture = GFX_evt_lovers

	is_triggered_only = yes

	option = {
		name = EVTOPTA91351 # Denounce

		opinion = {
			name = opinion_takfir
			who = FROMFROM
			years = 20
		}

		opinion = {
			name = honest_pos
			who = FROM
			years = 20
		}

		hidden_effect = {
			any_dynasty_member = {
				limit = {
					is_playable = yes
					uses_decadence = yes
					is_offmap_ruler = no

					NOR = {
						trait = decadent
						character = ROOT
					}
				}

				opinion = {
					name = opinion_takfir
					who = event_target:takfir_target
					years = 20
				}

				character_event = {
					id = 91369 # Inform players
					days = 1
				}
			}
		}

		ai_chance = { factor = 5 }
	}
}

# Spouse notified of divorce due to husband going off to join holy order
character_event = {
	id = 91377
	desc = EVTDESC_91377
	picture = GFX_evt_melee
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = {
			text = ALAS
			trigger = {
				opinion = {
					who = FROM
					value >= 0
				}
			}
		}
		name = {
			text = GOOD_RIDDANCE
			trigger = {
				opinion = {
					who = FROM
					value < 0
				}
			}
		}

		tooltip = {
			remove_spouse = FROM
		}
	}
}

# Decadent character notified that he is forced through favor
character_event = {
	id = 91378
	desc = EVTDESC_91378
	picture = GFX_evt_council
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA91378

		remove_trait = decadent

		tooltip = {
			reverse_remove_favor = FROM
		}

		FROM = {
			character_event = {
				id = 91379
				days = 5
			}
		}
	}
}


# Confirmation for favor holder that decadent character shaped up
character_event = {
	id = 91379
	desc = EVTDESC_91379
	picture = GFX_evt_council
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA91379

		tooltip = {
			FROM = {
				show_scope_change = no

				remove_trait = decadent
			}
		}

		opinion = {
			name = opinion_straightened_up
			who = FROM
			years = 10
		}
	}
}