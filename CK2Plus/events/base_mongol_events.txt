###################################
#
# Mongol Horde Events
#
# Id 60000 - 61000 is reserved
# Events revamped by Rylock
#
###################################

# Rumors of a Steppe Menace
# narrative_event = {
#	id = 60000
#	title = EVTNAME60000
#	desc = EVTDESC60000
#	picture = GFX_evt_mongols
#	border = GFX_event_narrative_frame_war
#
#	major = yes
#
#	only_playable = yes
#
#	trigger = {
#		always = no # replaced by new mongol arrival event
#		any_demesne_province = { has_flag = pulse_province }
#		year >= 1215
#
#		NOR = {
#			has_global_flag = mongol_horde_rumors
#			has_global_flag = il_khanate_arrival
#			has_global_flag = golden_horde_arrival
#		}
#	}
#
#	mean_time_to_happen = {
#		months = 1
#	}
#
#	immediate = {
#		set_global_flag = mongol_horde_rumors
#
#		activate_title = {
#			title = e_il-khanate
#			status = yes
#		}
#
#		create_random_soldier = {
#			random_traits = no
#			dynasty = 101916 # Toluid
#			name = "Hulegu"
#			culture = mongol
#			religion = tengri_pagan
#			age = 30
#			health = 6
#			fertility = 0.7
#
#			attributes = {
#				martial = 8
#				diplomacy = 4
#				stewardship = 5
#				intrigue = 4
#				learning = 3
#			}
#
#			add_trait = brilliant_strategist
#			add_trait = wroth
#			add_trait = cruel
#			add_trait = proud
#			add_trait = zealous
#		}
#
#		new_character = {
#			grant_title = e_il-khanate
#			set_defacto_liege = THIS
#		}
#
#		activate_title = {
#			title = e_golden_horde
#			status = yes
#		}
#
#		create_random_soldier = {
#			random_traits = no
#			dynasty = 7379 # Jochid
#			name = "Batu"
#			culture = mongol
#			religion = tengri_pagan
#			age = 33
#			health = 6
#			fertility = 0.7
#
#			attributes = {
#				martial = 9
#				diplomacy = 5
#				stewardship = 8
#				intrigue = 7
#				learning = 3
#			}
#
#			add_trait = brilliant_strategist
#			add_trait = diligent
#			add_trait = humble
#			add_trait = gregarious
#			add_trait = just
#		}
#
#		new_character = {
#			grant_title = e_golden_horde
#			set_defacto_liege = THIS
#		}
#
#		any_player = {
#			chronicle = {
#				entry = CHRONICLE_MONGOL_RUMORS
#				portrait = [New.GetID]
#			}
#		}
#	}
#
#	option = {
#		name = EVTOPTA60000
#	}
# }

# Arrival of the Ilkhanate
# narrative_event = {
#	id = 60001
#	title = EVTNAME60001
#	desc = EVTDESC60001
#	picture = GFX_evt_mongols
#	border = GFX_event_narrative_frame_war
#
#	major = yes
#	hide_new = yes
#
#	only_playable = yes
#
#	trigger = {
#		always = no # replaced by new mongol arrival event
#		has_landed_title = e_il-khanate
#		year >= 1216
#		year < 1224
#		NOT = { has_global_flag = il_khanate_arrival }
#	}
#
#	mean_time_to_happen = {
#		months = 24
#	}
#
#	option = {
#		name = OK
#
#		trigger = { has_landed_title = e_il-khanate }
#
#		set_global_flag = il_khanate_arrival
#
#		1423 = { # Fergana
#			kingdom = {
#				ROOT = {
#					war = {
#						casus_belli = tribal_invasion
#						target = PREVPREV # The top liege of the owner
#						thirdparty_title = PREV # The de jure kingdom
#					}
#				}
#			}
#		}
#
#		wealth = 5000
#
#		while = {
#			count = 9
#
#			spawn_unit = {
#				province = 1423 # Fergana
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 30
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { add_age = 0 }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#				}
#			}
#		}
#
#		while = {
#			count = 9
#
#			spawn_unit = {
#				province = 1181 # Oshrusana
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 30
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { add_age = 0 }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#				}
#			}
#		}
#
#		while = {
#			count = 2
#
#			random = {
#				chance = 50
#
#				while = {
#					count = 3
#
#					spawn_unit = {
#						province = 903 # Samarkand
#
#						troops = {
#							horse_archers = { 2700 2700 }
#							light_cavalry = { 1600 1600 }
#							light_infantry = { 541 541 }
#							heavy_infantry = { 210 210 }
#							knights = { 47 47 }
#						}
#					}
#
#					create_character = {
#						random_traits = yes
#						dynasty = random
#						religion = tengri_pagan
#						culture = ROOT
#						female = no
#						age = 30
#
#						attributes = {
#							martial = 12
#						}
#
#						add_trait = brilliant_strategist
#					}
#
#					new_character = {
#						random_list = {
#							1 = { add_age = 0 }
#							1 = { add_age = 1 }
#							1 = { add_age = 2 }
#							1 = { add_age = 3 }
#							1 = { add_age = 4 }
#							1 = { add_age = 5 }
#							1 = { add_age = 6 }
#							1 = { add_age = 7 }
#							1 = { add_age = 8 }
#							1 = { add_age = 9 }
#						}
#					}
#				}
#			}
#		}
#
#		# Some extra courtiers
#
#		while = {
#			count = 7
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 16
#			}
#
#			new_character = {
#				random_list = {
#					1 = { add_age = 0 }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#					1 = { add_age = 10 }
#					1 = { add_age = 11 }
#					1 = { add_age = 12 }
#				}
#			}
#		}
#
#		while = {
#			count = 5
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = yes
#				age = 16
#			}
#
#			new_character = {
#				random_list = {
#					1 = { add_age = 0 }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#				}
#			}
#		}
#	}
#
#	option = {
#		name = EVTOPTB60001
#
#		trigger = {
#			religion_group = muslim
#			NOT = { has_landed_title = e_il-khanate }
#		}
#	}
#
#	option = {
#		name = EVTOPTC60001
#
#		trigger = {
#			religion_group = christian
#			NOT = { has_landed_title = e_il-khanate }
#		}
#	}
#
#	option = {
#		name = EVTOPTD60001
#
#		trigger = {
#			NOR = {
#				religion_group = christian
#				religion_group = muslim
#				has_landed_title = e_il-khanate
#			}
#		}
#	}
# }

# Arrival of the Golden Horde
# narrative_event = {
#	id = 60002
#	title = EVTNAME60002
#	desc = EVTDESC60002
#	picture = GFX_evt_mongols
#	border = GFX_event_narrative_frame_war
#
#	major = yes
#	hide_new = yes
#
#	only_playable = yes
#
#	trigger = {
#		always = no # replaced by new mongol arrival event
#		has_landed_title = e_golden_horde
#		year >= 1224
#		year < 1250
#		has_global_flag = il_khanate_arrival
#		NOT = { has_global_flag = golden_horde_arrival }
#	}
#
#	mean_time_to_happen = {
#		months = 120
#
#		mult_modifier = {
#			factor = 0.5
#			year >= 1235
#		}
#
#		mult_modifier = {
#			factor = 0.5
#			year >= 1240
#		}
#	}
#
#	option = {
#		name = OK
#
#		trigger = { has_landed_title = e_golden_horde }
#
#		set_global_flag = golden_horde_arrival
#
#		# Declare war on a fitting kingdom
#		any_province = {
#			limit = {
#				OR = {
#					province = 1425 # Ili
#					province = 1427 # Ayakoz (c_urzhar)
#					province = 1132 # Irysh (c_kirghiz)
#					province = 1329 # Anuy (c_ket)
#					province = 1205 # Narim
#					province = 1306 # Tura
#				}
#			}
#
#			score_value = {
#				value = 1
#
#				additive_modifier = {
#					value = 1000
#					province = 1425 # Ili
#				}
#
#				additive_modifier = {
#					value = 900
#					province = 1427 # Ayakoz (c_urzhar)
#				}
#
#				additive_modifier = {
#					value = 800
#					province = 1132 # Irysh (c_kirghiz)
#				}
#
#				additive_modifier = {
#					value = 700
#					province = 1329 # Anuy (c_ket)
#				}
#
#				additive_modifier = {
#					value = 600
#					province = 1205 # Narim
#				}
#
#				additive_modifier = {
#					value = 500
#					province = 1306 # Tura
#				}
#
#				# Not if controlled by Il-Khanate, with a fallback on 1427/Ili
#				additive_modifier = {
#					value = -2000
#
#					# If owned by Il-Khanate
#					owner = {
#						realm = {
#							title = e_il-khanate
#						}
#					}
#
#					# Only invalidate Ili
#					trigger_if = {
#						limit = { province = 1425 }
#
#						# if another potential province is not held by Il-Khanate
#						any_province = {
#							OR = {
#								province = 1427 # Ayakoz (c_urzhar)
#								province = 1132 # Irysh (c_kirghiz)
#								province = 1329 # Anuy (c_ket)
#								province = 1205 # Narim
#								province = 1306 # Tura
#							}
#
#							# is not held by Il-Khanate
#							owner = {
#								realm = {
#									NOT = { title = e_il-khanate }
#								}
#							}
#						}
#					}
#				}
#			}
#
#			kingdom = {
#				ROOT = {
#					war = {
#						casus_belli = tribal_invasion
#						target = PREVPREV # The top liege of the owner of the province
#						thirdparty_title = PREV # The de jure kingdom
#					}
#				}
#			}
#		}
#
#		wealth = 5000
#
#		while = {
#			count = 9
#
#			spawn_unit = {
#				province = 1425 # Ili
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 30
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { add_age = 0 }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#				}
#			}
#		}
#
#		while = {
#			count = 6
#
#			spawn_unit = {
#				province = 1427 # Urzhar
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 30
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { add_age = 0 }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#				}
#			}
#		}
#
#		while = {
#			count = 2
#
#			random = {
#				chance = 50
#
#				while = {
#					count = 3
#
#					spawn_unit = {
#						province = 1132 # Kirghiz
#
#						troops = {
#							horse_archers = { 2700 2700 }
#							light_cavalry = { 1600 1600 }
#							light_infantry = { 541 541 }
#							heavy_infantry = { 210 210 }
#							knights = { 47 47 }
#						}
#					}
#
#					create_character = {
#						random_traits = yes
#						dynasty = random
#						religion = tengri_pagan
#						culture = ROOT
#						female = no
#						age = 30
#
#						attributes = {
#							martial = 12
#						}
#
#						add_trait = brilliant_strategist
#					}
#
#					new_character = {
#						random_list = {
#							1 = { add_age 0 }
#							1 = { add_age 1 }
#							1 = { add_age 2 }
#							1 = { add_age 3 }
#							1 = { add_age 4 }
#							1 = { add_age 5 }
#							1 = { add_age 6 }
#							1 = { add_age 7 }
#							1 = { add_age 8 }
#							1 = { add_age 9 }
#						}
#					}
#				}
#			}
#		}
#
#		# Some extra courtiers
#
#		while = {
#			count = 7
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 16
#			}
#
#			new_character = {
#				random_list = {
#					1 = { add_age = 0 }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#					1 = { add_age = 10 }
#					1 = { add_age = 11 }
#					1 = { add_age = 12 }
#				}
#			}
#		}
#
#		while = {
#			count = 5
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = yes
#				age = 16
#			}
#
#			new_character = {
#				random_list = {
#					1 = { add_age = 0 }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#				}
#			}
#		}
#	}
#
#	option = {
#		name = EVTOPTB60002
#
#		trigger = {
#			religion_group = christian
#			NOT = { has_landed_title = e_golden_horde }
#		}
#	}
#
#	option = {
#		name = EVTOPTC60002
#
#		trigger = {
#			religion_group = muslim
#			NOT = { has_landed_title = e_golden_horde }
#		}
#	}
#
#	option = {
#		name = EVTOPTD60002
#
#		trigger = {
#			NOR = {
#				religion_group = christian
#				religion_group = muslim
#				has_landed_title = e_golden_horde
#			}
#		}
#	}
# }

# Ilkhanate reinforcements
# character_event = {
#	id = 60004
#	desc = EVTDESC60004
#	picture = GFX_evt_mongols
#	border = GFX_event_normal_frame_war
#
#	only_playable = yes
#
#	trigger = {
#		always = no # replaced by new mongol arrival event
#		has_landed_title = e_il-khanate
#		year < 1300
#		NOT = { has_character_flag = ilkhanate_reinf }
#
#		had_global_flag = {
#			flag = il_khanate_arrival
#			years >= 10
#		}
#
#		e_il-khanate = {
#			holder_scope = {
#				culture = mongol
#				religion = tengri_pagan
#
#				OR = {
#					war = yes
#					is_landed = yes
#				}
#			}
#		}
#	}
#
#	mean_time_to_happen = {
#		months = 1
#	}
#
#	option = {
#		name = OK
#
#		set_character_flag = ilkhanate_reinf
#
#		while = {
#			count = 3
#
#			spawn_unit = {
#				province = 1423 # Fergana
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 25
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { add_age = 0 }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#				}
#			}
#		}
#
#		random = {
#			chance = 50
#
#			while = {
#				count = 3
#
#				spawn_unit = {
#					province = 1423 # Fergana
#
#					troops = {
#						horse_archers = { 2700 2700 }
#						light_cavalry = { 1600 1600 }
#						light_infantry = { 541 541 }
#						heavy_infantry = { 210 210 }
#						knights = { 47 47 }
#					}
#				}
#
#				create_character = {
#					random_traits = yes
#					dynasty = random
#					religion = tengri_pagan
#					culture = ROOT
#					female = no
#					age = 25
#
#					attributes = {
#						martial = 12
#					}
#
#					add_trait = brilliant_strategist
#				}
#
#				new_character = {
#					random_list = {
#						1 = { add_age = 0 }
#						1 = { add_age = 1 }
#						1 = { add_age = 2 }
#					}
#				}
#			}
#		}
#	}
# }

# Golden Horde reinforcements
# character_event = {
#	id = 60005
#	desc = EVTDESC60004
#
#	picture = GFX_evt_mongols
#	border = GFX_event_normal_frame_war
#
#	only_playable = yes
#
#	trigger = {
#		always = no # replaced by new mongol arrival event
#		has_landed_title = e_golden_horde
#		year < 1320
#		NOT = { has_character_flag = golden_horde_reinf }
#
#		had_global_flag = {
#			flag = golden_horde_arrival
#			years >= 10
#		}
#
#		e_golden_horde = {
#			holder_scope = {
#				culture = mongol
#				religion = tengri_pagan
#
#				OR = {
#					war = yes
#					is_landed = yes
#				}
#			}
#		}
#	}
#
#	mean_time_to_happen = {
#		months = 1
#	}
#
#	option = {
#		name = OK
#
#		set_character_flag = golden_horde_reinf
#
#		while = {
#			count = 3
#
#			spawn_unit = {
#				province = 1425 # Ili
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 30
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { add_age = 0 }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#				}
#			}
#		}
#	}
# }

### The Hordes Convert ###

# Horde converts to Catholic
character_event = {
	id = 60010
	title = EVTNAME60010
	desc = EVTDESC60010
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	major = yes

	only_independent = yes
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				primary_title = {
					title = e_il-khanate
				}
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years >= 40
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years < 80
			}

			NOT = { has_global_flag = il_khanate_converts }
		}
		trigger_else_if = {
			limit = {
				primary_title = {
					title = e_golden_horde
				}
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years >= 40
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years < 80
			}

			NOT = { has_global_flag = golden_horde_converts }
		}
		trigger_else = {
			primary_title = {
				title = e_chagatai
			}

			had_global_flag = {
				flag = chagatai_arrival
				years >= 40
			}

			had_global_flag = {
				flag = chagatai_arrival
				years < 80
			}

			NOT = { has_global_flag = chagatai_converts }
		}

		religion = tengri_pagan
		NOT = { trait = zealous }

		any_realm_province = {
			religion = catholic
		}
	}

	major_trigger = {
		ai = no
	}

	mean_time_to_happen = {
		months = 1440

		mult_modifier = {
			factor = 0.75

			capital_scope = {
				religion = catholic
			}
		}
	}

	immediate = {
		primary_title = {
			trigger_switch = {
				on_trigger = title

				e_il-khanate = { set_global_flag = il_khanate_converts }
				e_golden_horde = { set_global_flag = golden_horde_converts }
				e_chagatai = { set_global_flag = chagatai_converts }
			}
		}
	}

	option = { # Catholic
		name = EVTOPTA60010

		trigger = { character = ROOT }

		religion = catholic

		capital_scope = {
			show_scope_change = no

			religion = catholic
		}

		any_realm_character = {
			show_scope_change = no

			limit = { religion = tengri_pagan }

			religion = catholic

			if = {
				limit = {
					is_playable = yes

					capital_scope = {
						religion = tengri_pagan
					}
				}

				capital_scope = {
					show_scope_change = no

					religion = catholic
				}
			}
		}
	}

	# Other rulers are informed
	option = {
		name = EVTOPTB60010

		trigger = {
			religion_group = muslim
			NOT = { character = ROOT }
		}
	}

	option = {
		name = EXCELLENT

		trigger = {
			religion_group = christian
			NOT = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTD60010

		trigger = {
			NOR = {
				religion_group = christian
				religion_group = muslim
				character = ROOT
			}
		}
	}
}

# Horde converts to Orthodox
character_event = {
	id = 60011
	title = EVTNAME60010
	desc = EVTDESC60011
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_religion

	major = yes

	only_independent = yes
	only_capable = yes
	min_age = 16
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				primary_title = {
					title = e_il-khanate
				}
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years >= 40
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years < 80
			}

			NOT = { has_global_flag = il_khanate_converts }
		}
		trigger_else_if = {
			limit = {
				primary_title = {
					title = e_golden_horde
				}
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years >= 40
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years < 80
			}

			NOT = { has_global_flag = golden_horde_converts }
		}
		trigger_else = {
			primary_title = {
				title = e_chagatai
			}

			had_global_flag = {
				flag = chagatai_arrival
				years >= 40
			}

			had_global_flag = {
				flag = chagatai_arrival
				years < 80
			}

			NOT = { has_global_flag = chagatai_converts }
		}

		religion = tengri_pagan
		NOT = { trait = zealous }

		any_realm_province = {
			religion = orthodox
		}
	}

	major_trigger = {
		ai = no
	}

	mean_time_to_happen = {
		months = 960

		modifier = {
			factor = 0.75

			capital_scope = {
				religion = orthodox
			}
		}
	}

	immediate = {
		primary_title = {
			trigger_switch = {
				on_trigger = title

				e_il-khanate = { set_global_flag = il_khanate_converts }
				e_golden_horde = { set_global_flag = golden_horde_converts }
				e_chagatai = { set_global_flag = chagatai_converts }
			}
		}
	}

	option = { # Orthodox
		name = EVTOPTA60010

		trigger = { character = ROOT }

		religion = orthodox

		capital_scope = {
			show_scope_change = no

			religion = orthodox
		}

		any_realm_character = {
			show_scope_change = no

			limit = { religion = tengri_pagan }

			religion = orthodox

			if = {
				limit = {
					is_playable = yes

					capital_scope = {
						religion = tengri_pagan
					}
				}

				capital_scope = {
					show_scope_change = no

					religion = orthodox
				}
			}
		}
	}

	# Other rulers are informed
	option = {
		name = EVTOPTB60010

		trigger = {
			religion_group = muslim
			NOT = { character = ROOT }
		}
	}

	option = {
		name = EXCELLENT

		trigger = {
			religion_group = christian
			NOT = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTD60010

		trigger = {
			NOR = {
				religion_group = christian
				religion_group = muslim
				character = ROOT
			}
		}
	}
}

# Horde converts to Sunni
character_event = {
	id = 60012
	title = EVTNAME60010
	desc = EVTDESC60012
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_religion

	major = yes

	only_independent = yes
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				primary_title = {
					title = e_il-khanate
				}
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years >= 40
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years < 80
			}

			NOT = { has_global_flag = il_khanate_converts }
		}
		trigger_else_if = {
			limit = {
				primary_title = {
					title = e_golden_horde
				}
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years >= 40
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years < 80
			}

			NOT = { has_global_flag = golden_horde_converts }
		}
		trigger_else = {
			primary_title = {
				title = e_chagatai
			}

			had_global_flag = {
				flag = chagatai_arrival
				years >= 40
			}

			had_global_flag = {
				flag = chagatai_arrival
				years < 80
			}

			NOT = { has_global_flag = chagatai_converts }
		}

		religion = tengri_pagan
		NOT = { trait = zealous }

		any_realm_province = {
			religion = sunni
		}
	}

	major_trigger = {
		ai = no
	}

	mean_time_to_happen = {
		months = 420

		mult_modifier = {
			factor = 0.75

			capital_scope = {
				religion = sunni
			}
		}
	}

	immediate = {
		primary_title = {
			trigger_switch = {
				on_trigger = title

				e_il-khanate = { set_global_flag = il_khanate_converts }
				e_golden_horde = { set_global_flag = golden_horde_converts }
				e_chagatai = { set_global_flag = chagatai_converts }
			}
		}
	}

	option = { # Sunni
		name = EVTOPTA60010

		trigger = { character = ROOT }

		religion = sunni

		capital_scope = {
			show_scope_change = no

			religion = sunni
		}

		any_realm_character = {
			show_scope_change = no

			limit = { religion = tengri_pagan }

			religion = sunni

			if = {
				limit = {
					is_playable = yes

					capital_scope = {
						religion = tengri_pagan
					}
				}

				capital_scope = {
					show_scope_change = no

					religion = sunni
				}
			}
		}
	}

	# Other rulers are informed
	option = {
		name = EXCELLENT

		trigger = {
			religion_group = muslim
			NOT = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTC60010

		trigger = {
			religion_group = christian
			NOT = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTD60010

		trigger = {
			NOR = {
				religion_group = christian
				religion_group = muslim
				character = ROOT
			}
		}
	}
}

# Horde converts to Shiite
character_event = {
	id = 60013
	title = EVTNAME60010
	desc = EVTDESC60013
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_religion

	major = yes

	only_independent = yes
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				primary_title = {
					title = e_il-khanate
				}
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years >= 40
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years < 80
			}

			NOT = { has_global_flag = il_khanate_converts }
		}
		trigger_else_if = {
			limit = {
				primary_title = {
					title = e_golden_horde
				}
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years >= 40
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years < 80
			}

			NOT = { has_global_flag = golden_horde_converts }
		}
		trigger_else = {
			primary_title = {
				title = e_chagatai
			}

			had_global_flag = {
				flag = chagatai_arrival
				years >= 40
			}

			had_global_flag = {
				flag = chagatai_arrival
				years < 80
			}

			NOT = { has_global_flag = chagatai_converts }
		}

		religion = tengri_pagan
		NOT = { trait = zealous }

		any_realm_province = {
			religion = shiite
		}
	}

	major_trigger = {
		ai = no
	}

	mean_time_to_happen = {
		months = 420

		mult_modifier = {
			factor = 0.75

			capital_scope = {
				religion = shiite
			}
		}
	}

	immediate = {
		primary_title = {
			trigger_switch = {
				on_trigger = title

				e_il-khanate = { set_global_flag = il_khanate_converts }
				e_golden_horde = { set_global_flag = golden_horde_converts }
				e_chagatai = { set_global_flag = chagatai_converts }
			}
		}
	}

	option = { # Shiite
		name = EVTOPTA60010

		trigger = { character = ROOT }

		religion = shiite

		capital_scope = {
			show_scope_change = no

			religion = shiite
		}

		any_realm_character = {
			show_scope_change = no

			limit = { religion = tengri_pagan }

			religion = shiite

			if = {
				limit = {
					is_playable = yes

					capital_scope = {
						religion = tengri_pagan
					}
				}

				capital_scope = {
					show_scope_change = no

					religion = shiite
				}
			}
		}
	}

	# Other rulers are informed
	option = {
		name = EXCELLENT

		trigger = {
			religion_group = muslim
			NOT = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTC60010

		trigger = {
			religion_group = christian
			NOT = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTD60010

		trigger = {
			NOR = {
				religion_group = christian
				religion_group = muslim
				character = ROOT
			}
		}
	}
}

# Horde converts to Nestorian
character_event = {
	id = 60014
	title = EVTNAME60010
	desc = EVTDESC60014
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	major = yes

	only_independent = yes
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				primary_title = {
					title = e_il-khanate
				}
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years >= 40
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years < 80
			}

			NOT = { has_global_flag = il_khanate_converts }
		}
		trigger_else_if = {
			limit = {
				primary_title = {
					title = e_golden_horde
				}
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years >= 40
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years < 80
			}

			NOT = { has_global_flag = golden_horde_converts }
		}
		trigger_else = {
			primary_title = {
				title = e_chagatai
			}

			had_global_flag = {
				flag = chagatai_arrival
				years >= 40
			}

			had_global_flag = {
				flag = chagatai_arrival
				years < 80
			}

			NOT = { has_global_flag = chagatai_converts }
		}

		religion = tengri_pagan
		num_of_count_titles_in_realm >= 1
		NOT = { trait = zealous }
	}

	major_trigger = {
		ai = no
	}

	mean_time_to_happen = {
		months = 420

		mult_modifier = {
			factor = 0.75

			capital_scope = {
				religion = nestorian
			}
		}
	}

	immediate = {
		primary_title = {
			trigger_switch = {
				on_trigger = title

				e_il-khanate = { set_global_flag = il_khanate_converts }
				e_golden_horde = { set_global_flag = golden_horde_converts }
				e_chagatai = { set_global_flag = chagatai_converts }
			}
		}
	}

	option = {	# Nestorian
		name = EVTOPTA60010

		trigger = { character = ROOT }

		religion = nestorian

		capital_scope = {
			show_scope_change = no

			religion = nestorian
		}

		any_realm_character = {
			show_scope_change = no

			limit = { religion = tengri_pagan }

			religion = nestorian

			if = {
				limit = {
					is_playable = yes

					capital_scope = {
						religion = tengri_pagan
					}
				}

				capital_scope = {
					show_scope_change = no

					religion = nestorian
				}
			}
		}
	}

	# Other rulers are informed
	option = {
		name = EVTOPTB60010

		trigger = {
			religion_group = muslim
			NOT = { character = ROOT }
		}
	}

	option = {
		name = EXCELLENT

		trigger = {
			religion_group = christian
			NOT = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTD60010

		trigger = {
			NOR = {
				religion_group = christian
				religion_group = muslim
				character = ROOT
			}
		}
	}
}

### Mongols sack European cities ###

# Mongols sack Kiev
narrative_event = {
	id = 60100
	title = EVTNAME_TOG_001
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60100
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_001
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_kiev

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_kiev }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_kiev
	}

	option = {
		name = EVTOPTA60100

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60100

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Novgorod
narrative_event = {
	id = 60101
	title = EVTNAME_TOG_002
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60101
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_002
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_novgorod

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_novgorod }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_novgorod
	}

	option = {
		name = EVTOPTA60101 # Perhaps their bloodlust has been sated now
		trigger = { NOT = { culture = mongol } }
	}

	option = {
		name = EVTOPTB60101 # May the snows of the frozen north claim them
		trigger = { culture = mongol }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Krakow
narrative_event = {
	id = 60102
	title = EVTNAME_TOG_003
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60102
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_003
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_krakow

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_krakow }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_krakow
	}

	option = {
		name = EVTOPTA60102

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60102

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Aachen
narrative_event = {
	id = 60103
	title = EVTNAME_TOG_004
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60103
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_004
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_aachen

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_aachen }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_aachen
	}

	option = {
		name = EVTOPTA60103

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60103

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Paris
narrative_event = {
	id = 60104
	title = EVTNAME_TOG_005
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60104
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_005
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_paris

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_paris }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_paris
	}

	option = {
		name = EVTOPTA60104

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60104

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack London
narrative_event = {
	id = 60105
	title = EVTNAME_TOG_006
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60105
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_006
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_london

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_london }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_london
	}

	option = {
		name = EVTOPTA60106

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60106

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Rome
narrative_event = {
	id = 60106
	title = EVTNAME_TOG_007
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60106
		picture = GFX_evt_rome_falls
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_007
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_roma

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_rome }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_rome
	}

	option = {
		name = EVTOPTA60106

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60106

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Venice
narrative_event = {
	id = 60107
	title = EVTNAME_TOG_008
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60107
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_008
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_venezia

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_venice }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_venice
	}

	option = {
		name = EVTOPTA60107

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60107

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Constantinople
narrative_event = {
	id = 60108
	title = EVTNAME_TOG_009
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60108
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_009
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_constantinople

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_constantinople }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_constantinople
	}

	option = {
		name = EVTOPTA60108

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60108

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Lisbon
narrative_event = {
	id = 60109
	title = EVTNAME_TOG_010
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60109
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_010
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_lisboa

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_lisbon }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_lisbon
	}

	option = {
		name = EVTOPTA60109

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60109

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Smolensk
narrative_event = {
	id = 60110
	title = EVTNAME_TOG_011
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { NOT = { is_mongol_empire_leader_trigger = yes } }
		text = EVTDESC60110
		picture = GFX_evt_mongols
	}
	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_011
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_smolensk

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_smolensk }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_smolensk
	}

	option = {
		name = EVTOPTA60110

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60110

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Prague
narrative_event = {
	id = 60111
	title = EVTNAME_TOG_012
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60111
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_012
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_praha

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_prague }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_prague
	}

	option = {
		name = EVTOPTA60111

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60111

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Vienna
narrative_event = {
	id = 60112
	title = EVTNAME_TOG_013
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60112
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_013
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_wien

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_vienna }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_vienna
	}

	option = {
		name = EVTOPTA60112

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60112

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Esztergom
narrative_event = {
	id = 60113
	title = EVTNAME_TOG_014
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60113
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_014
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_esztergom

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_esztergom }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_esztergom
	}

	option = {
		name = EVTOPTA60113

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = INTERESTING

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Athens
narrative_event = {
	id = 60114
	title = EVTNAME_TOG_015
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60114
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_015
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_athens

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_athens }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_athens
	}

	option = {
		name = EVTOPTA60114

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = UNFORTUNATE

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Belgrade
narrative_event = {
	id = 60115
	title = EVTNAME_TOG_016
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60115
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_016
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_belgrade

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_belgrade }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_belgrade
	}

	option = {
		name = EVTOPTA60115

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60115

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

### Mongols sack Middle Eastern cities ###

# Mongols sack Baghdad
narrative_event = {
	id = 60116
	title = EVTNAME_TOG_017
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60116
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_017
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_bagdad

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_baghdad }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_baghdad
	}

	option = {
		name = EVTOPTA60116

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60116

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Damascus
narrative_event = {
	id = 60117
	title = EVTNAME_TOG_018
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60117
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_018
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_damascus

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_damascus }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_damascus
	}

	option = {
		name = EVTOPTA60117

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60117

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Jerusalem
narrative_event = {
	id = 60118
	title = EVTNAME_TOG_019
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60118
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_019
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_jerusalem

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes

		NOR = {
			has_global_flag = mongols_sack_jerusalem
			religion_group = muslim
			religion_group = christian
		}
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_jerusalem
	}

	option = {
		name = EVTOPTA60118

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60118

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Alexandria
narrative_event = {
	id = 60119
	title = EVTNAME_TOG_020
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60119
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_020
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_alexandria

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_alexandria }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_alexandria
	}

	option = {
		name = EVTOPTA60119

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60119

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Cairo
narrative_event = {
	id = 60120
	title = EVTNAME_TOG_021
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60120
		picture = GFX_evt_mongols
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_021
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_cairo

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_cairo }
	}

	major_trigger = {
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_cairo
	}

	option = {
		name = EVTOPTA60120

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTB60120

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Mecca
narrative_event = {
	id = 60121
	title = EVTNAME_TOG_022
	border = GFX_event_narrative_frame_war

	desc = {
		trigger = { is_mongol_empire_leader_trigger = no }
		text = EVTDESC60121
		picture = GFX_evt_mecca_falls_soa
	}

	desc = {
		trigger = { is_mongol_empire_leader_trigger = yes }
		text = EVTDESC_TOG_022
		picture = GFX_evt_mongols_pillage_oldgods
	}

	major = yes
	is_triggered_only = yes

	culture = mongol

	trigger = {
		FROM = {
			title = b_mecca

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes

		NOR = {
			religion_group = muslim
			has_global_flag = mongols_sack_mecca
		}
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_mecca
	}

	option = {
		name = EVTOPTB60121

		trigger = {
			NOT = { religion_group = muslim }
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA60121

		trigger = {
			religion_group = muslim
			is_mongol_empire_leader_trigger = no
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

##################################
# Rise of the Seljuks
##################################

# Seljuk distinguishes himself in a Turkish court
character_event = {
	id = 60200
	desc = EVTDESC60200
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	only_playable = yes
	war = no

	trigger = {
		is_landed = yes

		trigger_if = {
			limit = { has_dlc = "Horse Lords" }
			is_nomadic = yes
		}
		trigger_else = {
			is_tribal = yes
		}

		OR = {
			culture = turkish
			culture = cuman
			culture = uyghur
			culture = karluk
		}

		NOR = {
			has_game_rule = {
				name = turkic_invasions
				value = off
			}

			has_global_flag = seljuk_spawned
		}

		trigger_if = {
			limit = {
				has_game_rule = {
					name = turkic_invasions
					value = random
				}
			}

			year >= 809
			year < 1200
		}
		trigger_else = {
			year >= 980
			year < 1000
		}
	}

	mean_time_to_happen = {
		years = 2
	}

	immediate = {
		set_global_flag = seljuk_spawned

		create_character = {
			random_traits = no
			historical = yes
			dynasty = 613 # Seljuk
			name = "Seljuk"
			culture = turkish
			religion = ROOT
			age = 20
			health = 7
			fertility = 0.8

			attributes = {
				martial = 12
				diplomacy = 8
				stewardship = 5
				intrigue = 4
				learning = 3
			}

			add_trait = brilliant_strategist
			add_trait = wroth
			add_trait = cruel
			add_trait = proud
			add_trait = ambitious
		}

		new_character = {
			if = {
				limit = { has_dlc = "Holy Fury" }

				create_bloodline = {
					type = seljuk
				}
			}

			set_character_flag = is_special_character
			set_character_flag = seljuk_himself

			if = {
				limit = { religion = sunni }
				add_trait = zealous
			}
		}
	}

	option = { # A most capable young man
		name = EVTOPTA60200

		tooltip = {
			create_character = {
				name = "Seljuk"
			}
		}
	}
}

# Seljuk and his men consider starting an adventure
character_event = {
	id = 60201
	desc = EVTDESC60201
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	has_character_flag = seljuk_himself
	prisoner = no
	only_capable = yes
	war = no

	trigger = {
		trigger_if = {
			limit = { is_ruler = yes }

			trigger_if = {
				limit = { is_nomadic = yes }
				lower_real_tier_than = EMPEROR
			}
			trigger_else = {
				lower_real_tier_than = KING
			}
		}

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
			trait = content
			trait = craven
			trait = depressed
			trait = imbecile
			liege = { war = yes }
			has_character_flag = seljuk_started_adventure
		}

		any_independent_ruler = {
			OR = {
				completely_controls = c_merv
				completely_controls = c_dihistan
				completely_controls = c_tus
			}

			NOT = { same_realm = ROOT }
			war = no
			is_nomadic = no
			is_tributary = no
		}
	}

	mean_time_to_happen = {
		years = 5

		mult_modifier = {
			factor = 0.5
			practical_age >= 25
		}

		mult_modifier = {
			factor = 0.5
			practical_age >= 30
		}

		mult_modifier = {
			factor = 0.5
			practical_age >= 35
		}
	}

	immediate = {
		add_trait = adventurer
		set_character_flag = seljuk_started_adventure
	}

	option = { # Merv it is!
		name = EVTOPTA60201

		trigger = {
			c_merv = {
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 1000
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_merv = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = { # Tus
		name = EVTOPTB60201

		trigger = {
			c_tus = {
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 10000
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_tus = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = { # Dihistan
		name = EVTOPTC60201

		trigger = {
			c_dihistan = { # Dihistan
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 100
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_dihistan = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = {
		name = EVTOPTD60201 # I am fine where I am

		trigger = { ai = no }
	}

	after = {
		if = {
			limit = { is_ruler = yes }

			character_event = {
				id = 60204
				# days = 2
			}
		}
		else = {
			character_event = {
				id = 60203
				# days = 2
			}
		}
	}
}

# Ping the target province - removed

# The landless Seljuk and his men start an adventure
character_event = {
	id = 60203

	hide_window = yes
	is_triggered_only = yes

	prisoner = no
	only_capable = yes

	trigger = {
		is_alive = yes
		lower_tier_than = KING

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
		}
	}

	immediate = {
		wealth = 500
		prestige = 500

		any_liege = {
			character_event = {
				id = 60205
				days = 1
			}
		}

		liege = {
			capital_scope = {
				save_event_target_as = liege_capital
			}

			if = {
				limit = { is_nomadic = yes }

				ROOT = {
					set_character_flag = will_be_nomadic
				}
			}
		}

		event_target:target_province = {
			owner = {
				top_liege = {
					ROOT = {
						set_defacto_liege = ROOT

						create_title = {
							tier = DUKE
							landless = yes
							temporary = yes
							culture = ROOT
							name = CLAIMANT_ADVENTURE
							holder = ROOT
						}

						if = {
							limit = { has_character_flag = will_be_nomadic }
							clr_character_flag = will_be_nomadic
							set_government_type = nomadic_government
							population = 5000
						}
						else = {
							set_government_type = tribal_government
						}

						set_character_flag = duchy_adventurer

						spawn_unit = {
							province = event_target:liege_capital
							home = event_target:liege_capital
							owner = THIS

							troops = {
								horse_archers = { 2700 2700 }
								light_cavalry = { 1600 1600 }
								light_infantry = { 541 541 }
								heavy_infantry = { 210 210 }
								knights = { 47 47 }
							}

							attrition = 0.1
							cannot_inherit = yes
							maintenance_multiplier = 0
							earmark = seljuk_event_troops
						}

						while = {
							count = 5

							spawn_unit = {
								province = event_target:liege_capital
								home = event_target:liege_capital
								owner = THIS
								match_character = PREV
								match_mult = 0.33
								match_min = 500
								match_max = 10000
								attrition = 0.1
								disband_on_peace = yes
								maintenance_multiplier = 0
								earmark = seljuk_event_troops
							}
						}

						war = {
							target = PREV
							casus_belli = duchy_adventure
							thirdparty_title = event_target:target_province
							tier = DUKE
							infamy = 0
						}
					}
				}
			}
		}

		if = {
			limit = {
				NOT = { religion_group = muslim }
			}

			add_trait = zealous
			religion = sunni
		}

		# Create some characters
		while = {
			count = 3

			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 22
			}

			new_character = {
				random_list = {
					1 = { add_age = 0 }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
					1 = { add_age = 8 }
				}
			}

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = yes
				age = 16
			}

			new_character = {
				random_list = {
					1 = { add_age = 0 }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
				}
			}
		}

		log = "60203: Seljuk starts his first war as a landless character!"
	}
}

# The landed Seljuk and his men start an adventure
character_event = {
	id = 60204
	desc = EVTDESC60204
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { real_tier = BARON }

			abdicate = yes
			repeat_event = { id = 60203 }
		}
		else = {
			wealth = 500
			prestige = 500

			any_liege = {
				character_event = {
					id = 60205
					days = 1
				}
			}

			event_target:target_province = {
				owner = {
					top_liege = {
						ROOT = {
							if = {
								limit = { lower_real_tier_than = COUNT }

								create_title = {
									tier = DUKE
									landless = yes
									temporary = yes
									culture = ROOT
									name = CLAIMANT_ADVENTURE
									holder = ROOT
								}
							}

							if = {
								limit = { is_nomadic = yes }
								population = 5000
							}

							set_character_flag = duchy_adventurer

							spawn_unit = {
								province = capital_scope
								home = capital_scope
								owner = THIS

								troops = {
									horse_archers = { 2700 2700 }
									light_cavalry = { 1600 1600 }
									light_infantry = { 541 541 }
									heavy_infantry = { 210 210 }
									knights = { 47 47 }
								}

								attrition = 0.1
								cannot_inherit = yes
								maintenance_multiplier = 0
								earmark = seljuk_event_troops
							}

							while = {
								count = 6

								spawn_unit = {
									province = capital_scope
									home = capital_scope
									owner = THIS
									match_character = PREV
									match_mult = 0.33
									match_min = 500
									match_max = 10000
									attrition = 0.1
									disband_on_peace = yes
									maintenance_multiplier = 0
									earmark = seljuk_event_troops
								}
							}

							war = {
								target = PREV
								casus_belli = duchy_adventure
								thirdparty_title = event_target:target_province
								tier = DUKE
								infamy = 0
							}
						}
					}
				}
			}

			if = {
				limit = {
					NOT = { religion_group = muslim }
				}

				add_trait = zealous
				religion = sunni
			}

			# Create some characters
			while = {
				count = 3

				create_random_soldier = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = no
					age = 22
				}

				new_character = {
					random_list = {
						1 = { add_age = 0 }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
						1 = { add_age = 3 }
						1 = { add_age = 4 }
						1 = { add_age = 5 }
						1 = { add_age = 6 }
						1 = { add_age = 7 }
						1 = { add_age = 8 }
					}
				}

				create_character = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = yes
					age = 16
				}

				new_character = {
					random_list = {
						1 = { add_age = 0 }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
					}
				}
			}

			log = "60204: Seljuk starts his first war as a landed character!"
		}
	}

	option = {
		name = EVTOPTA60204
	}
}

# Notify Seljuk's old liege
character_event = {
	id = 60205
	desc = EVTDESC60205
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	trigger = {
		FROM = { is_ruler = yes } # The DoW worked and the adventurer has a temporary title
	}

	option = {
		name = EVTOPTA60205
	}
}

# Seljuk is successful!
# Fired from the duchy_adventure CB
narrative_event = {
	id = 60206
	title = EVTNAME60206
	desc = EVTDESC60206
	picture = GFX_evt_mongols
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes
	major = yes

	major_trigger = {
		ai = no
	}

	immediate = {
		set_character_flag = seljuk_reinforcements
		set_defacto_liege = ROOT
		prestige = 500

		if = {
			limit = { religion_group = muslim }
			piety = 100
		}

		spawn_unit = {
			province = capital_scope
			home = capital_scope
			owner = THIS
			attrition = 0.1
			maintenance_multiplier = 0
			earmark = seljuk_event_troops

			troops = {
				horse_archers = { 2700 2700 }
				light_cavalry = { 1600 1600 }
				light_infantry = { 541 541 }
				heavy_infantry = { 210 210 }
				knights = { 47 47 }
			}
		}

		while = {
			count = 6

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS
				attrition = 0.1
				maintenance_multiplier = 0
				earmark = seljuk_event_troops

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		log = "60206: Seljuk wins his first war!"
	}

	option = {
		name = EVTOPTA60206

		trigger = { has_character_flag = seljuk_himself }
	}

	option = {
		name = EVTOPTB60206

		trigger = {
			NOT = { has_character_flag = seljuk_himself }

			OR = {
				culture = turkish
				culture = karluk
				culture = cuman
				culture = pecheneg
			}
		}
	}

	option = {
		name = EVTOPTC60206

		trigger = {
			NOR = {
				has_character_flag = seljuk_himself
				culture = turkish
				culture = karluk
				culture = cuman
				culture = pecheneg
			}
		}
	}
}

# Seljuk's successor revitalizes the new state
character_event = {
	id = 60207
	desc = EVTDESC60207
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	only_independent = yes
	religion_group = muslim
	has_global_flag = seljuk_spawned
	war = no

	trigger = {
		dynasty = 613 # Seljuk
		real_tier = KING
		martial >= 7
		year >= 980
		year < 1100
		realm_size < 150

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
			trait = content
			trait = craven
			trait = depressed
			trait = imbecile
			trait = slow
			has_character_flag = seljuk_himself
			has_character_flag = seljuk_reinforcements
			has_earmarked_regiments = seljuk_event_troops
			has_global_flag = seljuk_state_revitalised
		}

		father = {
			OR = {
				has_character_flag = seljuk_himself

				father = {
					has_character_flag = seljuk_himself
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 240

		mult_modifier = {
			factor = 0.5
			martial >= 9
		}

		mult_modifier = {
			factor = 0.5
			martial >= 11
		}

		mult_modifier = {
			factor = 0.5
			martial >= 13
		}
	}

	immediate = {
		set_character_flag = seljuk_reinforcements
		set_global_flag = seljuk_state_revitalised
		piety = 250

		while = {
			count = 2

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS
				attrition = 0.1
				maintenance_multiplier = 0
				earmark = seljuk_event_troops
				cannot_inherit = yes

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		if = {
			limit = { martial >= 12 }

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		if = {
			limit = { martial >= 15 }

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}
	}

	option = {
		name = EVTOPTA60207
	}
}

# Event troops no longer needed
character_event = {
	id = 60208
	desc = EVTDESC60208
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	only_independent = yes
	has_character_flag = seljuk_reinforcements
	war = no

	trigger = {
		has_earmarked_regiments = seljuk_event_troops
		tier = EMPEROR
		realm_size >= 150
	}

	mean_time_to_happen = {
		years = 5
	}

	option = {
		name = EVTOPTA60208

		disband_event_forces = seljuk_event_troops
	}
}

##################################
# Rise of the Timurids
##################################

# Timur distinguishes himself at a Mongol court
character_event = {
	id = 60300
	desc = EVTDESC60300
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	only_playable = yes
	culture = mongol

	trigger = {
		higher_real_tier_than = COUNT

		NOT = {
			has_game_rule = {
				name = turkic_invasions
				value = off
			}
		}

		trigger_if = {
			limit = {
				has_game_rule = {
					name = turkic_invasions
					value = historical
				}
			}

			has_global_flag = mongol_empire_arrival
			year >= 1350
			year < 1370
		}
		trigger_else = {
			has_game_rule = {
				name = turkic_invasions
				value = random
			}
			year >= 1200
		}

		NOT = { has_global_flag = timur_spawned }

		any_realm_province = {
			OR = {
				region = custom_persia
				region = custom_baluchistan
				region = custom_afghanistan
				region = custom_khwarizm
				region = custom_mesopotamia
			}
		}
	}

	mean_time_to_happen = {
		months = 24
	}

	immediate = {
		set_global_flag = timur_spawned

		create_character = {
			random_traits = no
			historical = yes
			name = "Timur"
			dynasty = 800
			religion = ROOT
			culture = ROOT
			female = no
			age = 18
			health = 6
			fertility = 0.8

			attributes = {
				martial = 12
				diplomacy = 8
				stewardship = 9
				intrigue = 9
				learning = 6
			}

			add_trait = brilliant_strategist
			add_trait = diligent
			add_trait = ambitious
			add_trait = proud
			add_trait = quick
			add_trait = clubfooted
		}

		new_character = {
			set_character_flag = is_special_character
			set_character_flag = timur_himself

			if = {
				limit = { has_dlc = "Holy Fury" }

				create_bloodline = {
					type = timur
				}
			}
		}
	}

	option = { # A most capable young man
		name = EVTOPTA60300

		tooltip = {
			create_character = {
				name = "Timur"
			}
		}
	}
}

# Timur and his men consider starting an adventure
character_event = {
	id = 60301
	desc = EVTDESC60201
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	has_character_flag = timur_himself
	prisoner = no
	only_capable = yes
	war = no

	trigger = {
		trigger_if = {
			limit = { is_ruler = yes }

			trigger_if = {
				limit = { is_nomadic = yes }
				lower_real_tier_than = EMPEROR
			}
			trigger_else = {
				lower_real_tier_than = KING
			}
		}

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
			trait = content
			trait = craven
			trait = depressed
			trait = imbecile
			liege = { war = yes }
			has_character_flag = timur_started_adventure
		}

		any_independent_ruler = {
			war = no
			NOT = { same_realm = ROOT }
			is_nomadic = no
			is_tributary = no

			OR = {
				c_merv = {
					holder_scope = {
						same_realm = PREVPREV

						OR = {
							has_landed_title = d_merv
							completely_controls = d_merv
						}
					}
				}

				c_dihistan = {
					holder_scope = {
						same_realm = PREVPREV

						OR = {
							has_landed_title = d_mazandaran
							completely_controls = d_mazandaran
						}
					}
				}

				c_tus = {
					holder_scope = {
						same_realm = PREVPREV

						OR = {
							has_landed_title = d_khorasan
							completely_controls = d_khorasan
						}
					}
				}

				c_samarkand = {
					holder_scope = {
						same_realm = PREVPREV

						OR = {
							has_landed_title = d_samarkand
							completely_controls = d_samarkand
						}
					}
				}

				c_balkh = {
					holder_scope = {
						same_realm = PREVPREV

						OR = {
							has_landed_title = d_balkh
							completely_controls = d_balkh
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		years = 5

		mult_modifier = {
			factor = 0.5
			practical_age >= 25
		}

		mult_modifier = {
			factor = 0.5
			practical_age >= 30
		}

		mult_modifier = {
			factor = 0.5
			practical_age >= 35
		}
	}

	immediate = {
		add_trait = adventurer
		set_character_flag = timur_started_adventure
	}

	option = { # Merv it is!
		name = EVTOPTA60201

		trigger = {
			c_merv = { # Merv
				holder_scope = {
					NOT = { same_realm = ROOT }

					OR = {
						has_landed_title = d_merv
						completely_controls = d_merv
					}

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 10000
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_merv = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = { # Khorasan
		name = EVTOPTB60201

		trigger = {
			c_tus = { # Tus
				holder_scope = {
					NOT = { same_realm = ROOT }

					OR = {
						has_landed_title = d_mazandaran
						completely_controls = d_mazandaran
					}

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 1000
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_tus = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = { # Dihistan
		name = EVTOPTC60201

		trigger = {
			c_dihistan = { # Dihistan
				holder_scope = {
					NOT = { same_realm = ROOT }

					OR = {
						has_landed_title = d_khorasan
						completely_controls = d_khorasan
					}

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 100
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_dihistan = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = { # Samarkand
		name = EVTOPTD60201

		trigger = {
			c_samarkand = { # Dihistan
				holder_scope = {
					NOT = { same_realm = ROOT }

					OR = {
						has_landed_title = d_samarkand
						completely_controls = d_samarkand
					}

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 100
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_samarkand = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = { # Balkh
		name = EVTOPTE60201

		trigger = {
			c_balkh = { # Dihistan
				holder_scope = {
					NOT = { same_realm = ROOT }

					OR = {
						has_landed_title = d_balkh
						completely_controls = d_balkh
					}

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 100
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_balkh = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = {
		name = EVTOPTD60201 # I am fine where I am

		trigger = { ai = no }
	}

	after = {
		if = {
			limit = { is_ruler = yes }

			character_event = {
				id = 60304
				# days = 2
			}
		}
		else = {
			character_event = {
				id = 60303
				# days = 2
			}
		}
	}
}

# Ping the target province - removed

# The landless Timur and his men start an adventure
character_event = {
	id = 60303

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		wealth = 500
		prestige = 500

		any_liege = {
			character_event = {
				id = 60305
				days = 1
			}
		}

		liege = {
			capital_scope = {
				save_event_target_as = liege_capital
			}

			if = {
				limit = { is_nomadic = yes }

				ROOT = {
					set_character_flag = will_be_nomadic
				}
			}
		}

		event_target:target_province = {
			owner = {
				top_liege = {
					ROOT = {
						set_defacto_liege = ROOT

						create_title = {
							tier = DUKE
							landless = yes
							temporary = yes
							culture = ROOT
							name = CLAIMANT_ADVENTURE
							holder = ROOT
						}

						if = {
							limit = { has_character_flag = will_be_nomadic }

							clr_character_flag = will_be_nomadic
							set_government_type = nomadic_government
							population = 5000
						}

						set_character_flag = duchy_adventurer

						spawn_unit = {
							province = event_target:liege_capital
							home = event_target:liege_capital
							owner = THIS
							attrition = 0.1
							cannot_inherit = yes
							maintenance_multiplier = 0
							earmark = timur_event_troops

							troops = {
								horse_archers = { 2700 2700 }
								light_cavalry = { 1600 1600 }
								light_infantry = { 541 541 }
								heavy_infantry = { 210 210 }
								knights = { 47 47 }
							}
						}

						while = {
							count = 6

							spawn_unit = {
								province = event_target:liege_capital
								home = event_target:liege_capital
								owner = THIS
								match_character = PREV
								match_mult = 0.33
								match_min = 500
								match_max = 10000
								attrition = 0.1
								disband_on_peace = yes
								maintenance_multiplier = 0
								earmark = timur_event_troops
							}
						}

						war = {
							target = PREV
							casus_belli = duchy_adventure
							thirdparty_title = event_target:target_province
							tier = DUKE
							infamy = 0
						}
					}
				}
			}
		}

		# Create some characters
		while = {
			count = 5

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 23

				attributes = {
					martial = 12
				}

				add_trait = brilliant_strategist
			}

			new_character = {
				random_list = {
					1 = { add_age = 0 }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
				}
			}
		}

		while = {
			count = 3

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = yes
				age = 16
			}

			new_character = {
				random_list = {
					1 = { add_age = 0 }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
				}
			}
		}

		log = "60303: Timur starts his first war (landless)!"
	}
}

# The landed Timur and his men start an adventure
character_event = {
	id = 60304
	desc = EVTDESC60304
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { real_tier = BARON }

			abdicate = yes
			repeat_event = { id = 60303 }
		}
		else = {
			wealth = 500
			prestige = 500

			any_liege = {
				character_event = {
					id = 60305
					days = 1
				}
			}

			event_target:target_province = {
				owner = {
					top_liege = {
						ROOT = {
							set_character_flag = duchy_adventurer

							if = {
								limit = { is_nomadic = yes }
								population = 5000
							}

							spawn_unit = {
								province = capital_scope
								home = capital_scope
								owner = THIS
								attrition = 0.1
								cannot_inherit = yes
								maintenance_multiplier = 0
								earmark = timur_event_troops

								troops = {
									horse_archers = { 2700 2700 }
									light_cavalry = { 1600 1600 }
									light_infantry = { 541 541 }
									heavy_infantry = { 210 210 }
									knights = { 47 47 }
								}
							}

							while = {
								count = 6

								spawn_unit = {
									province = capital_scope
									home = capital_scope
									owner = THIS
									match_character = PREV
									match_mult = 0.33
									match_min = 500
									match_max = 10000
									attrition = 0.1
									disband_on_peace = yes
									maintenance_multiplier = 0
									earmark = timur_event_troops
								}
							}

							war = {
								target = PREV
								casus_belli = duchy_adventure
								thirdparty_title = event_target:target_province
								tier = DUKE
								infamy = 0
							}
						}
					}
				}
			}

			# Create some characters
			while = {
				count = 5

				create_character = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = no
					age = 23

					attributes = {
						martial = 12
					}

					add_trait = brilliant_strategist
				}

				new_character = {
					random_list = {
						1 = { add_age = 0 }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
						1 = { add_age = 3 }
						1 = { add_age = 4 }
						1 = { add_age = 5 }
						1 = { add_age = 6 }
						1 = { add_age = 7 }
					}
				}
			}

			while = {
				count = 3

				create_character = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = yes
					age = 16
				}

				new_character = {
					random_list = {
						1 = { add_age = 0 }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
					}
				}
			}

			log = "60304: Timur starts his first war (landed)!"
		}
	}

	option = {
		name = EVTOPTA60204
	}
}

# Notify Timur's old liege
character_event = {
	id = 60305
	desc = EVTDESC60205
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	trigger = {
		FROM = { is_ruler = yes } # The DoW worked and the adventurer has a temporary title
	}

	option = {
		name = EVTOPTA60305
	}
}

# Timur is successful!
# Fired from the duchy_adventure CB
narrative_event = {
	id = 60306
	title = EVTNAME60306
	desc = EVTDESC60306
	picture = GFX_evt_mongols
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes
	major = yes

	major_trigger = {
		ai = no
	}

	immediate = {
		set_character_flag = timur_reinforcements
		set_defacto_liege = ROOT
		prestige = 1000

		if = {
			limit = { religion_group = muslim }
			piety = 100
		}

		while = {
			count = 8

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS
				attrition = 0.1
				maintenance_multiplier = 0
				earmark = timur_event_troops

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		while = {
			count = 6

			random = {
				chance = 50

				spawn_unit = {
					province = capital_scope
					home = capital_scope
					owner = THIS

					troops = {
						light_infantry = { 2250 2250 }
						light_cavalry = { 2000 2000 }
						horse_archers = { 1500 1500 }
						knights = { 50 50 }
					}
				}
			}
		}

		log = "60306: Timur wins his first war!"
	}

	option = {
		name = EVTOPTA60306

		trigger = { has_character_flag = timur_himself }
	}

	option = {
		name = EVTOPTB60306

		trigger = {
			NOT = { has_character_flag = timur_himself }
			culture = mongol
		}
	}

	option = {
		name = EVTOPTC60306

		trigger = {
			NOR = {
				has_character_flag = timur_himself
				culture = mongol
			}
		}
	}
}

# Timur's successors revitalize the state
character_event = {
	id = 60307
	desc = EVTDESC60307
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	only_independent = yes
	has_global_flag = timur_spawned

	trigger = {
		dynasty = 800 # Timurid
		real_tier = KING
		realm_size < 150
		martial >= 7
		year >= 1370
		year < 1500

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
			trait = content
			trait = craven
			trait = depressed
			trait = imbecile
			has_character_flag = timur_himself
			has_character_flag = timur_reinforcements
			has_global_flag = timurid_state_revitalised
		}

		father = {
			OR = {
				has_character_flag = timur_himself

				father = {
					has_character_flag = timur_himself
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 360

		mult_modifier = {
			factor = 0.5
			martial >= 9
		}

		mult_modifier = {
			factor = 0.5
			martial >= 11
		}

		mult_modifier = {
			factor = 0.5
			martial >= 13
		}
	}

	immediate = {
		set_character_flag = timur_reinforcements
		set_global_flag = timurid_state_revitalised

		if = {
			limit = { religion_group = muslim }
			piety = 250
		}

		while = {
			count = 4

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS
				attrition = 0.1
				maintenance_multiplier = 0
				earmark = timur_event_troops
				cannot_inherit = yes

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		if = {
			limit = { martial >= 12 }

			while = {
				count = 1

				spawn_unit = {
					province = capital_scope
					home = capital_scope
					owner = THIS

					troops = {
						light_infantry = { 2250 2250 }
						light_cavalry = { 2000 2000 }
						horse_archers = { 1500 1500 }
						knights = { 50 50 }
					}
				}
			}
		}

		if = {
			limit = { martial >= 15 }

			while = {
				count = 1

				spawn_unit = {
					province = capital_scope
					home = capital_scope
					owner = THIS

					troops = {
						light_infantry = { 2250 2250 }
						light_cavalry = { 2000 2000 }
						horse_archers = { 1500 1500 }
						knights = { 50 50 }
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTA60307
	}
}

# Event troops no longer needed
character_event = {
	id = 60308
	desc = EVTDESC60208
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	only_independent = yes
	has_character_flag = timur_reinforcements
	war = no

	trigger = {
		has_earmarked_regiments = timur_event_troops
		tier = EMPEROR
		realm_size >= 150
	}

	mean_time_to_happen = {
		years = 5
	}

	option = {
		name = EVTOPTA60208

		disband_event_forces = timur_event_troops
	}
}

##########################################
# Rise of the Ghaznavids under Sabuktigin
##########################################

# Sabuktigin distinguishes himself at a Muslim court
character_event = {
	id = 60400
	desc = EVTDESC60400
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	only_independent = yes
	religion_group = muslim

	trigger = {
		OR = {
			completely_controls = c_ghazna
			completely_controls = c_bost
			completely_controls = c_mandesh
		}

		higher_real_tier_than = COUNT

		NOR = {
			has_global_flag = sabuktigin_spawned

			has_game_rule = {
				name = turkic_invasions
				value = off
			}
		}

		trigger_if = {
			limit = {
				has_game_rule = {
					name = turkic_invasions
					value = historical
				}
			}

			year >= 965
			year < 1010
		}
		trigger_else = {
			has_game_rule = {
				name = turkic_invasions
				value = random
			}
			year >= 809
			year < 1200
		}
	}

	mean_time_to_happen = {
		months = 24
	}

	immediate = {
		set_global_flag = sabuktigin_spawned

		create_character = {
			random_traits = no
			historical = yes
			name = "Sabuktigin"
			dynasty = 790
			religion = ROOT
			culture = ROOT
			female = no
			age = 18
			health = 6
			fertility = 0.8

			attributes = {
				martial = 12
				diplomacy = 8
				stewardship = 9
				intrigue = 9
				learning = 6
			}

			add_trait = brilliant_strategist
			add_trait = diligent
			add_trait = ambitious
			add_trait = proud
			add_trait = quick
		}

		new_character = {
			set_character_flag = sabuktigin_himself

			if = {
				limit = { has_dlc = "Holy Fury" }

				create_bloodline = {
					type = ghaznavid
				}
			}
		}
	}

	option = { # A most capable young man
		name = EVTOPTA60300

		tooltip = {
			create_character = {
				name = "Sabuktigin"
			}
		}
	}
}

# Sabuktigin and his men consider starting an adventure
character_event = {
	id = 60401
	desc = EVTDESC60201
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	has_character_flag = sabuktigin_himself
	prisoner = no
	only_capable = yes

	trigger = {
		trigger_if = {
			limit = { is_ruler = yes }

			trigger_if = {
				limit = { is_nomadic = yes }
				lower_real_tier_than = EMPEROR
			}
			trigger_else = {
				lower_real_tier_than = KING
			}
		}

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
			trait = content
			trait = craven
			trait = depressed
			trait = imbecile
			liege = { war = yes }
			has_character_flag = sabuktigin_started_adventure
		}

		any_independent_ruler = {
			war = no
			NOT = { same_realm = ROOT }
			is_nomadic = no
			is_tributary = no

			OR = {
				completely_controls = c_nandana
				completely_controls = c_multan
				completely_controls = c_lahur
				completely_controls = c_bhakkar
			}
		}
	}

	mean_time_to_happen = {
		years = 5

		mult_modifier = {
			factor = 0.5
			practical_age >= 25
		}

		mult_modifier = {
			factor = 0.5
			practical_age >= 30
		}

		mult_modifier = {
			factor = 0.5
			practical_age >= 35
		}
	}

	immediate = {
		add_trait = adventurer
		set_character_flag = sabuktigin_started_adventure
	}

	option = { # Gandhara it is!
		name = EVTOPTA60401

		trigger = {
			c_nandana = { # Nandana
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 10000
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_nandana = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = { # Multan
		name = EVTOPTB60401

		trigger = {
			c_multan = { # Multan
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 1000
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_multan = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = { # Lahore
		name = EVTOPTC60401

		trigger = {
			c_lahur = { # Lahore
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 100
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_lahur = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = { # Bhakkar
		name = EVTOPTD60401

		trigger = {
			c_bhakkar = { # Bhakkar
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		ai_chance = {
			factor = 100
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_bhakkar = {
				location = {
					save_event_target_as = target_province
				}
			}
		}
	}

	option = {
		name = EVTOPTD60201 # I am fine where I am

		trigger = { ai = no }
	}

	after = {
		if = {
			limit = { is_ruler = yes }

			character_event = {
				id = 60404
				# days = 2
			}
		}
		else = {
			character_event = {
				id = 60403
				# days = 2
			}
		}
	}
}

# Ping the target province - removed

# The landless Sabuktigin and his men start an adventure
character_event = {
	id = 60403

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		wealth = 500
		prestige = 500

		any_liege = {
			character_event = {
				id = 60405
				days = 1
			}
		}

		liege = {
			capital_scope = {
				save_event_target_as = liege_capital
			}

			if = {
				limit = { is_nomadic = yes }

				ROOT = {
					set_character_flag = will_be_nomadic
				}
			}
		}

		event_target:target_province = {
			owner = {
				top_liege = {
					ROOT = {
						set_defacto_liege = ROOT

						create_title = {
							tier = DUKE
							landless = yes
							temporary = yes
							culture = ROOT
							name = CLAIMANT_ADVENTURE
							holder = ROOT
						}

						if = {
							limit = { has_character_flag = will_be_nomadic }

							clr_character_flag = will_be_nomadic
							set_government_type = nomadic_government
							population = 5000
						}

						set_character_flag = duchy_adventurer

						spawn_unit = {
							province = event_target:liege_capital
							home = event_target:liege_capital
							owner = THIS
							attrition = 0.1
							cannot_inherit = yes
							maintenance_multiplier = 0
							earmark = sabuktigin_event_troops

							troops = {
								horse_archers = { 2700 2700 }
								light_cavalry = { 1600 1600 }
								light_infantry = { 541 541 }
								heavy_infantry = { 210 210 }
								knights = { 47 47 }
							}
						}

						while = {
							count = 6

							spawn_unit = {
								province = event_target:liege_capital
								home = event_target:liege_capital
								owner = THIS
								match_character = PREV
								match_mult = 0.33
								match_min = 500
								match_max = 10000
								attrition = 0.1
								disband_on_peace = yes
								maintenance_multiplier = 0
								earmark = sabuktigin_event_troops
							}
						}

						war = {
							target = PREV
							casus_belli = duchy_adventure
							thirdparty_title = event_target:target_province
							tier = DUKE
							infamy = 0
						}
					}
				}
			}
		}

		# Create some characters
		while = {
			count = 5

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 23

				attributes = {
					martial = 12
				}

				add_trait = brilliant_strategist
			}

			new_character = {
				random_list = {
					1 = { add_age = 0 }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
				}
			}
		}

		while = {
			count = 3

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = yes
				age = 16
			}

			new_character = {
				random_list = {
					1 = { add_age = 0 }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
				}
			}
		}

		log = "60403: Sabuktigin starts his first war (landless)!"
	}
}

# The landed Sabuktigin and his men start an adventure
character_event = {
	id = 60404
	desc = EVTDESC60304
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { real_tier = BARON }

			abdicate = yes
			repeat_event = { id = 60403 }
		}
		else = {
			wealth = 500
			prestige = 500

			any_liege = {
				character_event = {
					id = 60405
					days = 1
				}
			}

			event_target:target_province = {
				owner = {
					top_liege = {
						ROOT = {
							set_character_flag = duchy_adventurer

							if = {
								limit = { is_nomadic = yes }
								population = 5000
							}

							spawn_unit = {
								province = capital_scope
								home = capital_scope
								owner = THIS
								attrition = 0.1
								cannot_inherit = yes
								maintenance_multiplier = 0
								earmark = sabuktigin_event_troops

								troops = {
									horse_archers = { 2700 2700 }
									light_cavalry = { 1600 1600 }
									light_infantry = { 541 541 }
									heavy_infantry = { 210 210 }
									knights = { 47 47 }
								}
							}

							while = {
								count = 6

								spawn_unit = {
									province = capital_scope
									home = capital_scope
									owner = THIS
									match_character = PREV
									match_mult = 0.33
									match_min = 500
									match_max = 10000
									attrition = 0.25
								}
							}

							war = {
								target = PREV
								casus_belli = duchy_adventure
								thirdparty_title = PREVPREVPREV
								tier = DUKE
								infamy = 0
							}
						}
					}
				}
			}

			# Create some characters
			while = {
				count = 5

				create_character = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = no
					age = 23

					attributes = {
						martial = 12
					}

					add_trait = brilliant_strategist
				}

				new_character = {
					random_list = {
						1 = { add_age = 0 }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
						1 = { add_age = 3 }
						1 = { add_age = 4 }
						1 = { add_age = 5 }
						1 = { add_age = 6 }
						1 = { add_age = 7 }
					}
				}
			}

			while = {
				count = 3

				create_character = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = yes
					age = 16
				}

				new_character = {
					random_list = {
						1 = { add_age = 0 }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
					}
				}
			}

			log = "60404: Sabuktigin starts his first war (landed)!"
		}
	}

	option = {
		name = EVTOPTA60204
	}
}

# Notify Sabuktigin's old liege
character_event = {
	id = 60405
	desc = EVTDESC60205
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	trigger = {
		FROM = { is_ruler = yes } # The DoW worked and the adventurer has a temporary title
	}

	option = {
		name = EVTOPTA60305
	}
}

# Sabuktigin is successful!
# Fired from the duchy_adventure CB
narrative_event = {
	id = 60406
	title = EVTNAME60406
	desc = EVTDESC60406
	picture = GFX_evt_mongols
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes
	major = yes

	major_trigger = {
		ai = no
	}

	immediate = {
		set_defacto_liege = ROOT
		prestige = 500

		if = {
			limit = { religion_group = muslim }
			piety = 100
		}

		capital_scope = {
			religion = ROOT
			culture = ROOT
		}

		while = {
			count = 5

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS
				attrition = 0.1
				maintenance_multiplier = 0
				earmark = sabuktigin_event_troops

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		while = {
			count = 3

			random = {
				chance = 50

				spawn_unit = {
					province = capital_scope
					home = capital_scope
					owner = THIS
					attrition = 0.1
					maintenance_multiplier = 0
					earmark = sabuktigin_event_troops

					troops = {
						light_infantry = { 2250 2250 }
						light_cavalry = { 2000 2000 }
						horse_archers = { 1500 1500 }
						knights = { 50 50 }
					}
				}
			}
		}

		random_realm_province = {
			limit = {
				NAND = {
					culture = ROOT
					religion = ROOT
				}
			}

			religion = ROOT
			culture = ROOT
		}

		log = "60406: Sabuktigin wins his first war!"
	}

	option = {
		name = EVTOPTA60406

		trigger = { has_character_flag = sabuktigin_himself }
	}

	option = {
		name = EVTOPTB60406

		trigger = {
			NOT = { has_character_flag = sabuktigin_himself }
		}
	}
}

# Event troops no longer needed
character_event = {
	id = 60407
	desc = EVTDESC60208
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	only_independent = yes
	has_character_flag = sabuktigin_himself
	war = no

	trigger = {
		has_earmarked_regiments = sabuktigin_event_troops
		tier = EMPEROR
		realm_size >= 150
	}

	mean_time_to_happen = {
		years = 5
	}

	option = {
		name = EVTOPTA60208

		disband_event_forces = sabuktigin_event_troops
	}
}

# Mongol horde starts forming
narrative_event = {
	id = 60500
	title = EVTNAME60500
	desc = EVTDESC60500
	picture = GFX_evt_mongols
	border = GFX_event_narrative_frame_war
	portrait = event_target:mongol_china_invader

	is_triggered_only = yes
	major = yes
	hide_from = yes
	hide_new = yes

	only_playable = yes

	trigger = {
		any_demesne_province = { has_flag = pulse_province }
		year < 1218

		trigger_if = {
			limit = {
				has_game_rule = {
					name = mongol_invasion
					value = historical
				}
			}

			year >= 1210
		}
		trigger_else_if = {
			limit = {
				has_game_rule = {
					name = mongol_invasion
					value = random
				}
			}

			total_years_played >= 50
		}

		trigger_else_if = {
			limit = {
				has_game_rule = {
					name = mongol_invasion
					value = delayed_random
				}
			}

			year >= 1000
			total_years_played >= 50
		}

		NOR = {
			has_game_rule = {
				name = mongol_invasion
				value = off
			}

			has_global_flag = il_khanate_arrival # Backwards compatibility
			has_global_flag = golden_horde_arrival # Backwards compatibility
			has_global_flag = mongol_empire_arrival
		}
	}

	weight_multiplier = {
		days = 1

		mult_modifier = {
			factor = 1.5
			year >= 1212
		}

		mult_modifier = {
			factor = 5
			year >= 1214
		}

		mult_modifier = {
			factor = 0.5
			year >= 1216
		}

		mult_modifier = {
			factor = 100 # If game has historical rule, ensure that the Mongol Invasion WILL happen when the time comes.

			has_game_rule = {
				name = mongol_invasion
				value = historical
			}
		}

		mult_modifier = {
			factor = 0.5

			has_game_rule = {
				name = mongol_invasion
				value = random
			}

			total_years_played < 100
		}

		mult_modifier = {
			factor = 0.5

			has_game_rule = {
				name = mongol_invasion
				value = delayed_random
			}

			total_years_played < 100
		}

		mult_modifier = {
			factor = 0.5

			has_game_rule = {
				name = mongol_invasion
				value = random
			}
		}

		mult_modifier = {
			factor = 0.6

			has_game_rule = {
				name = mongol_invasion
				value = delayed_random
			}
		}
	}

	immediate = {
		set_global_flag = mongol_empire_arrival

		activate_title = {
			title = e_mongol_empire
			status = yes
		}

		if = {
			limit = { has_global_flag = temujin_born }

			log = "MONGOL ARRIVAL: Temujin detected as born"

			# First find him
			any_independent_ruler = {
				if = {
					limit = { has_character_flag = is_temujin }
					save_event_target_as = temujin
				}

				any_realm_character = {
					limit = { has_character_flag = is_temujin }
					save_event_target_as = temujin
				}
			}

			# Temujin still exists and is Tengri pagan and capable
			if = {
				limit = {
					event_target:temujin = {
						is_alive = yes
						prisoner = no
						health >= 5
						religion = tengri_pagan
						is_incapable = no
						is_maimed_trigger = no
					}
				}

				event_target:temujin = {
					save_event_target_as = mongol_china_invader
					add_trait = bloodlust

					# He's already a count or higher
					if = {
						limit = { higher_real_tier_than = BARON }

						log = "MONGOL ARRIVAL: Temujin already exists as a ruler"
						set_defacto_liege = THIS
						pf_liege_change_effect = yes

						# Become a nomad/tribal if not already
						if = {
							limit = {
								has_dlc = "Horse Lords"
								is_nomadic = no
							}
							set_government_type = nomadic_government
						}
						else_if = {
							limit = { is_tribal = no }
							set_government_type = tribal_government
						}

						# Destroy any current emperor titles and grant Mongol Empire
						e_mongol_empire = {
							set_title_flag = temporary_landless_title
							gain_title = PREV
						}

						any_demesne_title = {
							limit = {
								tier = EMPEROR
								NOT = { title = e_mongol_empire }
							}
							unsafe_destroy_landed_title = THIS
						}
					}
					else = {
						# He's a baron or a courtier
						log = "MONGOL ARRIVAL: Temujin already exists as a courtier"

						if = {
							limit = { tier = BARON }
							abdicate = yes
						}

						e_mongol_empire = {
							set_title_flag = temporary_landless_title
							grant_title = PREV
						}

						set_defacto_liege = THIS
						pf_liege_change_effect = yes

						if = {
							limit = { has_dlc = "Horse Lords" }
							set_government_type = nomadic_government
						}
						else = {
							set_government_type = tribal_government
						}
					}
				}
			}

			else = {
				log = "MONGOL ARRIVAL: Temujin died, generating new character"

				create_character = {
					random_traits = yes
					dynasty = random
					religion = tengri_pagan
					culture = mongol
					female = no
					age = 24

					attributes = {
						martial = 12
						diplomacy = 8
					}

					add_trait = brilliant_strategist
					add_trait = ambitious
					add_trait = diligent
					add_trait = brave
					add_trait = bloodlust
				}

				new_character = {
					save_event_target_as = mongol_china_invader

					e_mongol_empire = {
						set_title_landless = {
							title = THIS
							status = yes
						}

						set_title_flag = temporary_landless_title
						grant_title = PREV
					}

					set_defacto_liege = THIS

					if = {
						limit = { has_dlc = "Horse Lords" }
						set_government_type = nomadic_government
					}
					else = {
						set_government_type = tribal_government
					}

					character_event = { id = 60509 } # Spawn courtiers
					log = "[This.GetBestName] will take Temujin's place"
				}
			}
		}
		else = {
			log = "MONGOL ARRIVAL: Spawning Temujin for invasion"

			create_character = {
				name = "Temujin" # Genghis Khan
				dynasty = 1051210
				dna = "bfimkolbecc"
				properties = "ge0af0000000"
				age = 43
				health = 6
				fertility = 0.7
				religion = tengri_pagan
				culture = mongol

				attributes = {
					martial = 10
					diplomacy = 8
					intrigue = 8
					stewardship = 9
				}

				add_trait = brave
				add_trait = ambitious
				add_trait = diligent
				add_trait = cruel
				add_trait = hunter
				add_trait = cavalry_leader
				add_trait = brilliant_strategist
				add_trait = bloodlust
			}

			new_character = {
				save_event_target_as = mongol_china_invader
				set_character_flag = is_temujin

				e_mongol_empire = {
					set_title_landless = {
						title = THIS
						status = yes
					}

					set_title_flag = temporary_landless_title
					grant_title = PREV
				}

				set_defacto_liege = THIS

				if = {
					limit = { has_dlc = "Horse Lords" }
					set_government_type = nomadic_government
				}
				else = {
					set_government_type = tribal_government
				}

				character_event = { id = 60505 } # Spawn Temujins generals
				character_event = { id = 60509 } # Spawn courtiers
			}
		}

		# Happens for whoever is the Mongol Emperor
		event_target:mongol_china_invader = {
			# Remove landless status if Temujin already owns land
			if = {
				limit = { num_of_count_titles_in_realm >= 1 }

				e_mongol_empire = {
					clr_title_flag = temporary_landless_title

					set_title_landless = {
						title = THIS
						status = no
					}
				}
			}

			if = {
				limit = {
					has_dlc = "Holy Fury"

					NOT = {
						any_owned_bloodline = {
							has_bloodline_flag = genghis_khan_line
						}
					}
				}

				create_bloodline = {
					type = genghis_khan
				}
			}

			wealth = 5000
			prestige = 5000
			set_character_flag = horde_invader

			# Spawn troops (formerly event 60510)
			while = {
				count = 9

				spawn_unit = {
					province = 1457 # Ordu-Baliq
					earmark = first_mongol_horde
					maintenance_multiplier = 0
					attrition = 0.1

					troops = {
						light_cavalry = { 2750 2750 }
						horse_archers = { 2250 2250 }
						knights = { 500 500 }
					}
				}
			}

			while = {
				count = 6

				spawn_unit = {
					province = 1460 # Baygal
					earmark = first_mongol_horde
					maintenance_multiplier = 0
					attrition = 0.1

					troops = {
						light_cavalry = { 2750 2750 }
						horse_archers = { 2250 2250 }
						knights = { 500 500 }
					}
				}
			}

			while = {
				count = 2

				random = {
					chance = 50

					while = {
						count = 3

						spawn_unit = {
							province = 1408 # Gobi
							earmark = first_mongol_horde
							maintenance_multiplier = 0
							attrition = 0.1

							troops = {
								light_cavalry = { 2750 2750 }
								horse_archers = { 2250 2250 }
								knights = { 500 500 }
							}
						}
					}
				}
			}

			# Spawn population (formerly event 60515)
			if = {
				limit = { is_nomadic = yes }

				population = 120000

				# Boost population growth by 200%
				add_character_modifier = {
					name = invading_population_halt
					years = 30
					hidden = yes
				}

				# Add more population next year
				character_event = {
					id = 60516
					days = 365
				}
			}

			if = {
				limit = {
					has_dlc = "Jade Dragon"

					offmap_china = {
						trigger_if = {
							limit = { has_offmap_flag = china_invaded_player_dynasty }

							had_offmap_tmp_flag = {
								flag = china_invaded_player_dynasty
								years >= 200
							}
						}
					}
				}

				character_event = {
					id = 60531 # invade China
					days = 100
					random = 100
				}
			}

			# Start the first war, if Temujin does not already own land
			if = {
				limit = { is_landed = no }

				c_kara_khorum = { # Ordu Baliq/Karabalgasun
					kingdom = {
						event_target:mongol_china_invader = {
							if = {
								limit = { has_dlc = "Horse Lords" }

								war = {
									casus_belli = nomad_invasion
									target = PREVPREV # The top liege of the owner of the province
									thirdparty_title = PREV # The de jure kingdom
								}
							}
							else = {
								war = {
									casus_belli = tribal_invasion
									target = PREVPREV # The top liege of the owner of the province
									thirdparty_title = PREV # The de jure kingdom
								}
							}
						}
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTA60500

		trigger = {
			OR = {
				religion_group = christian
				religion_group = muslim
				religion_group = pagan_group
			}

			is_nomadic = no
			has_power_omen_modifier_trigger = no
			has_battle_omen_modifier_trigger = no
		}
	}

	option = {
		name = EVTOPTB60500

		trigger = {
			NOR = {
				religion_group = christian
				religion_group = muslim
				religion_group = pagan_group
			}

			is_nomadic = no
			has_power_omen_modifier_trigger = no
			has_battle_omen_modifier_trigger = no
		}
	}

	option = {
		name = EVTOPTC60500

		trigger = {
			is_nomadic = yes
			has_power_omen_modifier_trigger = no
			has_battle_omen_modifier_trigger = no
		}
	}

	# Scrying omen included
	option = {
		name = EVTOPTA60500
		tooltip_info = yes

		trigger = {
			OR = {
				has_power_omen_modifier_trigger = yes
				has_battle_omen_modifier_trigger = yes
			}

			OR = {
				religion_group = christian
				religion_group = muslim
				religion_group = pagan_group
			}

			is_nomadic = no
		}

		set_character_flag = negative_event_flag # For the scrying outcome calculation...
		calculate_scrying_outcome_effect = yes
		remove_scrying_omen_modifiers_effect = yes
	}

	option = {
		name = EVTOPTB60500
		tooltip_info = yes

		trigger = {
			OR = {
				has_power_omen_modifier_trigger = yes
				has_battle_omen_modifier_trigger = yes
			}

			NOR = {
				religion_group = christian
				religion_group = muslim
				religion_group = pagan_group
			}

			is_nomadic = no
		}

		set_character_flag = negative_event_flag # For the scrying outcome calculation...
		calculate_scrying_outcome_effect = yes
		remove_scrying_omen_modifiers_effect = yes
	}

	option = {
		name = EVTOPTC60500
		tooltip_info = yes

		trigger = {
			is_nomadic = yes

			OR = {
				has_power_omen_modifier_trigger = yes
				has_battle_omen_modifier_trigger = yes
			}
		}

		set_character_flag = negative_event_flag # For the scrying outcome calculation...
		calculate_scrying_outcome_effect = yes
		remove_scrying_omen_modifiers_effect = yes
	}
}

# Remove landless status fired from on_action
character_event = {
	id = 60504

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		FROM = {
			tier = COUNT
		}

		any_demesne_title = {
			has_title_flag = temporary_landless_title
			is_landless_type_title = yes
		}
	}

	immediate = {
		any_demesne_title = {
			limit = { has_title_flag = temporary_landless_title }

			clr_title_flag = temporary_landless_title

			set_title_landless = {
				title = THIS
				status = no
			}
		}
	}
}

# Spawn mongol leaders for Temujin
character_event = {
	id = 60505
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		create_character = {
			name = "Borte" # Temujin's Wife
			age = 44
			dynasty = 1041000
			religion = ROOT
			culture = ROOT
			female = yes
			random_traits = yes
		}

		new_character = {
			save_event_target_as = borte
			add_spouse = ROOT

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}
		}

		create_character = {
			name = "Subutai" # Temujin's primary general
			age = 35
			dynasty = 7315
			religion = ROOT
			culture = ROOT

			attributes = {
				martial = 10
				diplomacy = 4
				intrigue = 6
				stewardship = 6
			}

			add_trait = brave
			add_trait = strong
			add_trait = quick
			add_trait = diligent
			add_trait = brilliant_strategist
			add_trait = trickster
		}

		new_character = {
			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}
		}

		create_character = {
			name = "Chagatai"
			age = 22
			dynasty = ROOT
			religion = ROOT
			culture = ROOT
			random_traits = no
			add_trait = skilled_tactician
			add_trait = wroth
			add_trait = just
			add_trait = drunkard
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte
			set_character_flag = is_chagatai_khan

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check

			ROOT = {
				create_character = {
					name = "Ebuskun"
					random_traits = yes
					dynasty = 1041001
					religion = ROOT
					culture = ROOT
					female = yes
					age = 21
					add_trait = quick
				}

				new_character = {
					add_spouse = PREVPREV

					ROOT = {
						create_character = {
							name = "Megujin"
							random_traits = yes
							dynasty = ROOT
							religion = ROOT
							culture = ROOT
							female = no
							age = 5

							attributes = {
								martial = 6
								intrigue = 3
							}

							add_trait = ambitious
							add_trait = just
						}

						new_character = {
							set_mother = PREVPREV
							set_father = PREVPREVPREVPREV
							character_event = { id = geneticPlus.001 } # Genetics check
						}

						create_character = {
							name = "Yesunge"
							random_traits = yes
							dynasty = ROOT
							religion = ROOT
							culture = ROOT
							female = no
							age = 3

							attributes = {
								martial = 4
								diplomacy = 3
							}

							add_trait = wroth
							add_trait = quick
						}

						new_character = {
							set_mother = PREVPREV
							set_father = PREVPREVPREVPREV
							character_event = { id = geneticPlus.001 } # Genetics check
						}
					}
				}
			}
		}

		create_character = {
			name = "gedei" # gedei Khan
			age = 29
			dynasty = ROOT
			religion = ROOT
			culture = ROOT

			attributes = {
				diplomacy = 8
			}

			add_trait = skilled_tactician
			add_trait = gregarious
			add_trait = just
			add_trait = hunter
			add_trait = ambitious
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte
			set_character_flag = is_ogodei_khan

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check

			ROOT = {
				create_character = {
					name = "Tregene"
					random_traits = yes
					dynasty = 1041001
					religion = ROOT
					culture = ROOT
					female = yes
					age = 17
				}

				new_character = {
					add_spouse = PREVPREV

					ROOT = {
						create_character = {
							name = "Guyug"
							random_traits = yes
							dynasty = ROOT
							religion = ROOT
							culture = ROOT
							female = no
							age = 1
							trait = gregarious
							trait = just
						}

						new_character = {
							set_mother = PREVPREV
							set_father = PREVPREVPREVPREV
							character_event = { id = geneticPlus.001 } # Genetics check
						}
					}
				}
			}
		}

		create_character = {
			name = "Jochi"
			age = 24
			dynasty = ROOT
			religion = ROOT
			culture = ROOT
			random_traits = no

			attributes = {
				martial = 8
			}

			add_trait = skilled_tactician
			add_trait = hunter
			add_trait = kind
			add_trait = patient
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check
			set_character_flag = is_jochi_khan

			ROOT = {
				create_character = {
					name = "Sarkan"
					random_traits = yes
					dynasty = 1041002
					religion = ROOT
					culture = ROOT
					female = yes
					age = 19
				}

				new_character = {
					add_spouse = PREVPREV

					ROOT = {
						create_character = {
							name = "Batu"
							random_traits = yes
							dynasty = ROOT
							religion = ROOT
							culture = ROOT
							female = no
							age = 2

							attributes = {
								martial = 4
							}
						}

						new_character = {
							set_father = PREVPREVPREVPREV
							set_mother = PREVPREV
							character_event = { id = geneticPlus.001 } # Genetics check
						}
					}
				}
			}
		}

		create_character = {
			name = "Tolui"
			age = 13
			dynasty = ROOT
			religion = ROOT
			culture = ROOT
			random_traits = yes

			attributes = {
				martial = 4
				stewardship = 8
			}
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte
			set_character_flag = is_tolui_khan

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check
		}

		create_character = {
			name = "Jebe" # Temujin's secondary general
			age = 50
			dynasty = 7317
			religion = ROOT
			culture = ROOT

			attributes = {
				martial = 10
				diplomacy = 5
				intrigue = 5
				stewardship = 4
			}

			add_trait = skilled_tactician
			add_trait = brave
		}

		new_character = {
			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}
		}

		# Daughters
		create_character = {
			name = "Khochen"
			random_traits = yes
			female = yes
			dynasty = ROOT
			culture = ROOT
			religion = ROOT
			age = 20
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check
		}

		create_character = {
			name = "Alakhai"
			random_traits = yes
			female = yes
			dynasty = ROOT
			culture = ROOT
			religion = ROOT
			age = 14
			add_trait = strong
			add_trait = fair

			attributes = {
				martial = 4
				diplomacy = 6
				stewardship = 6
			}
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check
		}

		recalc_succession = yes
	}
}

# Spawn extra courtiers
character_event = {
	id = 60509

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		while = {
			count = 7

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 16
			}

			new_character = {
				random_list = {
					1 = { add_age = 0 }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
					1 = { add_age = 8 }
					1 = { add_age = 9 }
					1 = { add_age = 10 }
					1 = { add_age = 11 }
					1 = { add_age = 12 }
				}

				opinion = {
					name = opinion_exalted
					who = ROOT
					multiplier = 2
					years = 100
				}
			}
		}

		while = {
			count = 5

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = yes
				age = 16
			}

			new_character = {
				random_list = {
					1 = { add_age = 0 }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
				}

				opinion = {
					name = opinion_exalted
					who = ROOT
					multiplier = 2
					years = 100
				}
			}
		}

		while = {
			count = 4

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 24

				attributes = {
					martial = 12
				}

				add_trait = brilliant_strategist
			}

			new_character = {
				random_list = {
					1 = { add_age = 0 }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
					1 = { add_age = 8 }
					1 = { add_age = 9 }
					1 = { add_age = 10 }
					1 = { add_age = 11 }
					1 = { add_age = 12 }
					1 = { add_age = 13 }
					1 = { add_age = 14 }
					1 = { add_age = 15 }
					1 = { add_age = 16 }
					1 = { add_age = 17 }
					1 = { add_age = 18 }
					1 = { add_age = 19 }
					1 = { add_age = 20 }
					1 = { add_age = 21 }
					1 = { add_age = 22 }
					1 = { add_age = 23 }
					1 = { add_age = 24 }
					1 = { add_age = 25 }
					1 = { add_age = 26 }
					1 = { add_age = 27 }
				}

				opinion = {
					name = opinion_exalted
					who = ROOT
					multiplier = 2
					years = 100
				}
			}
		}
	}
}

character_event = {
	id = 60516

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_nomadic = yes
		has_character_modifier = invading_population_halt
	}

	immediate = {
		if = {
			limit = {
				population < 350000
				population_factor < 1
			}

			population = 80000

			# Enforce hard cap
			if = {
				limit = {
					population >= 350000
					population_factor < 1
				}

				remove_character_modifier = invading_population_halt
			}
			else = {
				repeat_event = {
					id = 60516 # Add more population next year
					days = 365
				}
			}
		}
	}

	fail_trigger_effect = {
		remove_character_modifier = invading_population_halt
	}
}

# Notify world about the greatest of Khans
narrative_event = {
	id = 60520
	title = EVTNAME60520
	desc = EVTDESC60520
	picture = GFX_evt_mongols
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes # become_genghis_khan in HL_decisions.txt

	option = {
		name = EVTOPTA_60520

		trigger = {
			primary_title = {
				title = e_mongol_empire
			}

			has_power_omen_modifier_trigger = no
			has_battle_omen_modifier_trigger = no
		}
	}

	option = {
		name = EVTOPTB_60520

		trigger = {
			NOR = {
				primary_title = {
					title = e_mongol_empire
				}

				any_liege = {
					primary_title = {
						title = e_mongol_empire
					}
				}
			}

			has_power_omen_modifier_trigger = no
			has_battle_omen_modifier_trigger = no
		}
	}

	option = {
		name = EVTOPTC_60520

		trigger = {
			any_liege = {
				primary_title = {
					title = e_mongol_empire
				}
			}

			has_power_omen_modifier_trigger = no
			has_battle_omen_modifier_trigger = no
		}
	}

	# Scrying omen included
	option = {
		name = EVTOPTA_60520
		tooltip_info = yes

		trigger = {
			primary_title = {
				title = e_mongol_empire
			}

			OR = {
				has_power_omen_modifier_trigger = yes
				has_battle_omen_modifier_trigger = yes
			}
		}

		set_character_flag = negative_event_flag # For the scrying outcome calculation...
		calculate_scrying_outcome_effect = yes
		remove_scrying_omen_modifiers_effect = yes
	}

	option = {
		name = EVTOPTB_60520
		tooltip_info = yes

		trigger = {
			OR = {
				has_power_omen_modifier_trigger = yes
				has_battle_omen_modifier_trigger = yes
			}

			NOR = {
				primary_title = {
					title = e_mongol_empire
				}

				any_liege = {
					primary_title = {
						title = e_mongol_empire
					}
				}
			}
		}

		set_character_flag = negative_event_flag # For the scrying outcome calculation...
		calculate_scrying_outcome_effect = yes
		remove_scrying_omen_modifiers_effect = yes
	}

	option = {
		name = EVTOPTC_60520
		tooltip_info = yes

		trigger = {
			OR = {
				has_power_omen_modifier_trigger = yes
				has_battle_omen_modifier_trigger = yes
			}

			any_liege = {
				primary_title = {
					title = e_mongol_empire
				}
			}
		}

		set_character_flag = negative_event_flag # For the scrying outcome calculation...
		calculate_scrying_outcome_effect = yes
		remove_scrying_omen_modifiers_effect = yes
	}
}

# AI - reinforcement event for Genghis decision
character_event = {
	id = 60530

	hide_window = yes
	is_triggered_only = yes # become_genghis_khan in HL_decisions.txt

	immediate = {
		while = {
			count = 4

			spawn_unit = {
				province = capital_scope
				earmark = first_mongol_horde
				maintenance_multiplier = 0
				attrition = 0.1

				troops = {
					light_cavalry = { 2750 2750 }
					horse_archers = { 2250 2250 }
					knights = { 500 500 }
				}
			}
		}
	}
}

character_event = {
	id = 60531

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = { # If China exists - Invade it!
			limit = {
				offmap_china = {
					NOT = { has_status = china_mongol_invasion }

					offmap_ruler = {
						NOT = { dynasty = event_target:mongol_china_invader }
					}
				}
			}

			offmap_china = {
				if = {
					limit = { # Mongols take presedence over Jurchens/Civil War
						OR = {
							has_status = china_jurchen_invasion
							has_status = china_civil_war
						}
					}

					set_offmap_flag = no_status_news
					set_status = china_unrest
					set_offmap_flag = china_had_unrest
					clr_offmap_flag = no_status_news
				}

				governor = {
					offmap_china = {
						set_offmap_flag = no_status_news
						set_status = china_mongol_invasion
						set_offmap_flag = china_mongol_invasion
						clr_offmap_flag = no_status_news
					}

					any_player = {
						limit = {
							has_offmap_news_enabled = offmap_china
							is_within_diplo_range = PREV
						}

						narrative_event = { id = JD.50141 }
					}
				}
			}
		}
	}
}

# Plus events

# Prompt AI to use the manifest destiny CB
character_event = {
	id = 60209

	hide_window = yes

	only_independent = yes
	min_age = 16
	only_capable = yes
	prisoner = no
	ai = yes
	war = no

	trigger = {
		OR = {
			dynasty = 613 # Seljuks
			dynasty = 800 # Timurids
		}

		wealth >= 0
		mercenary = no
		is_tributary = no
		is_ill = no
		has_regent = no
		realm_size <= 150
		is_maimed_trigger = no
		is_inaccessible_trigger = no

		NOR = {
			trait = content
			trait = humble
			trait = craven
			trait = depressed
			trait = infirm
		}

		any_neighbor_independent_ruler = {
			reverse_realm_levy_diff = {
				who = ROOT
				value >= 10000
			}

			any_realm_title = {
				count = 3

				real_tier = COUNT

				kingdom = {
					capital_scope = {
						OR = {
							region = custom_persia
							region = custom_baluchistan
							region = custom_afghanistan
							region = custom_khwarizm
							region = custom_mesopotamia
							region = custom_azerbaijan
							region = custom_georgia
							region = custom_alania
							region = custom_armenia
							region = custom_trebizond
							region = custom_nikaea
							region = custom_syria
							region = custom_arabia
							region = custom_jerusalem
							region = custom_egypt
							region = custom_africa
						}
					}

					any_de_jure_vassal_title = {
						OR = {
							holder = ROOT

							location = {
								any_neighbor_province= {
									owned_by = ROOT
								}
							}
						}
					}
				}
			}

			NOR = {
				same_realm = ROOT
				reverse_has_truce = ROOT
				is_married = ROOT
				is_allied_with = ROOT
				has_non_aggression_pact_with = ROOT
				pays_tribute_to = ROOT
				ROOT = { rightful_religious_head = PREV }
			}

			reverse_opinion = {
				who = ROOT
				value < 0
			}
		}
	}

	mean_time_to_happen = {
		months = 12
	}

	immediate = {
		# First priority
		random_neighbor_independent_ruler = {
			limit = {
				shares_realm_border_with = ROOT

				reverse_realm_levy_diff = {
					who = ROOT
					value >= 10000
				}

				any_realm_title = {
					count = 3

					real_tier = COUNT

					kingdom = {
						capital_scope = {
							OR = {
								region = custom_persia
								region = custom_baluchistan
								region = custom_afghanistan
								region = custom_mesopotamia
							}
						}

						any_de_jure_vassal_title = {
							OR = {
								holder = ROOT

								location = {
									any_neighbor_province= {
										owned_by = ROOT
									}
								}
							}
						}
					}
				}

				NOR = {
					same_realm = ROOT
					reverse_has_truce = ROOT
					is_married = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					pays_tribute_to = ROOT
					ROOT = { rightful_religious_head = PREV }
				}

				reverse_opinion = {
					who = ROOT
					value < 0
				}
			}

			save_event_target_as = target_ruler

			random_realm_title = {
				limit = {
					real_tier = COUNT

					kingdom = {
						event_target:target_ruler = {
							num_of_realm_counties = {
								value = 3
								title = PREV
							}
						}

						capital_scope = {
							OR = {
								region = custom_persia
								region = custom_baluchistan
								region = custom_afghanistan
								region = custom_mesopotamia
							}
						}

						any_de_jure_vassal_title = {
							OR = {
								holder = ROOT

								location = {
									any_neighbor_province= {
										owned_by = ROOT
									}
								}
							}
						}
					}
				}

				kingdom = {
					ROOT = {
						war = {
							casus_belli = manifest_destiny_invasion
							target = PREVPREVPREV
							thirdparty_title = PREV
						}
					}
				}

				break = yes
			}
		}

		# Second priority
		random_neighbor_independent_ruler = {
			limit = {
				shares_realm_border_with = ROOT

				reverse_realm_levy_diff = {
					who = ROOT
					value >= 10000
				}

				any_realm_title = {
					count = 3

					real_tier = COUNT

					kingdom = {
						capital_scope = {
							OR = {
								region = custom_armenia
								region = custom_nikaea
								region = custom_syria
							}
						}

						any_de_jure_vassal_title = {
							OR = {
								holder = ROOT

								location = {
									any_neighbor_province = {
										owned_by = ROOT
									}
								}
							}
						}
					}
				}

				NOR = {
					same_realm = ROOT
					reverse_has_truce = ROOT
					is_married = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					pays_tribute_to = ROOT
					ROOT = { rightful_religious_head = PREV }
				}

				reverse_opinion = {
					who = ROOT
					value < 0
				}
			}

			save_event_target_as = target_ruler

			random_realm_title = {
				limit = {
					real_tier = COUNT

					kingdom = {
						event_target:target_ruler = {
							num_of_realm_counties = {
								value = 3
								title = PREV
							}
						}

						capital_scope = {
							OR = {
								region = custom_armenia
								region = custom_nikaea
								region = custom_syria
							}
						}

						any_de_jure_vassal_title = {
							OR = {
								holder = ROOT

								location = {
									any_neighbor_province = {
										owned_by = ROOT
									}
								}
							}
						}
					}
				}

				kingdom = {
					ROOT = {
						war = {
							casus_belli = manifest_destiny_invasion
							target = PREVPREVPREV
							thirdparty_title = PREV
						}
					}
				}

				break = yes
			}
		}

		# Third priority
		random_neighbor_independent_ruler = {
			limit = {
				reverse_realm_levy_diff = {
					who = ROOT
					value >= 10000
				}

				any_realm_title = {
					count = 3

					real_tier = COUNT

					kingdom = {
						capital_scope = {
							OR = {
								region = custom_azerbaijan
								region = custom_trebizond
								region = custom_arabia
								region = custom_jerusalem
								region = custom_egypt
							}
						}

						any_de_jure_vassal_title = {
							OR = {
								holder = ROOT

								location = {
									any_neighbor_province = {
										owned_by = ROOT
									}
								}
							}
						}
					}
				}

				NOR = {
					same_realm = ROOT
					reverse_has_truce = ROOT
					is_married = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					pays_tribute_to = ROOT
					ROOT = { rightful_religious_head = PREV }
				}

				reverse_opinion = {
					who = ROOT
					value < 0
				}
			}

			save_event_target_as = target_ruler

			random_realm_title = {
				limit = {
					real_tier = COUNT

					kingdom = {
						event_target:target_ruler = {
							num_of_realm_counties = {
								value = 3
								title = PREV
							}
						}

						capital_scope = {
							OR = {
								region = custom_azerbaijan
								region = custom_trebizond
								region = custom_arabia
								region = custom_jerusalem
								region = custom_egypt
							}
						}

						any_de_jure_vassal_title = {
							OR = {
								holder = ROOT

								location = {
									any_neighbor_province = {
										owned_by = ROOT
									}
								}
							}
						}
					}
				}

				kingdom = {
					ROOT = {
						war = {
							casus_belli = manifest_destiny_invasion
							target = PREVPREVPREV
							thirdparty_title = PREV
						}
					}
				}
			}
		}
	}
}

### MONGOL WAR EVENTS

# Use nomad invasion
character_event = {
	id = 60535

	hide_window = yes

	only_independent = yes
	culture = mongol
	min_age = 16
	only_capable = yes
	prisoner = no
	ai = yes
	war = no

	trigger = {
		OR = {
			has_landed_title = e_mongol_empire
			has_landed_title = e_golden_horde
			has_landed_title = e_il-khanate
		}

		is_nomadic = yes
		is_tributary = no
		prestige >= 500
		population_factor >= 0.9
		is_inaccessible_trigger = no

		trigger_if = {
			limit = { num_of_count_titles_in_realm >= 50 }
			has_landed_title = e_mongol_empire
		}

		any_neighbor_independent_ruler = {
			num_of_count_titles_in_realm >= 10

			reverse_realm_levy_diff = {
				who = ROOT
				value >= 10000
			}

			relative_power = {
				who = ROOT
				power < 3.0
			}

			any_realm_province = {
				any_neighbor_province = {
					owner = { same_realm = ROOT }
				}

				trigger_if = {
					limit = {
						ROOT = {
							NOT = { has_landed_title = e_mongol_empire }
						}
					}

					trigger_if = {
						limit = {
							ROOT = { has_landed_title = e_il-khanate }
						}

						OR = {
							region = world_europe_south_east
							region = world_asia_minor
							region = world_middle_east
							region = world_persia
						}
					}
					trigger_else = {
						ROOT = { has_landed_title = e_golden_horde }

						NOR = {
							region = world_europe_south_east
							region = world_asia_minor
							region = world_middle_east
							region = world_persia
						}
					}
				}

				NOT = { region = world_india }
			}

			NOR = {
				same_realm = ROOT
				reverse_has_truce = ROOT
				dynasty = ROOT
				is_allied_with = ROOT
				has_non_aggression_pact_with = ROOT
				is_married = ROOT
				pays_tribute_to = ROOT
			}

			reverse_opinion = {
				who = ROOT
				value < 25
			}
		}
	}

	mean_time_to_happen = {
		months = 12

		mult_modifier = {
			factor = 0.5
			num_of_count_titles_in_realm < 20
		}

		mult_modifier = {
			factor = 2
			num_of_count_titles_in_realm >= 35
		}
	}

	immediate = {
		random_neighbor_independent_ruler = {
			limit = {
				num_of_count_titles_in_realm >= 10

				reverse_realm_levy_diff = {
					who = ROOT
					value >= 10000
				}

				relative_power = {
					who = ROOT
					power < 3.0
				}

				any_realm_province = {
					any_neighbor_province = {
						owner = { same_realm = ROOT }
					}

					trigger_if = {
						limit = {
							ROOT = {
								NOT = { has_landed_title = e_mongol_empire }
							}
						}

						trigger_if = {
							limit = {
								ROOT = { has_landed_title = e_il-khanate }
							}

							OR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
						trigger_else = {
							ROOT = { has_landed_title = e_golden_horde }

							NOR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
					}

					NOT = { region = world_india }
				}

				NOR = {
					same_realm = ROOT
					reverse_has_truce = ROOT
					dynasty = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					is_married = ROOT
					pays_tribute_to = ROOT
				}

				reverse_opinion = {
					who = ROOT
					value < 25
				}
			}

			random_realm_province = {
				limit = {
					any_neighbor_province = {
						owner = { same_realm = ROOT }
					}

					trigger_if = {
						limit = {
							ROOT = {
								NOT = { has_landed_title = e_mongol_empire }
							}
						}

						trigger_if = {
							limit = {
								ROOT = { has_landed_title = e_il-khanate }
							}

							OR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
						trigger_else = {
							ROOT = { has_landed_title = e_golden_horde }

							NOR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
					}

					NOT = { region = world_india }
				}

				kingdom = {
					ROOT = {
						war = {
							casus_belli = nomad_invasion
							target = PREVPREVPREV # The top liege of the owner
							thirdparty_title = PREV # The de jure kingdom
						}
					}
				}
			}
		}
	}
}

# Use nomad expansion
character_event = {
	id = 60536

	hide_window = yes

	only_independent = yes
	culture = mongol
	min_age = 16
	only_capable = yes
	prisoner = no
	ai = yes
	war = no

	trigger = {
		OR = {
			has_landed_title = e_mongol_empire
			has_landed_title = e_golden_horde
			has_landed_title = e_il-khanate
		}

		is_nomadic = yes
		is_tributary = no
		prestige >= 200
		population_factor = 0.9
		is_inaccessible_trigger = no

		trigger_if = {
			limit = { num_of_count_titles_in_realm >= 50 }
			has_landed_title = e_mongol_empire
		}

		any_neighbor_independent_ruler = {
			reverse_realm_levy_diff = {
				who = ROOT
				value >= 10000
			}

			relative_power = {
				who = ROOT
				power < 3.0
			}

			any_realm_province = {
				any_neighbor_province = {
					owner = { same_realm = ROOT }
				}

				trigger_if = {
					limit = {
						ROOT = {
							NOT = { has_landed_title = e_mongol_empire }
						}
					}

					trigger_if = {
						limit = {
							ROOT = { has_landed_title = e_il-khanate }
						}

						OR = {
							region = world_europe_south_east
							region = world_asia_minor
							region = world_middle_east
							region = world_persia
						}
					}
					trigger_else = {
						ROOT = { has_landed_title = e_golden_horde }

						NOR = {
							region = world_europe_south_east
							region = world_asia_minor
							region = world_middle_east
							region = world_persia
						}
					}
				}

				NOT = { region = world_india }
			}

			NOR = {
				same_realm = ROOT
				reverse_has_truce = ROOT
				dynasty = ROOT
				is_allied_with = ROOT
				has_non_aggression_pact_with = ROOT
				is_married = ROOT
				reverse_opinion = { who = ROOT value = 25 }
				pays_tribute_to = ROOT
			}
		}
	}

	mean_time_to_happen = {
		months = 24

		mult_modifier = {
			factor = 0.5
			num_of_count_titles_in_realm < 20
		}

		mult_modifier = {
			factor = 2
			num_of_count_titles_in_realm >= 35
		}
	}

	immediate = {
		random_neighbor_independent_ruler = {
			limit = {
				reverse_realm_levy_diff = {
					who = ROOT
					value >= 10000
				}

				relative_power = {
					who = ROOT
					power <= 3.0
				}

				any_realm_province = {
					any_neighbor_province = {
						owner = { same_realm = ROOT }
					}

					trigger_if = {
						limit = {
							ROOT = {
								NOT = { has_landed_title = e_mongol_empire }
							}
						}

						trigger_if = {
							limit = {
								ROOT = { has_landed_title = e_il-khanate }
							}

							OR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
						trigger_else = {
							ROOT = { has_landed_title = e_golden_horde }

							NOR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
					}

					NOT = { region = world_india }
				}

				NOR = {
					same_realm = ROOT
					reverse_has_truce = ROOT
					dynasty = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					is_married = ROOT
					pays_tribute_to = ROOT
				}

				reverse_opinion = {
					who = ROOT
					value < 25
				}
			}

			random_realm_province = {
				limit = {
					any_neighbor_province = {
						owner = { same_realm = ROOT }
					}

					trigger_if = {
						limit = {
							ROOT = {
								NOT = { has_landed_title = e_mongol_empire }
							}
						}

						trigger_if = {
							limit = {
								ROOT = { has_landed_title = e_il-khanate }
							}

							OR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
						trigger_else = {
							ROOT = { has_landed_title = e_golden_horde }

							NOR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
					}

					NOT = { region = world_india }
				}

				duchy = {
					ROOT = {
						war = {
							casus_belli = nomad_expansion
							target = PREVPREVPREV # The top liege of the owner
							thirdparty_title = PREV # The de jure duchy
						}
					}
				}
			}
		}
	}
}

# Use tribal invasion
character_event = {
	id = 60537

	hide_window = yes

	only_independent = yes
	culture = mongol
	lacks_dlc = "Horse Lords"
	min_age = 16
	only_capable = yes
	prisoner = no
	ai = yes
	war = no

	trigger = {
		OR = {
			has_landed_title = e_mongol_empire
			has_landed_title = e_golden_horde
			has_landed_title = e_il-khanate
		}

		is_nomadic = no
		is_tributary = no
		prestige >= 500
		is_inaccessible_trigger = no
		NOT = { religion_group = christian }

		trigger_if = {
			limit = { num_of_count_titles_in_realm >= 50 }
			has_landed_title = e_mongol_empire
		}

		any_neighbor_independent_ruler = {
			reverse_realm_levy_diff = {
				who = ROOT
				value >= 10000
			}

			relative_power = {
				who = ROOT
				power < 3.0
			}

			any_realm_province = {
				any_neighbor_province = {
					owner = { same_realm = ROOT }
				}

				trigger_if = {
					limit = {
						ROOT = {
							NOT = { has_landed_title = e_mongol_empire }
						}
					}

					trigger_if = {
						limit = {
							ROOT = { has_landed_title = e_il-khanate }
						}

						OR = {
							region = world_europe_south_east
							region = world_asia_minor
							region = world_middle_east
							region = world_persia
						}
					}
					trigger_else = {
						ROOT = { has_landed_title = e_golden_horde }

						NOR = {
							region = world_europe_south_east
							region = world_asia_minor
							region = world_middle_east
							region = world_persia
						}
					}
				}

				NOT = { region = world_india }
			}

			NOR = {
				same_realm = ROOT
				reverse_has_truce = ROOT
				dynasty = ROOT
				is_allied_with = ROOT
				has_non_aggression_pact_with = ROOT
				is_married = ROOT
				pays_tribute_to = ROOT
			}

			reverse_opinion = {
				who = ROOT
				value < 25
			}
		}
	}

	mean_time_to_happen = {
		months = 12

		mult_modifier = {
			factor = 0.5
			num_of_count_titles_in_realm < 20
		}

		mult_modifier = {
			factor = 2
			num_of_count_titles_in_realm >= 35
		}
	}

	immediate = {
		random_neighbor_independent_ruler = {
			limit = {
				reverse_realm_levy_diff = {
					who = ROOT
					value = 10000
				}

				relative_power = {
					who = ROOT
					power < 3.0
				}

				any_realm_province = {
					any_neighbor_province = {
						owner = { same_realm = ROOT }
					}

					trigger_if = {
						limit = {
							ROOT = {
								NOT = { has_landed_title = e_mongol_empire }
							}
						}

						trigger_if = {
							limit = {
								ROOT = { has_landed_title = e_il-khanate }
							}

							OR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
						trigger_else = {
							ROOT = { has_landed_title = e_golden_horde }

							NOR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
					}

					NOT = { region = world_india }
				}

				NOR = {
					same_realm = ROOT
					reverse_has_truce = ROOT
					dynasty = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					is_married = ROOT
					pays_tribute_to = ROOT
				}

				reverse_opinion = {
					who = ROOT
					value < 25
				}
			}

			random_realm_province = {
				limit = {
					any_neighbor_province = {
						owner = { same_realm = ROOT }
					}

					trigger_if = {
						limit = {
							ROOT = {
								NOT = { has_landed_title = e_mongol_empire }
							}
						}

						trigger_if = {
							limit = {
								ROOT = { has_landed_title = e_il-khanate }
							}

							OR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
						trigger_else = {
							ROOT = { has_landed_title = e_golden_horde }

							NOR = {
								region = world_europe_south_east
								region = world_asia_minor
								region = world_middle_east
								region = world_persia
							}
						}
					}

					NOT = { region = world_india }
				}

				kingdom = {
					ROOT = {
						war = {
							casus_belli = tribal_invasion
							target = PREVPREVPREV # The top liege of the owner
							thirdparty_title = PREV # The de jure kingdom
						}
					}
				}
			}
		}
	}
}

##################################
# Rise of the Sultanate of Rum
##################################

# A Turkic character wants a foothold in Armenia
character_event = {
	id = 60600

	hide_window = yes # Only fires for unplayable landless characters

	religion_group = muslim
	culture_group = altaic
	only_men = yes
	min_age = 16
	max_age = 50
	only_capable = yes
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				has_game_rule = {
					name = turkic_invasions
					value = historical
				}
			}

			year >= 1000
			year < 1200
		}
		trigger_else = {
			has_game_rule = {
				name = turkic_invasions
				value = random
			}
			year >= 809
			year < 1200
		}

		is_ruler = no

		OR = {
			AND = {
				martial >= 9
				diplomacy >= 5
				health >= 4
			}

			has_character_flag = demon_child_non_pagan
		}

		father_even_if_dead = { # Is of a noble house
			always = yes
		}

		liege = {
			culture_group = altaic

			capital_scope = {
				kingdom = {
					OR = {
						title = k_mesopotamia
						title = k_persia
						title = k_syria
						title = k_armenia
					}
				}
			}
		}

		NOR = {
			trait = content
			trait = craven

			any_spouse = {
				is_ruler = yes
			}

			# Somewhat clunky way of checking that the character does not stand to inherit any titles
			any_heir_title = {
				always = yes
			}
			has_global_flag = rum_spawned

			has_game_rule = {
				name = turkic_invasions
				value = off
			}
		}

		trigger_if = { # Pacing mechanic, we don't want too many adventurers to spawn at once
			limit = { has_global_flag = rum_invader_spawned }

			had_global_flag = {
				flag = rum_invader_spawned
				years >= 10
			}
		}

		trigger_if = {
			limit = { has_global_flag = rum_spawning }

			had_global_flag = {
				flag = rum_spawning
				years >= 4
			}
		}
	}

	mean_time_to_happen = {
		months = 120

		mult_modifier = {
			factor = 20
			NOT = { dynasty = 613 } # Seljuk
		}

		mult_modifier = {
			factor = 0.5
			culture = turkish
		}

		mult_modifier = {
			factor = 0.5
			has_character_flag = flag_denied_title
		}

		mult_modifier = {
			factor = 0.01
			has_character_flag = demon_child_non_pagan
		}

		mult_modifier = {
			factor = 3.0
			trait = slothful
		}

		mult_modifier = {
			factor = 3.0
			trait = humble
		}

		mult_modifier = {
			factor = 3.0
			trait = kind
		}
	}

	immediate = {
		set_global_flag = rum_invader_spawned

		random_independent_ruler = {
			limit = {
				any_realm_province = {
					OR = {
						kingdom = {
							title = k_armenia
						}

						duchy = {
							title = d_azerbaijan
						}
					}
				}

				is_landed = yes
				in_revolt = no

				ROOT = {
					liege = {
						NOT = { war_with = PREVPREV }
					}
				}

				NOR = {
					same_realm = ROOT
					religion_group = muslim
				}
			}

			random_realm_province = {
				limit = {
					OR = {
						kingdom = {
							title = k_armenia
						}

						duchy = {
							title = d_azerbaijan
						}
					}
				}

				save_event_target_as = target_province

				ROOT = {
					opinion = {
						name = opinion_duchy_adventure_target
						who = PREVPREV
						years = 3
					}

					add_character_modifier = {
						name = planning_duchy_adventure
						hidden = yes
						years = 2
					}

					character_event = {
						id = 60603 # Fire the attack
						days = 730
					}

					set_global_flag = rum_spawning
					end_inaccessibility_effect = yes # removes in hiding or in_seclusion
					set_character_flag = do_not_disturb

					character_event = {
						id = 60602 # Safety clear of 'do not disturb'
						days = 730
					}
				}

				PREV = {
					character_event = {
						id = 60601 # Warn the target
					}
				}
			}
		}
	}
}

# Warn the target
character_event = {
	id = 60601
	desc = EVTDESC_TOG_1211
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	immediate = {
		opinion = {
			name = opinion_targeted_by_adventurer
			who = FROM
			years = 2
		}
	}

	option = {
		name = EVTOPTA_TOG_1211
	}
}

# Safety clear of DND
character_event = {
	id = 60602

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		remove_do_not_disturb_effect = yes
	}
}

# Launch the attack!
character_event = {
	id = 60603

	hide_window = yes
	is_triggered_only = yes

	prisoner = no
	only_capable = yes

	trigger = {
		is_ruler = no

		NOT = {
			any_spouse = {
				is_ruler = yes
			}

			any_heir_title = {
				always = yes
			}
		}

		event_target:target_province = {
			owner = {
				top_liege = {
					is_landed = yes
					independent = yes

					NOR = {
						same_realm = ROOT
						religion_group = muslim
					}
				}
			}
		}
	}

	immediate = {
		wealth = 500
		remove_do_not_disturb_effect = yes
		set_character_flag = rum_creator

		liege = {
			character_event = {
				id = 60604
				days = 1
			}

			capital_scope = {
				event_target:target_province = {
					top_liege = {
						ROOT = {
							set_defacto_liege = ROOT

							create_title = {
								tier = DUKE
								landless = yes
								temporary = yes
								adventurer = yes
								culture = ROOT
								name = CLAIMANT_ADVENTURE
								holder = ROOT
							}

							set_character_flag = duchy_adventurer

							while = {
								count = 3

								spawn_unit = {
									province = PREVPREVPREV
									home = PREVPREVPREV
									owner = THIS
									match_character = PREV
									match_mult = 0.25
									match_min = 2000
									match_max = 10000
									attrition = 0.25
								}

								spawn_unit = {
									province = PREVPREVPREV
									home = PREVPREVPREV
									owner = THIS
									match_character = PREV
									match_mult = 0.25
									match_min = 2000
									match_max = 10000
									attrition = 0.25
									cannot_inherit = yes
								}
							}

							war = {
								target = PREV
								casus_belli = duchy_adventure
								thirdparty_title = PREVPREV
								tier = DUKE
							}

							remove_opinion = {
								who = PREV
								name = opinion_duchy_adventure_target
							}
						}
					}
				}
			}
		}

		# Create some decent commander characters
		while = {
			count = 4

			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 19
			}

			new_character = {
				random_list = {
					1 = { add_age = 0 }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
					1 = { add_age = 8 }
					1 = { add_age = 9 }
					1 = { add_age = 10 }
					1 = { add_age = 11 }
				}
			}
		}

		clr_global_flag = rum_spawning
		set_global_flag = rum_spawned
	}
}

character_event = {
	id = 60604
	desc = EVTDESC_TOG_1213
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	trigger = {
		FROM = {
			is_ruler = yes # The DoW worked and the adventurer has a temporary title
		}
	}

	immediate = {
		FROM = {
			add_trait = adventurer
		}

		any_liege = {
			character_event = { id = 60605 }
		}
	}

	option = {
		name = EVTOPTA_TOG_1203
	}
}

character_event = {
	id = 60605
	desc = EVTDESC_TOG_1214
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	show_from_from = yes
	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_1203
	}
}

#######################################
# Stage 2 (Armenia) and 3 (Anatolia)
# Fired from CB 'duchy_adventure' or 'kingdom_adventure'
#######################################
character_event = {
	id = 60610

	is_triggered_only = yes
	hide_window = yes

	ai = yes

	immediate = {
		if = {
			limit = {
				independent = yes
				war = no
			}

			# Use custom regions for this?
			if = {
				limit = {
					k_armenia = {
						any_de_jure_vassal_title = {
							tier = COUNT

							holder_scope = {
								top_liege = {
									in_revolt = no
									is_landed = yes

									NOR = {
										religion_group = muslim
										reverse_has_truce = ROOT
									}
								}
							}
						}
					}
				}

				k_armenia = {
					any_de_jure_vassal_title = {
						limit = {
							tier = COUNT

							holder_scope = {
								top_liege = {
									in_revolt = no
									is_landed = yes

									NOR = {
										religion_group = muslim
										reverse_has_truce = ROOT
									}
								}
							}
						}

						count = 1

						holder_scope = {
							top_liege = {
								ROOT = {
									while = {
										count = 3

										spawn_unit = {
											province = capital_scope
											home = capital_scope
											owner = THIS
											match_character = PREV
											match_mult = 0.25
											match_min = 2000
											match_max = 10000
											attrition = 0.1
										}
									}

									war = {
										target = PREV
										casus_belli = kingdom_adventure
										thirdparty_title = PREVPREVPREVPREV
										tier = KING
									}
								}
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					k_anatolia = {
						any_de_jure_vassal_title = {
							tier = COUNT

							holder_scope = {
								top_liege = {
									has_landed_title = e_byzantium

									NOR = {
										religion_group = muslim
										reverse_has_truce = ROOT
									}
								}
							}
						}
					}
				}

				k_anatolia = {
					any_de_jure_vassal_title = {
						limit = {
							tier = COUNT

							holder_scope = {
								top_liege = {
									has_landed_title  = e_byzantium

									NOR = {
										religion_group = muslim
										reverse_has_truce = ROOT
									}
								}
							}
						}

						count = 1

						holder_scope = {
							top_liege = {
								ROOT = {
									while = {
										count = 3

										spawn_unit = {
											province = capital_scope
											home = capital_scope
											owner = THIS
											match_character = PREV
											match_mult = 0.25
											match_min = 2000
											match_max = 10000
											attrition = 0.21
										}
									}

									war = {
										target = PREV
										casus_belli = kingdom_adventure
										thirdparty_title = PREVPREVPREVPREV
										tier = KING
									}
								}
							}
						}
					}
				}
			}
			else = {
				# Try again in a month
				repeat_event = {
					id = 60610
					days = 30
				}
			}
		}
	}
}

# Plus events

# Genghis Khan dies with a large enough empire to split up among sons
narrative_event = {
	id = 60002
	title = EVTNAME60002
	picture = GFX_evt_mongols

	desc = {
		text = EVTDESC60002A
		trigger = {
			ROOT = { has_character_flag = has_third_son }
		}
	}
	desc = {
		text = EVTDESC60002B
		trigger = {
			ROOT = { NOT = { has_character_flag = has_third_son } }
		}
	}

	is_triggered_only = yes
	major = yes

	only_independent = yes
	culture = mongol
	only_capable = yes
	min_age = 16
	prisoner = no

	trigger = {
		always = no
		has_landed_title = e_mongol_empire

		any_realm_title = {
			tier = COUNT

			location = {
				OR = {
					region = custom_cuman

					duchy = {
						title = d_khwarizmian
					}
				}
			}
		}

		any_realm_title = {
			tier = COUNT

			location = {
				OR = {
					region = custom_persia

					duchy = {
						title = d_dihistan
					}
				}
			}
		}

		any_realm_title = {
			tier = COUNT

			location = {
				region = custom_khwarizm

				duchy = {
					NOR = {
						title = d_khwarizmian
						title = d_dihistan
					}
				}
			}
		}

		any_child = {
			count = 2

			is_female = no
			NOT = { trait = bastard }
		}
	}

	immediate = {
		# Attempt to give titles to historical people
		random_child = {
			limit = {
				is_alive = yes
				has_character_flag = is_jochi_khan
			}

			save_event_target_as = first_mongol_son
			ROOT = { set_character_flag = jochi_exists }
		}

		if = {
			limit = {
				has_character_flag = is_genghis_khan
				NOT = { has_character_flag = jochi_exists }
			}

			random_realm_character = {
				limit = {
					has_character_flag = son_of_jochi_khan

					NOR = {
						trait = bastard

						any_sibling = {
							NOT = { trait = bastard }
							is_older_than = PREV
						}
					}
				}

				save_event_target_as = first_mongol_son
				ROOT = { set_character_flag = jochi_exists }
			}
		}

		random_child = {
			limit = {
				is_alive = yes
				has_character_flag = is_tolui_khan
			}

			save_event_target_as = second_mongol_son
			ROOT = { set_character_flag = tolui_exists }
		}

		random_child = {
			limit = {
				is_alive = yes
				has_character_flag = is_chagatai_khan

				ROOT = {
					any_child = {
						count = 2
						is_female = no

						NOR = {
							trait = bastard
							has_character_flag = is_chagatai_khan
						}
					}
				}
			}

			save_event_target_as = third_mongol_son
			ROOT = { set_character_flag = has_third_son }
		}

		# Otherwise assign areas to children
		if = {
			limit = { NOT = { has_character_flag = jochi_exists } }

			# Give Golden Horde to a son/grandson who's already a king in Cuman
			random_vassal = {
				limit = {
					real_tier = KING

					capital_scope = {
						region = custom_cuman
					}

					OR = {
						is_child_of = ROOT

						father_even_if_dead = {
							is_alive = no
							is_child_of = ROOT
						}
					}

					NOR = {
						trait = bastard
						character = event_target:second_mongol_son
						character = event_target:third_mongol_son
					}
				}

				save_event_target_as = first_mongol_son
				ROOT = { set_character_flag = jochi_exists }
			}
		}

		if = {
			limit = { NOT = { has_character_flag = jochi_exists } }

			# Give Golden Horde to a son who's already a duke in cuman
			random_realm_lord = {
				limit = {
					real_tier = DUKE
					is_child_of = ROOT
					is_female = no

					capital_scope = {
						region = custom_cuman
					}

					NOR = {
						trait = bastard
						character = event_target:second_mongol_son
						character = event_target:third_mongol_son
					}
				}

				save_event_target_as = first_mongol_son
				ROOT = { set_character_flag = jochi_exists }
			}
		}

		if = {
			limit = { NOT = { has_character_flag = jochi_exists } }

			# Otherwise give Golden Horde to eldest available son
			random_child = {
				limit = {
					is_female = no
					is_alive = yes

					NOR = {
						trait = bastard
						character = event_target:second_mongol_son
						character = event_target:third_mongol_son

						any_sibling = {
							is_older_than = PREV

							NOR = {
								trait = bastard
								character = event_target:second_mongol_son
								character = event_target:third_mongol_son
							}
						}
					}
				}

				save_event_target_as = first_mongol_son
			}
		}

		if = {
			limit = { NOT = { has_character_flag = tolui_exists } }

			# Give Ilkhanate to a son/grandson who's already a king in {ersia
			random_vassal = {
				limit = {
					real_tier = KING

					capital_scope = {
						region = custom_persia
					}

					OR = {
						is_child_of = ROOT

						father_even_if_dead = {
							is_alive = no
							is_child_of = ROOT
						}
					}

					NOR = {
						trait = bastard
						character = event_target:first_mongol_son
						character = event_target:third_mongol_son
					}
				}

				save_event_target_as = second_mongol_son
				ROOT = { set_character_flag = tolui_exists }
			}
		}

		if = {
			limit = { NOT = { has_character_flag = tolui_exists } }

			# Give Ilkhanate to a son who's already a duke in Persia
			random_realm_lord = {
				limit = {
					is_child_of = ROOT
					real_tier = DUKE
					is_female = no

					capital_scope = {
						region = custom_persia
					}

					NOR = {
						trait = bastard
						character = event_target:first_mongol_son
						character = event_target:third_mongol_son
					}
				}

				save_event_target_as = second_mongol_son
				ROOT = { set_character_flag = tolui_exists }
			}
		}

		if = {
			limit = { NOT = { has_character_flag = tolui_exists } }

			# Otherwise give Ilkhanate to eldest available son
			random_child = {
				limit = {
					is_alive = yes
					is_female = no

					NOR = {
						trait = bastard
						character = event_target:first_mongol_son
						character = event_target:third_mongol_son

						any_sibling = {
							is_older_than = PREV

							NOR = {
								trait = bastard
								character = event_target:first_mongol_son
								character = event_target:third_mongol_son
							}
						}
					}
				}
				save_event_target_as = second_mongol_son
			}
		}

		if = {
			limit = {
				NOT = { has_character_flag = has_third_son }

				any_child = {
					is_alive = yes
					is_female = no

					NOR = {
						trait = bastard
						character = event_target:first_mongol_son
						character = event_target:second_mongol_son
					}
				}
			}

			# Give Chagatai to son/grandson who's already a king in Khwarizm
			random_vassal = {
				limit = {
					real_tier = KING

					capital_scope = {
						region = custom_khwarizm
					}

					OR = {
						is_child_of = ROOT

						father_even_if_dead = {
							is_alive = no
							is_child_of = ROOT
						}
					}

					NOR = {
						trait = bastard
						character = event_target:first_mongol_son
						character = event_target:second_mongol_son
					}
				}

				save_event_target_as = third_mongol_son
				ROOT = { set_character_flag = has_third_son }
			}
		}

		if = {
			limit = {
				NOT = { has_character_flag = has_third_son }

				any_child = {
					is_alive = yes
					is_female = no

					NOR = {
						trait = bastard
						character = event_target:first_mongol_son
						character = event_target:second_mongol_son
					}
				}
			}

			# Give Chagatai to son who's already a duke in Khwarizm
			random_realm_lord = {
				limit = {
					is_child_of = ROOT
					real_tier = DUKE
					is_female = no

					capital_scope = {
						region = custom_khwarizm
					}

					NOR = {
						trait = bastard
						character = event_target:first_mongol_son
						character = event_target:second_mongol_son
					}
				}

				save_event_target_as = third_mongol_son
				ROOT = { set_character_flag = has_third_son }
			}
		}

		if = {
			limit = {
				NOT = { has_character_flag = has_third_son }

				any_child = {
					is_alive = yes
					is_female = no

					NOR = {
						trait = bastard
						character = event_target:first_mongol_son
						character = event_target:second_mongol_son
					}
				}
			}

			# Otherwise give Chagatai to eldest available son
			random_child = {
				limit = {
					is_female = no
					is_alive = yes

					NOR = {
						trait = bastard
						character = event_target:first_mongol_son
						character = event_target:second_mongol_son

						any_sibling = {
							is_older_than = PREV

							NOR = {
								trait = bastard
								character = event_target:first_mongol_son
								character = event_target:second_mongol_son
							}
						}
					}
				}

				save_event_target_as = third_mongol_son
				ROOT = { set_character_flag = has_third_son }
			}
		}

		clr_character_flag = jochi_exists
		clr_character_flag = tolui_exists

		# Stop any wars and disband the initial mongol forces
		any_war = {
			limit = {
				OR = {
					attacker = { character = ROOT }
					defender = { character = ROOT }
				}
			}
			end_war = invalid
		}

		disband_event_forces = first_mongol_horde

		if = {
			limit = { has_character_flag = has_third_son }
			current_heir = { set_character_flag = has_third_son }
		}

		current_heir = {
			character_event = {
				id = 60005
				days = 1
			}
		}
	}

	option = {
		name = EVTOPTA60002

		trigger = { character = ROOT }
	}

	option = {
		name = EVTOPTB60002

		trigger = {
			OR = {
				culture = mongol
				same_realm = ROOT
			}

			NOT = { character = ROOT }
		}
	}

	option = {
		name = EVTOPTC60002

		trigger = {
			NOR = {
				character = ROOT
				culture = mongol
				same_realm = ROOT
			}
		}
	}
}

# Children/vassals/courtiers are given the option to serve one of the sons
character_event = {
	id = 60003
	picture = GFX_evt_tengri_throneroom_oldgods

	desc = {
		text = EVTDESC60003A
		trigger = { FROM = { has_character_flag = has_third_son } }
	}
	desc = {
		text = EVTDESC60003B
		trigger = { FROM = { NOT = { has_character_flag = has_third_son } } }
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTA60003 # Join Golden Horde

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 0.1

				is_ruler = yes

				NOT = {
					any_neighbor_independent_ruler = {
						has_landed_title = e_golden_horde
					}
				}
			}

			mult_modifier = {
				factor = 3

				opinion_diff = {
					first = event_target:first_mongol_son
					second = event_target:second_mongol_son
					value >= 10
					as_if_liege = yes
				}

				OR = {
					FROM = { NOT = { has_character_flag = has_third_son } }

					opinion_diff = {
						first = event_target:first_mongol_son
						second = event_target:third_mongol_son
						value >= 10
						as_if_liege = yes
					}
				}
			}

			mult_modifier = {
				factor = 2

				is_ruler = yes

				event_target:first_mongol_son = {
					any_realm_province = {
						ROOT = {
							capital_scope = {
								distance = {
									where = PREVPREV
									value >= 200
								}
							}
						}
					}
				}
			}
		}

		if = {
			limit = { is_ruler = no }

			any_spouse = {
				limit = {
					prisoner = no
					is_ruler = no
				}
				move_character = event_target:first_mongol_son
			}

			any_child = {
				limit = {
					prisoner = no
					is_adult = no
					is_ruler = no
				}
				move_character = event_target:first_mongol_son
			}

			move_character = event_target:first_mongol_son
		}

		if = {
			limit = { is_ruler = yes }
			set_defacto_liege = event_target:first_mongol_son
		}

		opinion = {
			name = opinion_loyal_vassal
			who = event_target:first_mongol_son
			years = 5
		}
	}

	option = {
		name = EVTOPTB60003 # Join Ilkhanate

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 0.1

				is_ruler = yes

				NOT = {
					any_neighbor_independent_ruler = {
						has_landed_title = e_il-khanate
					}
				}
			}

			mult_modifier = {
				factor = 3

				opinion_diff = {
					first = event_target:second_mongol_son
					second = event_target:first_mongol_son
					value >= 10
					as_if_liege = yes
				}

				OR = {
					FROM = { NOT = { has_character_flag = has_third_son } }

					opinion_diff = {
						first = event_target:second_mongol_son
						second = event_target:third_mongol_son
						value >= 10
						as_if_liege = yes
					}
				}
			}

			mult_modifier = {
				factor = 2

				is_ruler = yes

				event_target:second_mongol_son = {
					any_realm_province = {
						ROOT = {
							capital_scope = {
								distance = {
									where = PREVPREV
									value >= 200
								}
							}
						}
					}
				}
			}
		}

		if = {
			limit = { is_ruler = no }

			any_spouse = {
				limit = {
					prisoner = no
					is_ruler = no
				}

				move_character = event_target:second_mongol_son
			}

			any_child = {
				limit = {
					prisoner = no
					is_adult = no
					is_ruler = no
				}

				move_character = event_target:second_mongol_son
			}

			move_character = event_target:second_mongol_son
		}

		if = {
			limit = { is_ruler = yes }
			set_defacto_liege = event_target:second_mongol_son
		}

		opinion = {
			name = opinion_loyal_vassal
			who = event_target:second_mongol_son
			years = 5
		}
	}

	option = {
		name = EVTOPTC60003 # Join Chagatai

		trigger = {
			FROM = { has_character_flag = has_third_son }
		}

		ai_chance = {
			factor = 50

			modifier = {
				factor = 0.1

				is_ruler = yes

				NOT = {
					any_neighbor_independent_ruler = {
						has_landed_title = e_chagatai
					}
				}
			}

			modifier = {
				factor = 3

				opinion_diff = {
					first = event_target:third_mongol_son
					second = event_target:first_mongol_son
					value >= 10
					as_if_liege = yes
				}

				opinion_diff = {
					first = event_target:third_mongol_son
					second = event_target:second_mongol_son
					value >= 10
					as_if_liege = yes
				}
			}

			modifier = {
				factor = 2

				is_ruler = yes

				event_target:third_mongol_son = {
					any_realm_province = {
						ROOT = {
							capital_scope = {
								distance = {
									where = PREVPREV
									value >= 200
								}
							}
						}
					}
				}
			}
		}

		if = {
			limit = { is_ruler = no }

			any_spouse = {
				limit = {
					prisoner = no
					is_ruler = no
				}

				move_character = event_target:third_mongol_son
			}

			any_child = {
				limit = {
					prisoner = no
					is_adult = no
					is_ruler = no
				}

				move_character = event_target:third_mongol_son
			}

			move_character = event_target:third_mongol_son
		}

		if = {
			limit = { is_ruler = yes }
			set_defacto_liege = event_target:third_mongol_son
		}

		opinion = {
			name = opinion_loyal_vassal
			who = event_target:third_mongol_son
			years = 5
		}
	}
}

# Sons are informed of the Mongol Empire division
character_event = {
	id = 60004
	desc = EVTDESC60004
	picture = GFX_evt_tengri_throneroom_oldgods

	is_triggered_only = yes

	immediate = {
		# Son will immediately form a cadet dynasty
		FROMFROM = {
			save_event_target_as = old_dynasty_head
		}

		any_dynasty_member = {
			limit = {
				OR = {
					is_child_of = ROOT
					mother_even_if_dead = { is_child_of = ROOT }
					father_even_if_dead = { is_child_of = ROOT }
				}
			}

			character_event = {
				id = Plus.142
				days = 1
			}
		}

		dynasty = father_bastard

		if = {
			limit = {
				OR = {
					has_character_flag = is_jochi_khan

					AND = {
						has_character_flag = son_of_jochi_khan

						NOT = {
							any_independent_ruler = {
								has_character_flag = son_of_jochi_khan
								NOT = { character = ROOT }
							}
						}
					}
				}
			}

			dynasty = 7379
		}

		if = {
			limit = {
				OR = {
					has_character_flag = is_chagatai_khan

					AND = {
						has_character_flag = son_of_chagatai_khan

						NOT = {
							any_independent_ruler = {
								has_character_flag = son_of_chagatai_khan
								NOT = { character = ROOT }
							}
						}
					}
				}
			}

			dynasty = 7380
		}

		if = {
			limit = {
				OR = {
					has_character_flag = is_tolui_khan

					AND = {
						has_character_flag = son_of_tolui_khan

						NOT = {
							any_independent_ruler = {
								has_character_flag = son_of_tolui_khan
								NOT = { character = ROOT }
							}
						}
					}
				}
			}

			dynasty = 101916
		}

		if = {
			limit = {
				OR = {
					has_character_flag = is_ogodei_khan

					AND = {
						has_character_flag = son_of_ogodei_khan

						NOT = {
							any_independent_ruler = {
								has_character_flag = son_of_ogodei_khan
								NOT = { character = ROOT }
							}
						}
					}
				}
			}

			dynasty = 1000124389
		}

		if = {
			limit = { ai = no }

			chronicle = {
				entry = CHRONICLE_CADET_BRANCH
				portrait = [Root.GetID]
				picture = GFX_evt_coronation
			}
		}

		# Move capital to de jure capital, if possible
		if = {
			limit = {
				primary_title = {
					capital_scope = {
						owned_by = ROOT
						is_capital = no
						county = { is_feudal = yes }
					}
				}
			}

			primary_title = {
				capital_scope = {
					county = {
						ROOT = {
							capital = PREV
						}
					}
				}
			}
		}

		# Move tribal capital to feudal one, if de jure capital not held
		else_if = {
			limit = {
				is_feudal = no

				any_demesne_title = {
					tier = COUNT
					is_feudal = yes
				}
			}

			random_demesne_title = {
				limit = {
					tier = COUNT
					is_feudal = yes
				}

				ROOT = {
					capital = PREV
				}
			}
		}

		# Change succession to gavelkind if still tribal
		if = {
			limit = { is_tribal = yes }

			primary_title = {
				add_law = succ_gavelkind
			}
		}
	}

	option = {
		name = EVTOPTA60004

		trigger = { has_landed_title = e_golden_horde }

		set_global_flag = golden_horde_arrival
		custom_tooltip = { text = ESTABLISH_CADET_BRANCH }

		# Lose all claims held by the other hordes
		any_claim = {
			limit = {
				holder_scope = {
					OR = {
						has_landed_title = e_il-khanate
						has_landed_title = e_chagatai

						top_liege = {
							OR = {
								has_landed_title = e_il-khanate
								has_landed_title = e_chagatai
							}
						}
					}
				}
			}

			remove_claim = ROOT
		}

		spawn_unit = {
			owner = THIS
			province = capital_scope
			home = capital_scope
			attrition = 0.35
			maintenance_multiplier = 0
			earmark = second_mongol_horde

			troops = {
				horse_archers = { 6750 6750 }
				light_cavalry = { 4000 4000 }
				light_infantry = { 1350 1350 }
				heavy_infantry = { 525 525 }
				knights = { 118 118 }
			}
		}

		while = {
			count = 3

			create_character = {
				random_traits = yes
				dynasty = random
				religion = ROOT
				culture = ROOT
				female = no
				age = 30

				attributes = {
					martial = 12
				}

				add_trait = brilliant_strategist
			}
		}

		hidden_effect = {
			# Turn over any remaining vassals
			any_vassal = {
				limit = {
					capital_scope = {
						OR = {
							region = custom_persia
							region = custom_afghanistan
							region = custom_baluchistan
							region = custom_byzantium
							region = custom_arabia
							region = custom_jerusalem
							region = custom_mesopotamia
							region = custom_syria
							region = custom_armenia
							region = custom_azerbaijan
							region = custom_nikaea
							region = custom_trebizond
							region = world_india_bengal
							region = world_india_deccan
							region = world_india_rajastan

							duchy = {
								OR = {
									title = d_merv
									title = d_dihistan
								}
							}
						}
					}
				}

				set_defacto_liege = event_target:second_mongol_son

				opinion = {
					name = opinion_loyal_vassal
					who = event_target:second_mongol_son
					years = 5
				}
			}

			any_vassal = {
				any_vassal = {
					limit = {
						capital_scope = {
							OR = {
								region = custom_persia
								region = custom_afghanistan
								region = custom_baluchistan
								region = custom_byzantium
								region = custom_arabia
								region = custom_jerusalem
								region = custom_mesopotamia
								region = custom_syria
								region = custom_armenia
								region = custom_azerbaijan
								region = custom_nikaea
								region = custom_trebizond
								region = world_india_bengal
								region = world_india_deccan
								region = world_india_rajastan

								duchy = {
									OR = {
										title = d_merv
										title = d_dihistan
									}
								}
							}
						}
					}

					set_defacto_liege = event_target:second_mongol_son

					opinion = {
						name = opinion_loyal_vassal
						who = event_target:second_mongol_son
						years = 5
					}
				}
			}

			if = {
				limit = {
					FROM = {
						has_character_flag = has_third_son
					}
				}

				any_vassal = {
					limit = {
						capital_scope = {
							region = custom_khwarizm

							duchy = {
								NOT = { title = d_khwarizmian }
							}
						}
					}

					set_defacto_liege = event_target:third_mongol_son

					opinion = {
						name = opinion_loyal_vassal
						who = event_target:third_mongol_son
						years = 5
					}
				}

				any_vassal = {
					any_vassal = {
						limit = {
							capital_scope = {
								region = custom_khwarizm

								duchy = {
									NOT = { title = d_khwarizmian }
								}
							}
						}

						set_defacto_liege = event_target:third_mongol_son

						opinion = {
							name = opinion_loyal_vassal
							who = event_target:third_mongol_son
							years = 5
						}
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTA60004

		trigger = { has_landed_title = e_il-khanate }

		set_global_flag = il_khanate_arrival

		custom_tooltip = { text = ESTABLISH_CADET_BRANCH }

		# Lose all claims held by the other hordes
		any_claim = {
			limit = {
				holder_scope = {
					OR = {
						has_landed_title = e_golden_horde
						has_landed_title = e_chagatai
						top_liege = { has_landed_title = e_golden_horde }
						top_liege = { has_landed_title = e_chagatai }
					}
				}
			}
			remove_claim = ROOT
		}

		spawn_unit = {
			owner = THIS
			province = capital_scope
			home = capital_scope
			attrition = 0.35
			maintenance_multiplier = 0
			earmark = second_mongol_horde

			troops = {
				horse_archers = { 6750 6750 }
				light_cavalry = { 4000 4000 }
				light_infantry = { 1350 1350 }
				heavy_infantry = { 525 525 }
				knights = { 118 118 }
			}
		}

		while = {
			count = 3

			create_character = {
				random_traits = yes
				dynasty = random
				religion = ROOT
				culture = ROOT
				female = no
				age = 30

				attributes = {
					martial = 12
				}

				add_trait = brilliant_strategist
			}
		}

		hidden_effect = {
			# Turn over any remaining vassals
			any_vassal = {
				limit = {
					capital_scope = {
						OR = {
							region = custom_cuman
							region = custom_perm
							region = custom_volga
							region = custom_alania
							region = custom_crimea
							region = custom_lithuania
							region = custom_livonia
							region = custom_muscovy
							region = custom_novgorod
							region = custom_rus
							region = custom_bulgaria
							region = custom_croatia
							region = custom_serbia
							region = custom_wallachia
							duchy = { title = d_khwarizmian }
						}
					}
				}

				set_defacto_liege = event_target:first_mongol_son

				opinion = {
					name = opinion_loyal_vassal
					who = event_target:first_mongol_son
					years = 5
				}
			}

			any_vassal = {
				any_vassal = {
					limit = {
						capital_scope = {
							OR = {
								region = custom_cuman
								region = custom_perm
								region = custom_volga
								region = custom_alania
								region = custom_crimea
								region = custom_lithuania
								region = custom_livonia
								region = custom_muscovy
								region = custom_novgorod
								region = custom_rus
								region = custom_bulgaria
								region = custom_croatia
								region = custom_serbia
								region = custom_wallachia
								duchy = { title = d_khwarizmian }
							}
						}
					}

					set_defacto_liege = event_target:first_mongol_son

					opinion = {
						name = opinion_loyal_vassal
						who = event_target:first_mongol_son
						years = 5
					}
				}
			}

			if = {
				limit = { FROM = { has_character_flag = has_third_son } }

				any_vassal = {
					limit = {
						capital_scope = {
							region = custom_khwarizm

							duchy = {
								NOR = {
									title = d_merv
									title = d_dihistan
								}
							}
						}
					}

					set_defacto_liege = event_target:third_mongol_son

					opinion = {
						name = opinion_loyal_vassal
						who = event_target:third_mongol_son
						years = 5
					}
				}

				any_vassal = {
					any_vassal = {
						limit = {
							capital_scope = {
								region = custom_khwarizm

								duchy = {
									NOR = {
										title = d_merv
										title = d_dihistan
									}
								}
							}
						}

						set_defacto_liege = event_target:third_mongol_son

						opinion = {
							name = opinion_loyal_vassal
							who = event_target:third_mongol_son
							years = 5
						}
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTA60004

		trigger = { has_landed_title = e_chagatai }

		set_global_flag = chagatai_arrival

		if = {
			limit = { NOT = { dynasty = 7380 } }

			e_chagatai = {
				set_name = MOGHUL
				adjective = MOGHUL_ADJ
			}
		}

		custom_tooltip = { text = ESTABLISH_CADET_BRANCH }

		# Lose all claims held by the other hordes
		any_claim = {
			show_scope_change = no

			limit = {
				holder_scope = {
					OR = {
						has_landed_title = e_golden_horde
						has_landed_title = e_il-khanate

						top_liege = {
							OR = {
								has_landed_title = e_golden_horde
								has_landed_title = e_il-khanate
							}
						}
					}
				}
			}

			remove_claim = ROOT
		}

		spawn_unit = {
			owner = THIS
			province = capital_scope
			home = capital_scope
			attrition = 0.35
			maintenance_multiplier = 0
			earmark = second_mongol_horde

			troops = {
				horse_archers = { 6750 6750 }
				light_cavalry = { 4000 4000 }
				light_infantry = { 1350 1350 }
				heavy_infantry = { 525 525 }
				knights = { 118 118 }
			}
		}

		create_character = {
			random_traits = yes
			dynasty = random
			religion = ROOT
			culture = ROOT
			female = no
			age = 30

			attributes = {
				martial = 12
			}

			add_trait = brilliant_strategist
		}

		hidden_effect = {
			# Turn over any remaining vassals
			any_vassal = {
				limit = {
					capital_scope = {
						OR = {
							region = custom_cuman
							region = custom_perm
							region = custom_volga
							region = custom_alania
							region = custom_crimea
							region = custom_lithuania
							region = custom_livonia
							region = custom_muscovy
							region = custom_novgorod
							region = custom_rus
							region = custom_bulgaria
							region = custom_croatia
							region = custom_serbia
							region = custom_wallachia
							duchy = { title = d_khwarizmian }
						}
					}
				}

				set_defacto_liege = event_target:first_mongol_son

				opinion = {
					name = opinion_loyal_vassal
					who = event_target:first_mongol_son
					years = 5
				}
			}

			any_vassal = {
				any_vassal = {
					limit = {
						capital_scope = {
							OR = {
								region = custom_cuman
								region = custom_perm
								region = custom_volga
								region = custom_alania
								region = custom_crimea
								region = custom_lithuania
								region = custom_livonia
								region = custom_muscovy
								region = custom_novgorod
								region = custom_rus
								region = custom_bulgaria
								region = custom_croatia
								region = custom_serbia
								region = custom_wallachia
								duchy = { title = d_khwarizmian }
							}
						}
					}

					set_defacto_liege = event_target:first_mongol_son

					opinion = {
						name = opinion_loyal_vassal
						who = event_target:first_mongol_son
						years = 5
					}
				}
			}

			any_vassal = {
				limit = {
					capital_scope = {
						OR = {
							region = custom_persia
							region = custom_afghanistan
							region = custom_baluchistan
							region = custom_byzantium
							region = custom_arabia
							region = custom_jerusalem
							region = custom_mesopotamia
							region = custom_syria
							region = custom_armenia
							region = custom_azerbaijan
							region = custom_nikaea
							region = custom_trebizond
							region = world_india_bengal
							region = world_india_deccan
							region = world_india_rajastan
							duchy = { title = d_merv }
							duchy = { title = d_dihistan }
						}
					}
				}

				set_defacto_liege = event_target:second_mongol_son

				opinion = {
					name = opinion_loyal_vassal
					who = event_target:second_mongol_son
					years = 5
				}
			}

			any_vassal = {
				any_vassal = {
					limit = {
						capital_scope = {
							OR = {
								region = custom_persia
								region = custom_afghanistan
								region = custom_baluchistan
								region = custom_byzantium
								region = custom_arabia
								region = custom_jerusalem
								region = custom_mesopotamia
								region = custom_syria
								region = custom_armenia
								region = custom_azerbaijan
								region = custom_nikaea
								region = custom_trebizond
								region = world_india_bengal
								region = world_india_deccan
								region = world_india_rajastan
								duchy = { title = d_merv }
								duchy = { title = d_dihistan }
							}
						}
					}

					set_defacto_liege = event_target:second_mongol_son

					opinion = {
						name = opinion_loyal_vassal
						who = event_target:second_mongol_son
						years = 5
					}
				}
			}
		}
	}
}

# Bounce event to assign territories
character_event = {
	id = 60005
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		# Make sure the first son gets a county in Cuman/Khwarizmia
		if = {
			limit = {
				NOT = {
					any_realm_title = {
						real_tier = COUNT

						location = {
							region = custom_cuman
						}
					}
				}
			}

			if = {
				limit = { has_landed_title = c_khwarizm }

				c_khwarizm = {
					grant_title = event_target:first_mongol_son
				}
			}

			if = {
				limit = {
					c_khwarizm = {
						holder_scope = {
							is_liege_or_above = ROOT

							NOR = {
								character = event_target:first_mongol_son
								character = event_target:second_mongol_son
								character = event_target:third_mongol_son
							}
						}
					}
				}

				c_khwarizm = {
					event_target:first_mongol_son = {
						usurp_title_plus_barony_if_unlanded = PREV
					}
				}
			}

			if = {
				limit = {
					event_target:first_mongol_son = {
						NOT = {
							any_demesne_title = {
								real_tier = COUNT

								location = {
									duchy = {
										title = d_khwarizmian
									}
								}
							}
						}
					}
				}

				random_realm_title = {
					limit = {
						tier = COUNT
						is_feudal = yes

						location = {
							duchy = {
								title = d_khwarizmian
							}
						}
					}

					event_target:first_mongol_son = {
						usurp_title_plus_barony_if_unlanded = PREV
					}
				}
			}
		}

		if = {
			limit = {
				has_landed_title = c_saray

				event_target:first_mongol_son = {
					NOT = { has_landed_title = c_saray }
				}
			}

			c_saray = {
				grant_title = event_target:first_mongol_son
			}
		}

		if = {
			limit = {
				c_saray = {
					holder_scope = {
						is_liege_or_above = ROOT

						NOR = {
							character = event_target:first_mongol_son
							character = event_target:second_mongol_son
							character = event_target:third_mongol_son
						}
					}
				}
			}

			c_saray = {
				event_target:first_mongol_son = {
					usurp_title_plus_barony_if_unlanded = PREV
				}
			}
		}

		if = {
			limit = {
				event_target:first_mongol_son = {
					NOT = {
						any_demesne_title = {
							tier = COUNT

							location = {
								region = custom_cuman
							}
						}
					}
				}
			}

			random_realm_title = {
				limit = {
					tier = COUNT
					is_feudal = yes

					location = {
						region = custom_cuman
					}
				}

				event_target:first_mongol_son = {
					usurp_title_plus_barony_if_unlanded = PREV
				}
			}
		}

		# Make sure the second son gets a county in persia
		if = {
			limit = {
				has_landed_title = c_esfahan

				event_target:second_mongol_son = {
					NOT = { has_landed_title = c_esfahan }
				}
			}

			c_esfahan = {
				grant_title = event_target:second_mongol_son
			}
		}

		if = {
			limit = {
				c_esfahan = {
					holder_scope = {
						is_liege_or_above = ROOT

						NOR = {
							character = event_target:first_mongol_son
							character = event_target:second_mongol_son
							character = event_target:third_mongol_son
						}
					}
				}
			}

			c_esfahan = {
				event_target:second_mongol_son = {
					usurp_title_plus_barony_if_unlanded = PREV
				}
			}
		}

		if = {
			limit = {
				event_target:second_mongol_son = {
					NOT = {
						any_demesne_title = {
							tier = COUNT

							location = {
								region = custom_persia
							}
						}
					}
				}
			}

			random_realm_title = {
				limit = {
					tier = COUNT
					is_feudal = yes

					OR = {
						location = { region = custom_persia }
						duchy = { title = d_dihistan }
					}
				}

				event_target:second_mongol_son = {
					usurp_title_plus_barony_if_unlanded = PREV
				}
			}
		}

		# Make sure the third son gets a county in khwarizm
		if = {
			limit = { has_character_flag = has_third_son }

			if = {
				limit = {
					has_landed_title = c_ili

					event_target:third_mongol_son = {
						NOT = { has_landed_title = c_ili }
					}
				}

				c_ili = {
					grant_title = event_target:third_mongol_son
				}
			}

			if = {
				limit = {
					c_ili = {
						holder_scope = {
							is_liege_or_above = ROOT

							NOR = {
								character = event_target:first_mongol_son
								character = event_target:second_mongol_son
								character = event_target:third_mongol_son
							}
						}
					}
				}

				c_ili = {
					event_target:third_mongol_son = {
						usurp_title_plus_barony_if_unlanded = PREV
					}
				}
			}

			if = {
				limit = {
					event_target:third_mongol_son = {
						NOT = {
							any_demesne_title = {
								tier = COUNT

								location = {
									region = custom_khwarizm
								}
							}
						}
					}
				}

				random_realm_title = {
					limit = {
						tier = COUNT
						is_feudal = yes

						location = {
							region = custom_khwarizm
						}
					}

					event_target:third_mongol_son = {
						usurp_title_plus_barony_if_unlanded = PREV
					}
				}
			}
		}

		# Sons that have lands in another's territory should give them up
		event_target:first_mongol_son = {
			any_demesne_title = {
				limit = {
					OR = {
						location = {
							OR = {
								region = custom_persia
								region = custom_afghanistan
								region = custom_baluchistan
								region = custom_byzantium
								region = custom_arabia
								region = custom_jerusalem
								region = custom_mesopotamia
								region = custom_syria
								region = custom_armenia
								region = custom_azerbaijan
								region = custom_nikaea
								region = custom_trebizond
								region = world_india_bengal
								region = world_india_deccan
								region = world_india_rajastan

								duchy = {
									OR = {
										title = d_merv
										title = d_dihistan
									}
								}
							}
						}

						capital_scope = {
							OR = {
								region = custom_persia
								region = custom_afghanistan
								region = custom_baluchistan
								region = custom_byzantium
								region = custom_arabia
								region = custom_jerusalem
								region = custom_mesopotamia
								region = custom_syria
								region = custom_armenia
								region = custom_azerbaijan
								region = custom_nikaea
								region = custom_trebizond
								region = world_india_bengal
								region = world_india_deccan
								region = world_india_rajastan

								duchy = {
									OR = {
										title = d_merv
										title = d_dihistan
									}
								}
							}
						}

						title = d_merv
						title = d_dihistan
					}

					NOT = { tier = EMPEROR }
				}

				grant_title = event_target:second_mongol_son
			}

			if = {
				limit = { ROOT = { has_character_flag = has_third_son } }

				any_demesne_title = {
					limit = {
						OR = {
							location = { region = custom_khwarizm }
							capital_scope = { region = custom_khwarizm }
						}

						NOR = {
							duchy = { title = d_khwarizmian }
							title = d_khwarizmian
							tier = EMPEROR
						}
					}

					grant_title = event_target:third_mongol_son
				}
			}
		}

		event_target:second_mongol_son = {
			any_demesne_title = {
				limit = {
					OR = {
						location = {
							OR = {
								region = custom_cuman
								region = custom_perm
								region = custom_volga
								region = custom_alania
								region = custom_crimea
								region = custom_lithuania
								region = custom_livonia
								region = custom_muscovy
								region = custom_novgorod
								region = custom_rus
								region = custom_bulgaria
								region = custom_croatia
								region = custom_serbia
								region = custom_wallachia
								duchy = { title = d_khwarizmian }
							}
						}

						capital_scope = {
							OR = {
								region = custom_cuman
								region = custom_perm
								region = custom_volga
								region = custom_alania
								region = custom_crimea
								region = custom_lithuania
								region = custom_livonia
								region = custom_muscovy
								region = custom_novgorod
								region = custom_rus
								region = custom_bulgaria
								region = custom_croatia
								region = custom_serbia
								region = custom_wallachia
								duchy = { title = d_khwarizmian }
							}
						}

						title = d_khwarizmian
					}

					NOT = { tier = EMPEROR }
				}

				grant_title = event_target:first_mongol_son
			}

			if = {
				limit = { ROOT = { has_character_flag = has_third_son } }

				any_demesne_title = {
					limit = {
						OR = {
							location = { region = custom_khwarizm }
							capital_scope = { region = custom_khwarizm }
						}

						NOR = {
							duchy = {
								OR = {
									title = d_merv
									title = d_dihistan
								}
							}

							title = d_merv
							title = d_dihistan
							tier = EMPEROR
						}
					}

					grant_title = event_target:third_mongol_son
				}
			}
		}

		if = {
			limit = { has_character_flag = has_third_son }

			event_target:third_mongol_son = {
				any_demesne_title = {
					limit = {
						OR = {
							location = {
								OR = {
									region = custom_cuman
									region = custom_perm
									region = custom_volga
									region = custom_alania
									region = custom_crimea
									region = custom_lithuania
									region = custom_livonia
									region = custom_muscovy
									region = custom_novgorod
									region = custom_rus
									region = custom_bulgaria
									region = custom_croatia
									region = custom_serbia
									region = custom_wallachia
									duchy = { title = d_khwarizmian }
								}
							}

							capital_scope = {
								OR = {
									region = custom_cuman
									region = custom_perm
									region = custom_volga
									region = custom_alania
									region = custom_crimea
									region = custom_lithuania
									region = custom_livonia
									region = custom_muscovy
									region = custom_novgorod
									region = custom_rus
									region = custom_bulgaria
									region = custom_croatia
									region = custom_serbia
									region = custom_wallachia
									duchy = { title = d_khwarizmian }
								}
							}

							title = d_khwarizmian
						}

						NOT = { tier = EMPEROR }
					}

					grant_title = event_target:first_mongol_son
				}

				any_demesne_title = {
					limit = {
						OR = {
							location = {
								OR = {
									region = custom_persia
									region = custom_afghanistan
									region = custom_baluchistan
									region = custom_byzantium
									region = custom_arabia
									region = custom_jerusalem
									region = custom_mesopotamia
									region = custom_syria
									region = custom_armenia
									region = custom_azerbaijan
									region = custom_nikaea
									region = custom_trebizond
									region = world_india_bengal
									region = world_india_deccan
									region = world_india_rajastan

									duchy = {
										OR = {
											title = d_merv
											title = d_dihistan
										}
									}
								}
							}

							capital_scope = {
								OR = {
									region = custom_persia
									region = custom_afghanistan
									region = custom_baluchistan
									region = custom_byzantium
									region = custom_arabia
									region = custom_jerusalem
									region = custom_mesopotamia
									region = custom_syria
									region = custom_armenia
									region = custom_azerbaijan
									region = custom_nikaea
									region = custom_trebizond
									region = world_india_bengal
									region = world_india_deccan
									region = world_india_rajastan

									duchy = {
										OR = {
											title = d_merv
											title = d_dihistan
										}
									}
								}
							}

							title = d_merv
							title = d_dihistan
						}

						NOT = { tier = EMPEROR }
					}

					grant_title = event_target:second_mongol_son
				}
			}
		}

		# Split up lands
		if = {
			limit = {
				NOR = {
					character = event_target:first_mongol_son
					character = event_target:second_mongol_son
					character = event_target:third_mongol_son
				}
			}

			any_demesne_title = {
				limit = {
					OR = {
						location = {
							OR = {
								region = custom_cuman
								region = custom_perm
								region = custom_volga
								region = custom_alania
								region = custom_crimea
								region = custom_lithuania
								region = custom_livonia
								region = custom_muscovy
								region = custom_novgorod
								region = custom_rus
								region = custom_bulgaria
								region = custom_croatia
								region = custom_serbia
								region = custom_wallachia
								duchy = { title = d_khwarizmian }
							}
						}

						capital_scope = {
							OR = {
								region = custom_cuman
								region = custom_perm
								region = custom_volga
								region = custom_alania
								region = custom_crimea
								region = custom_lithuania
								region = custom_livonia
								region = custom_muscovy
								region = custom_novgorod
								region = custom_rus
								region = custom_bulgaria
								region = custom_croatia
								region = custom_serbia
								region = custom_wallachia
								duchy = { title = d_khwarizmian }
							}
						}

						duchy = { title = d_khwarizmian }
						title = d_khwarizmian
					}

					NOT = { tier = EMPEROR }
				}

				grant_title = event_target:first_mongol_son
			}

			any_demesne_title = {
				limit = {
					OR = {
						location = {
							OR = {
								region = custom_persia
								region = custom_afghanistan
								region = custom_baluchistan
								region = custom_byzantium
								region = custom_arabia
								region = custom_jerusalem
								region = custom_mesopotamia
								region = custom_syria
								region = custom_armenia
								region = custom_azerbaijan
								region = custom_nikaea
								region = custom_trebizond
								region = world_india_bengal
								region = world_india_deccan
								region = world_india_rajastan

								duchy = {
									OR = {
										title = d_merv
										title = d_dihistan
									}
								}
							}
						}

						capital_scope = {
							OR = {
								region = custom_persia
								region = custom_afghanistan
								region = custom_baluchistan
								region = custom_byzantium
								region = custom_arabia
								region = custom_jerusalem
								region = custom_mesopotamia
								region = custom_syria
								region = custom_armenia
								region = custom_azerbaijan
								region = custom_nikaea
								region = custom_trebizond
								region = world_india_bengal
								region = world_india_deccan
								region = world_india_rajastan

								duchy = {
									OR = {
										title = d_merv
										title = d_dihistan
									}
								}
							}
						}

						title = d_merv
						title = d_dihistan
					}

					NOT = { tier = EMPEROR }
				}

				grant_title = event_target:second_mongol_son
			}

			if = {
				limit = { has_character_flag = has_third_son }

				any_demesne_title = {
					limit = {
						OR = {
							location = { region = custom_khwarizm }
							capital_scope = { region = custom_khwarizm }
						}

						NOT = { tier = EMPEROR }
					}

					grant_title = event_target:third_mongol_son
				}
			}
		}

		# Create new horde titles
		activate_title = {
			title = e_golden_horde
			status = yes
		}

		e_golden_horde = {
			copy_title_laws = e_mongol_empire
			add_law = succ_ultimogeniture
			grant_title = event_target:first_mongol_son
			make_primary_title = yes
		}

		activate_title = {
			title = e_il-khanate
			status = yes
		}

		e_il-khanate = {
			copy_title_laws = e_mongol_empire
			add_law = succ_ultimogeniture
			grant_title = event_target:second_mongol_son
			make_primary_title = yes
		}

		if = {
			limit = { has_character_flag = has_third_son }

			activate_title = {
				title = e_chagatai
				status = yes
			}

			e_chagatai = {
				copy_title_laws = e_mongol_empire
				add_law = succ_ultimogeniture
				grant_title = event_target:third_mongol_son
				make_primary_title = yes
			}
		}

		hidden_effect = {
			# Seperate vassals
			any_vassal = {
				limit = {
					capital_scope = {
						OR = {
							region = custom_cuman
							region = custom_perm
							region = custom_volga
							region = custom_alania
							region = custom_crimea
							region = custom_lithuania
							region = custom_livonia
							region = custom_muscovy
							region = custom_novgorod
							region = custom_rus
							region = custom_bulgaria
							region = custom_croatia
							region = custom_serbia
							region = custom_wallachia
							duchy = { title = d_khwarizmian }
						}
					}
				}

				set_defacto_liege = event_target:first_mongol_son

				opinion = {
					who = event_target:first_mongol_son
					name = opinion_loyal_vassal
					years = 5
				}
			}

			any_vassal = {
				limit = {
					capital_scope = {
						OR = {
							region = custom_persia
							region = custom_afghanistan
							region = custom_baluchistan
							region = custom_byzantium
							region = custom_arabia
							region = custom_jerusalem
							region = custom_mesopotamia
							region = custom_syria
							region = custom_armenia
							region = custom_azerbaijan
							region = custom_nikaea
							region = custom_trebizond
							region = world_india_bengal
							region = world_india_deccan
							region = world_india_rajastan

							duchy = {
								OR = {
									title = d_merv
									title = d_dihistan
								}
							}
						}
					}
				}

				set_defacto_liege = event_target:second_mongol_son

				opinion = {
					name = opinion_loyal_vassal
					who = event_target:second_mongol_son
					years = 5
				}
			}

			if = {
				limit = { has_character_flag = has_third_son }

				any_vassal = {
					limit = {
						capital_scope = { region = custom_khwarizm }
					}

					set_defacto_liege = event_target:third_mongol_son

					opinion = {
						name = opinion_loyal_vassal
						who = event_target:third_mongol_son
						years = 5
					}
				}
			}

			# Any remaining children will be asked to swear to a son
			FROM = {
				any_child = {
					limit = {
						is_ruler = no
						is_adult = yes

						NOR = {
							character = event_target:first_mongol_son
							character = event_target:second_mongol_son
							character = event_target:third_mongol_son
						}
					}

					character_event = {
						id = 60003
						days = 1
					}
				}
			}

			# Any mongol generals will be asked to serve a son
			any_courtier = {
				limit = {
					culture = FROM
					trait = brilliant_strategist
					is_ruler = no
					is_female = no

					NOR = {
						character = event_target:first_mongol_son
						character = event_target:second_mongol_son
						character = event_target:third_mongol_son
						is_child_of = FROM
					}
				}

				character_event = {
					id = 60003
					days = 1
				}
			}

			# Send event to inheriting sons
			event_target:first_mongol_son = { character_event = { id = 60004 } }
			event_target:second_mongol_son = { character_event = { id = 60004 } }
			event_target:third_mongol_son = { character_event = { id = 60004 } }

			if = {
				limit = {
					NOR = {
						character = event_target:first_mongol_son
						character = event_target:second_mongol_son
						character = event_target:third_mongol_son
					}
				}

				set_defacto_liege = event_target:first_mongol_son
			}

			clr_character_flag = has_third_son

			e_mongol_empire = {
				unsafe_destroy_landed_title = THIS

				activate_title = {
					title = THIS
					status = no
				}
			}
		}
	}
}

# Assigning flags to the mongol sons
character_event = {
	id = 60006

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		always = no
		is_title_active = e_mongol_empire
		culture = mongol

		OR = {
			has_character_flag = is_jochi_khan
			has_character_flag = son_of_jochi_khan
			has_character_flag = is_tolui_khan
			has_character_flag = son_of_tolui_khan
			has_character_flag = is_chagatai_khan
			has_character_flag = son_of_chagatai_khan
			has_character_flag = is_ogodei_khan
			has_character_flag = son_of_ogodei_khan
		}
	}

	immediate = {
		if = {
			limit = {
				OR = {
					has_character_flag = is_jochi_khan
					has_character_flag = son_of_jochi_khan
				}
			}

			any_child = {
				limit = {
					is_female = no
					NOT = { trait = bastard }
				}
				set_character_flag = son_of_jochi_khan
			}
		}

		if = {
			limit = {
				OR = {
					has_character_flag = is_tolui_khan
					has_character_flag = son_of_tolui_khan
				}
			}

			any_child = {
				limit = {
					is_female = no
					NOT = { trait = bastard }
				}
				set_character_flag = son_of_tolui_khan
			}
		}

		if = {
			limit = {
				OR = {
					has_character_flag = is_chagatai_khan
					has_character_flag = son_of_chagatai_khan
				}
			}

			any_child = {
				limit = {
					is_female = no
					NOT = { trait = bastard }
				}
				set_character_flag = son_of_chagatai_khan
			}
		}

		if = {
			limit = {
				OR = {
					has_character_flag = is_ogodei_khan
					has_character_flag = son_of_ogodei_khan
				}
			}

			any_child = {
				limit = {
					is_female = no
					NOT = { trait = bastard }
				}
				set_character_flag = son_of_ogodei_khan
			}
		}
	}
}