###################################
#
# Mongol Horde Events
#
# Id 60000 - 61000 is reserved
# Events revamped by Rylock
#
###################################

# Rumors of a Steppe Menace
# narrative_event = {
#	id = 60000
#	title = EVTNAME60000
#	desc = EVTDESC60000
#	picture = GFX_evt_mongols
#	border = GFX_event_narrative_frame_war
#
#	major = yes
#
#	only_playable = yes
#
#	trigger = {
#		always = no # replaced by new mongol arrival event
#		owns = event_target:pulse_province
#		year >= 1215
#
#		NOR = {
#			has_global_flag = mongol_horde_rumors
#			has_global_flag = il_khanate_arrival
#			has_global_flag = golden_horde_arrival
#		}
#	}
#
#	mean_time_to_happen = {
#		months = 1
#	}
#
#	immediate = {
#		set_global_flag = mongol_horde_rumors
#
#		activate_title = {
#			title = e_ilkhanate
#			status = yes
#		}
#
#		create_random_soldier = {
#			random_traits = no
#			dynasty = 101916 # Toluid
#			name = "Hulegu"
#			culture = mongol
#			religion = tengri_pagan
#			age = 30
#			health = 6
#			fertility = 0.7
#
#			attributes = {
#				martial = 8
#				diplomacy = 4
#				stewardship = 5
#				intrigue = 4
#				learning = 3
#			}
#
#			add_trait = brilliant_strategist
#			add_trait = wroth
#			add_trait = cruel
#			add_trait = proud
#			add_trait = zealous
#		}
#
#		new_character = {
#			grant_title = e_ilkhanate
#			set_defacto_liege = THIS
#		}
#
#		activate_title = {
#			title = e_golden_horde
#			status = yes
#		}
#
#		create_random_soldier = {
#			random_traits = no
#			dynasty = 7379 # Jochid
#			name = "Batu"
#			culture = mongol
#			religion = tengri_pagan
#			age = 33
#			health = 6
#			fertility = 0.7
#
#			attributes = {
#				martial = 9
#				diplomacy = 5
#				stewardship = 8
#				intrigue = 7
#				learning = 3
#			}
#
#			add_trait = brilliant_strategist
#			add_trait = diligent
#			add_trait = humble
#			add_trait = gregarious
#			add_trait = just
#		}
#
#		new_character = {
#			grant_title = e_golden_horde
#			set_defacto_liege = THIS
#		}
#
#		any_player = {
#			chronicle = {
#				entry = CHRONICLE_MONGOL_RUMORS
#				portrait = [New.GetID]
#			}
#		}
#	}
#
#	option = {
#		name = EVTOPTA60000
#	}
# }

# Arrival of the Ilkhanate
# narrative_event = {
#	id = 60001
#	title = EVTNAME60001
#	desc = EVTDESC60001
#	picture = GFX_evt_mongols
#	border = GFX_event_narrative_frame_war
#
#	major = yes
#	hide_new = yes
#
#	only_playable = yes
#
#	trigger = {
#		always = no # replaced by new mongol arrival event
#		has_landed_title = e_ilkhanate
#		year >= 1216
#		year < 1224
#		NOT = { has_global_flag = il_khanate_arrival }
#	}
#
#	mean_time_to_happen = {
#		years = 2
#	}
#
#	option = {
#		name = OK
#
#		trigger = { has_landed_title = e_ilkhanate }
#
#		set_global_flag = il_khanate_arrival
#
#		c_fergana = { # Fergana
#			kingdom = {
#				ROOT = {
#					war = {
#						casus_belli = tribal_invasion
#						target = PREVPREV # The top liege of the owner
#						thirdparty_title = PREV # The de jure kingdom
#					}
#				}
#			}
#		}
#
#		wealth = 5000
#
#		while = {
#			count = 9
#
#			spawn_unit = {
#				province = c_fergana
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 30
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#				}
#			}
#		}
#
#		while = {
#			count = 9
#
#			spawn_unit = {
#				province = c_oshrusana
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 30
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#				}
#			}
#		}
#
#		while = {
#			count = 2
#
#			random = {
#				chance = 50
#
#				while = {
#					count = 3
#
#					spawn_unit = {
#						province = c_samarkand
#
#						troops = {
#							horse_archers = { 2700 2700 }
#							light_cavalry = { 1600 1600 }
#							light_infantry = { 541 541 }
#							heavy_infantry = { 210 210 }
#							knights = { 47 47 }
#						}
#					}
#
#					create_character = {
#						random_traits = yes
#						dynasty = random
#						religion = tengri_pagan
#						culture = ROOT
#						female = no
#						age = 30
#
#						attributes = {
#							martial = 12
#						}
#
#						add_trait = brilliant_strategist
#					}
#
#					new_character = {
#						random_list = {
#							1 = { }
#							1 = { add_age = 1 }
#							1 = { add_age = 2 }
#							1 = { add_age = 3 }
#							1 = { add_age = 4 }
#							1 = { add_age = 5 }
#							1 = { add_age = 6 }
#							1 = { add_age = 7 }
#							1 = { add_age = 8 }
#							1 = { add_age = 9 }
#						}
#					}
#				}
#			}
#		}
#
#		# Some extra courtiers
#
#		while = {
#			count = 7
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 16
#			}
#
#			new_character = {
#				random_list = {
#					1 = { }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#					1 = { add_age = 10 }
#					1 = { add_age = 11 }
#					1 = { add_age = 12 }
#				}
#			}
#		}
#
#		while = {
#			count = 5
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = yes
#				age = 16
#			}
#
#			new_character = {
#				random_list = {
#					1 = { }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#				}
#			}
#		}
#	}
#
#	option = {
#		name = EVTOPTB60001
#
#		trigger = {
#			religion_group = muslim
#			NOT = { has_landed_title = e_ilkhanate }
#		}
#	}
#
#	option = {
#		name = EVTOPTC60001
#
#		trigger = {
#			religion_group = christian
#			NOT = { has_landed_title = e_ilkhanate }
#		}
#	}
#
#	option = {
#		name = EVTOPTD60001
#
#		trigger = {
#			NOR = {
#				religion_group = christian
#				religion_group = muslim
#				has_landed_title = e_ilkhanate
#			}
#		}
#	}
# }

# Arrival of the Golden Horde
# narrative_event = {
#	id = 60002
#	title = EVTNAME60002
#	desc = EVTDESC60002
#	picture = GFX_evt_mongols
#	border = GFX_event_narrative_frame_war
#
#	major = yes
#	hide_new = yes
#
#	only_playable = yes
#
#	trigger = {
#		always = no # replaced by new mongol arrival event
#		has_landed_title = e_golden_horde
#		year >= 1224
#		year < 1250
#		has_global_flag = il_khanate_arrival
#		NOT = { has_global_flag = golden_horde_arrival }
#	}
#
#	mean_time_to_happen = {
#		years = 10
#
#		mult_modifier = {
#			factor = 0.5
#			year >= 1235
#		}
#
#		mult_modifier = {
#			factor = 0.5
#			year >= 1240
#		}
#	}
#
#	option = {
#		name = OK
#
#		trigger = { has_landed_title = e_golden_horde }
#
#		set_global_flag = golden_horde_arrival
#
#		# Declare war on a fitting kingdom
#		any_province = {
#			limit = {
#				OR = {
#					province = c_ili
#					province = c_ayakoz
#					province = c_irtysh
#					province = c_anuy
#					province = c_narim
#					province = c_tura
#				}
#			}
#
#			score_value = {
#				value = 1
#
#				additive_modifier = {
#					value = 1000
#					province = c_ili
#				}
#
#				additive_modifier = {
#					value = 900
#					province = c_ayakoz
#				}
#
#				additive_modifier = {
#					value = 800
#					province = c_irtysh
#				}
#
#				additive_modifier = {
#					value = 700
#					province = c_ket
#				}
#
#				additive_modifier = {
#					value = 600
#					province = c_narim
#				}
#
#				additive_modifier = {
#					value = 500
#					province = c_tura
#				}
#
#				# Not if controlled by Il-Khanate, with a fallback on Ili
#				additive_modifier = {
#					value = -2000
#
#					# If owned by Il-Khanate
#					owner = {
#						realm = {
#							title = e_ilkhanate
#						}
#					}
#
#					# Only invalidate Ili
#					trigger_if = {
#						limit = { province = c_ili }
#
#						# if another potential province is not held by Il-Khanate
#						any_province = {
#							OR = {
#								province = c_urzhar
#								province = c_kirghiz
#								province = c_ket
#								province = c_narim
#								province = c_tura
#							}
#
#							# is not held by Il-Khanate
#							owner = {
#								realm = {
#									NOT = { title = e_ilkhanate }
#								}
#							}
#						}
#					}
#				}
#			}
#
#			kingdom = {
#				ROOT = {
#					war = {
#						casus_belli = tribal_invasion
#						target = PREVPREV # The top liege of the owner of the province
#						thirdparty_title = PREV # The de jure kingdom
#					}
#				}
#			}
#		}
#
#		wealth = 5000
#
#		while = {
#			count = 9
#
#			spawn_unit = {
#				province = c_ili
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 30
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#				}
#			}
#		}
#
#		while = {
#			count = 6
#
#			spawn_unit = {
#				province = c_ayakoz
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 30
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#				}
#			}
#		}
#
#		while = {
#			count = 2
#
#			random = {
#				chance = 50
#
#				while = {
#					count = 3
#
#					spawn_unit = {
#						province = c_irtysh
#
#						troops = {
#							horse_archers = { 2700 2700 }
#							light_cavalry = { 1600 1600 }
#							light_infantry = { 541 541 }
#							heavy_infantry = { 210 210 }
#							knights = { 47 47 }
#						}
#					}
#
#					create_character = {
#						random_traits = yes
#						dynasty = random
#						religion = tengri_pagan
#						culture = ROOT
#						female = no
#						age = 30
#
#						attributes = {
#							martial = 12
#						}
#
#						add_trait = brilliant_strategist
#					}
#
#					new_character = {
#						random_list = {
#							1 = { }
#							1 = { add_age = 1 }
#							1 = { add_age = 2 }
#							1 = { add_age = 3 }
#							1 = { add_age = 4 }
#							1 = { add_age = 5 }
#							1 = { add_age = 6 }
#							1 = { add_age = 7 }
#							1 = { add_age = 8 }
#							1 = { add_age = 9 }
#						}
#					}
#				}
#			}
#		}
#
#		# Some extra courtiers
#
#		while = {
#			count = 7
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 16
#			}
#
#			new_character = {
#				random_list = {
#					1 = { }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#					1 = { add_age = 7 }
#					1 = { add_age = 8 }
#					1 = { add_age = 9 }
#					1 = { add_age = 10 }
#					1 = { add_age = 11 }
#					1 = { add_age = 12 }
#				}
#			}
#		}
#
#		while = {
#			count = 5
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = yes
#				age = 16
#			}
#
#			new_character = {
#				random_list = {
#					1 = { }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#				}
#			}
#		}
#	}
#
#	option = {
#		name = EVTOPTB60002
#
#		trigger = {
#			religion_group = christian
#			NOT = { has_landed_title = e_golden_horde }
#		}
#	}
#
#	option = {
#		name = EVTOPTC60002
#
#		trigger = {
#			religion_group = muslim
#			NOT = { has_landed_title = e_golden_horde }
#		}
#	}
#
#	option = {
#		name = EVTOPTD60002
#
#		trigger = {
#			NOR = {
#				religion_group = christian
#				religion_group = muslim
#				has_landed_title = e_golden_horde
#			}
#		}
#	}
# }

# Ilkhanate reinforcements
# character_event = {
#	id = 60004
#	desc = EVTDESC60004
#	picture = GFX_evt_mongols
#	border = GFX_event_normal_frame_war
#
#	only_playable = yes
#
#	trigger = {
#		always = no # replaced by new mongol arrival event
#		has_landed_title = e_ilkhanate
#		year < 1300
#		NOT = { has_character_flag = ilkhanate_reinf }
#
#		had_global_flag = {
#			flag = il_khanate_arrival
#			years >= 10
#		}
#
#		e_ilkhanate = {
#			holder_scope = {
#				culture = mongol
#				religion = tengri_pagan
#
#				OR = {
#					war = yes
#					is_landed = yes
#				}
#			}
#		}
#	}
#
#	mean_time_to_happen = {
#		months = 1
#	}
#
#	option = {
#		name = OK
#
#		set_character_flag = ilkhanate_reinf
#
#		while = {
#			count = 3
#
#			spawn_unit = {
#				province = c_fergana
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 25
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#				}
#			}
#		}
#
#		random = {
#			chance = 50
#
#			while = {
#				count = 3
#
#				spawn_unit = {
#					province = 1423 # Fergana
#
#					troops = {
#						horse_archers = { 2700 2700 }
#						light_cavalry = { 1600 1600 }
#						light_infantry = { 541 541 }
#						heavy_infantry = { 210 210 }
#						knights = { 47 47 }
#					}
#				}
#
#				create_character = {
#					random_traits = yes
#					dynasty = random
#					religion = tengri_pagan
#					culture = ROOT
#					female = no
#					age = 25
#
#					attributes = {
#						martial = 12
#					}
#
#					add_trait = brilliant_strategist
#				}
#
#				new_character = {
#					random_list = {
#						1 = { }
#						1 = { add_age = 1 }
#						1 = { add_age = 2 }
#					}
#				}
#			}
#		}
#	}
# }

# Golden Horde reinforcements
# character_event = {
#	id = 60005
#	desc = EVTDESC60004
#
#	picture = GFX_evt_mongols
#	border = GFX_event_normal_frame_war
#
#	only_playable = yes
#
#	trigger = {
#		always = no # replaced by new mongol arrival event
#		has_landed_title = e_golden_horde
#		year < 1320
#		NOT = { has_character_flag = golden_horde_reinf }
#
#		had_global_flag = {
#			flag = golden_horde_arrival
#			years >= 10
#		}
#
#		e_golden_horde = {
#			holder_scope = {
#				culture = mongol
#				religion = tengri_pagan
#
#				OR = {
#					war = yes
#					is_landed = yes
#				}
#			}
#		}
#	}
#
#	mean_time_to_happen = {
#		months = 1
#	}
#
#	option = {
#		name = OK
#
#		set_character_flag = golden_horde_reinf
#
#		while = {
#			count = 3
#
#			spawn_unit = {
#				province = c_ili
#
#				troops = {
#					horse_archers = { 2700 2700 }
#					light_cavalry = { 1600 1600 }
#					light_infantry = { 541 541 }
#					heavy_infantry = { 210 210 }
#					knights = { 47 47 }
#				}
#			}
#
#			create_character = {
#				random_traits = yes
#				dynasty = random
#				religion = tengri_pagan
#				culture = ROOT
#				female = no
#				age = 30
#
#				attributes = {
#					martial = 12
#				}
#
#				add_trait = brilliant_strategist
#			}
#
#			new_character = {
#				random_list = {
#					1 = { }
#					1 = { add_age = 1 }
#					1 = { add_age = 2 }
#					1 = { add_age = 3 }
#					1 = { add_age = 4 }
#					1 = { add_age = 5 }
#					1 = { add_age = 6 }
#				}
#			}
#		}
#	}
# }

### The Hordes Convert ###

# Horde converts to Catholic
character_event = {
	id = 60010
	title = EVTNAME60010
	desc = EVTDESC60010
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes # on_five_year_pulse, random_events, mongol_conversion
	major = yes

	only_independent = yes
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				primary_title = {
					title = e_ilkhanate
				}
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years >= 40
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years < 80
			}

			NOT = { has_global_flag = il_khanate_converts }
		}
		trigger_else_if = {
			limit = {
				primary_title = {
					title = e_golden_horde
				}
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years >= 40
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years < 80
			}

			NOT = { has_global_flag = golden_horde_converts }
		}
		trigger_else = {
			primary_title = {
				title = e_chagatai
			}

			had_global_flag = {
				flag = chagatai_arrival
				years >= 40
			}

			had_global_flag = {
				flag = chagatai_arrival
				years < 80
			}

			NOT = { has_global_flag = chagatai_converts }
		}

		religion = tengri_pagan
		NOT = { trait = zealous }

		any_realm_province = {
			religion = catholic
			held_under_PREV = yes
		}
	}

	major_trigger = {
		ai = no
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 1.33

			capital_scope = {
				religion = catholic
			}
		}
	}

	immediate = {
		primary_title = {
			trigger_switch = {
				on_trigger = title

				e_ilkhanate = { set_global_flag = il_khanate_converts }
				e_golden_horde = { set_global_flag = golden_horde_converts }
				e_chagatai = { set_global_flag = chagatai_converts }
			}
		}

		catholic = {
			save_event_target_as = target_religion
		}
	}

	option = { # Catholic
		name = EVTOPTA60010

		trigger = { character = ROOT }

		convert_religion_failsafe_effect = yes

		capital_scope = {
			show_scope_change = no

			religion = catholic
		}

		any_realm_character = {
			show_scope_change = no

			limit = { religion = tengri_pagan }

			catholic = {
				save_event_target_as = target_religion
			}

			convert_religion_failsafe_effect = yes

			if = {
				limit = {
					is_playable = yes

					capital_scope = {
						religion = tengri_pagan
					}
				}

				capital_scope = {
					show_scope_change = no

					religion = catholic
				}
			}
		}
	}

	# Other rulers are informed
	option = {
		name = {
			text = EVTOPTB60010
			trigger = { religion_group = muslim }
		}
		name = {
			text = EXCELLENT
			trigger = { religion_group = christian }
		}
		name = {
			text = EVTOPTD60010
			trigger = {
				NOR = {
					religion_group = christian
					religion_group = muslim
				}
			}
		}

		trigger = {
			NOT = { character = ROOT }
		}
	}
}

# Horde converts to Orthodox
character_event = {
	id = 60011
	title = EVTNAME60010
	desc = EVTDESC60011
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes # on_five_year_pulse, random_events, mongol_conversion
	major = yes

	only_independent = yes
	only_capable = yes
	min_age = 16
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				primary_title = {
					title = e_ilkhanate
				}
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years >= 40
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years < 80
			}

			NOT = { has_global_flag = il_khanate_converts }
		}
		trigger_else_if = {
			limit = {
				primary_title = {
					title = e_golden_horde
				}
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years >= 40
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years < 80
			}

			NOT = { has_global_flag = golden_horde_converts }
		}
		trigger_else = {
			primary_title = {
				title = e_chagatai
			}

			had_global_flag = {
				flag = chagatai_arrival
				years >= 40
			}

			had_global_flag = {
				flag = chagatai_arrival
				years < 80
			}

			NOT = { has_global_flag = chagatai_converts }
		}

		religion = tengri_pagan
		NOT = { trait = zealous }

		any_realm_province = {
			religion = orthodox
			held_under_PREV = yes
		}
	}

	major_trigger = {
		ai = no
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 1.33

			capital_scope = {
				religion = orthodox
			}
		}
	}

	immediate = {
		primary_title = {
			trigger_switch = {
				on_trigger = title

				e_ilkhanate = { set_global_flag = il_khanate_converts }
				e_golden_horde = { set_global_flag = golden_horde_converts }
				e_chagatai = { set_global_flag = chagatai_converts }
			}
		}

		orthodox = {
			save_event_target_as = target_religion
		}
	}

	option = { # Orthodox
		name = EVTOPTA60010

		trigger = { character = ROOT }

		convert_religion_failsafe_effect = yes

		capital_scope = {
			show_scope_change = no

			religion = orthodox
		}

		any_realm_character = {
			show_scope_change = no

			limit = { religion = tengri_pagan }

			orthodox = {
				save_event_target_as = target_religion
			}

			convert_religion_failsafe_effect = yes

			if = {
				limit = {
					is_playable = yes

					capital_scope = {
						religion = tengri_pagan
					}
				}

				capital_scope = {
					show_scope_change = no

					religion = orthodox
				}
			}
		}
	}

	# Other rulers are informed
	option = {
		name = {
			text = EVTOPTB60010
			trigger = { religion_group = muslim }
		}
		name = {
			text = EXCELLENT
			trigger = { religion_group = christian }
		}
		name = {
			text = EVTOPTD60010
			trigger = {
				NOR = {
					religion_group = christian
					religion_group = muslim
				}
			}
		}

		trigger = {
			NOT = { character = ROOT }
		}
	}
}

# Horde converts to Sunni
character_event = {
	id = 60012
	title = EVTNAME60010
	desc = EVTDESC60012
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes # on_five_year_pulse, random_events, mongol_conversion
	major = yes

	only_independent = yes
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				primary_title = {
					title = e_ilkhanate
				}
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years >= 40
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years < 80
			}

			NOT = { has_global_flag = il_khanate_converts }
		}
		trigger_else_if = {
			limit = {
				primary_title = {
					title = e_golden_horde
				}
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years >= 40
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years < 80
			}

			NOT = { has_global_flag = golden_horde_converts }
		}
		trigger_else = {
			primary_title = {
				title = e_chagatai
			}

			had_global_flag = {
				flag = chagatai_arrival
				years >= 40
			}

			had_global_flag = {
				flag = chagatai_arrival
				years < 80
			}

			NOT = { has_global_flag = chagatai_converts }
		}

		religion = tengri_pagan
		NOT = { trait = zealous }

		any_realm_province = {
			religion = sunni
			held_under_PREV = yes
		}
	}

	major_trigger = {
		ai = no
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 1.33

			capital_scope = {
				religion = sunni
			}
		}
	}

	immediate = {
		primary_title = {
			trigger_switch = {
				on_trigger = title

				e_ilkhanate = { set_global_flag = il_khanate_converts }
				e_golden_horde = { set_global_flag = golden_horde_converts }
				e_chagatai = { set_global_flag = chagatai_converts }
			}
		}

		sunni = {
			save_event_target_as = target_religion
		}
	}

	option = { # Sunni
		name = EVTOPTA60010

		trigger = { character = ROOT }

		convert_religion_failsafe_effect = yes

		capital_scope = {
			show_scope_change = no

			religion = sunni
		}

		any_realm_character = {
			show_scope_change = no

			limit = { religion = tengri_pagan }

			sunni = {
				save_event_target_as = target_religion
			}

			convert_religion_failsafe_effect = yes

			if = {
				limit = {
					is_playable = yes

					capital_scope = {
						religion = tengri_pagan
					}
				}

				capital_scope = {
					show_scope_change = no

					religion = sunni
				}
			}
		}
	}

	# Other rulers are informed
	option = {
		name = {
			text = EXCELLENT
			trigger = { religion_group = muslim }
		}
		name = {
			text = EVTOPTC60010
			trigger = { religion_group = christian }
		}
		name = {
			text = EVTOPTD60010
			trigger = {
				NOR = {
					religion_group = christian
					religion_group = muslim
				}
			}
		}

		trigger = {
			NOT = { character = ROOT }
		}
	}
}

# Horde converts to Shiite
character_event = {
	id = 60013
	title = EVTNAME60010
	desc = EVTDESC60013
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes # on_five_year_pulse, random_events, mongol_conversion
	major = yes

	only_independent = yes
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				primary_title = {
					title = e_ilkhanate
				}
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years >= 40
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years < 80
			}

			NOT = { has_global_flag = il_khanate_converts }
		}
		trigger_else_if = {
			limit = {
				primary_title = {
					title = e_golden_horde
				}
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years >= 40
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years < 80
			}

			NOT = { has_global_flag = golden_horde_converts }
		}
		trigger_else = {
			primary_title = {
				title = e_chagatai
			}

			had_global_flag = {
				flag = chagatai_arrival
				years >= 40
			}

			had_global_flag = {
				flag = chagatai_arrival
				years < 80
			}

			NOT = { has_global_flag = chagatai_converts }
		}

		religion = tengri_pagan
		NOT = { trait = zealous }

		any_realm_province = {
			religion = shiite
			held_under_PREV = yes
		}
	}

	major_trigger = {
		ai = no
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 1.33

			capital_scope = {
				religion = shiite
			}
		}
	}

	immediate = {
		primary_title = {
			trigger_switch = {
				on_trigger = title

				e_ilkhanate = { set_global_flag = il_khanate_converts }
				e_golden_horde = { set_global_flag = golden_horde_converts }
				e_chagatai = { set_global_flag = chagatai_converts }
			}
		}

		shiite = {
			save_event_target_as = target_religion
		}
	}

	option = { # Shiite
		name = EVTOPTA60010

		trigger = { character = ROOT }

		convert_religion_failsafe_effect = yes

		capital_scope = {
			show_scope_change = no

			religion = shiite
		}

		any_realm_character = {
			show_scope_change = no

			limit = { religion = tengri_pagan }

			shiite = {
				save_event_target_as = target_religion
			}

			convert_religion_failsafe_effect = yes

			if = {
				limit = {
					is_playable = yes

					capital_scope = {
						religion = tengri_pagan
					}
				}

				capital_scope = {
					show_scope_change = no

					religion = shiite
				}
			}
		}
	}

	# Other rulers are informed
	option = {
		name = {
			text = EXCELLENT
			trigger = { religion_group = muslim }
		}
		name = {
			text = EVTOPTC60010
			trigger = { religion_group = christian }
		}
		name = {
			text = EVTOPTD60010
			trigger = {
				NOR = {
					religion_group = christian
					religion_group = muslim
				}
			}
		}

		trigger = {
			NOT = { character  = ROOT }
		}
	}
}

# Horde converts to Nestorian
character_event = {
	id = 60014
	title = EVTNAME60010
	desc = EVTDESC60014
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes # on_five_year_pulse, random_events, mongol_conversion
	major = yes

	only_independent = yes
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				primary_title = {
					title = e_ilkhanate
				}
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years >= 40
			}

			had_global_flag = {
				flag = il_khanate_arrival
				years < 80
			}

			NOT = { has_global_flag = il_khanate_converts }
		}
		trigger_else_if = {
			limit = {
				primary_title = {
					title = e_golden_horde
				}
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years >= 40
			}

			had_global_flag = {
				flag = golden_horde_arrival
				years < 80
			}

			NOT = { has_global_flag = golden_horde_converts }
		}
		trigger_else = {
			primary_title = {
				title = e_chagatai
			}

			had_global_flag = {
				flag = chagatai_arrival
				years >= 40
			}

			had_global_flag = {
				flag = chagatai_arrival
				years < 80
			}

			NOT = { has_global_flag = chagatai_converts }
		}

		religion = tengri_pagan
		num_of_count_titles_in_realm >= 1
		NOT = { trait = zealous }
	}

	major_trigger = {
		ai = no
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 1.33

			capital_scope = {
				religion = nestorian
			}
		}
	}

	immediate = {
		primary_title = {
			trigger_switch = {
				on_trigger = title

				e_ilkhanate = { set_global_flag = il_khanate_converts }
				e_golden_horde = { set_global_flag = golden_horde_converts }
				e_chagatai = { set_global_flag = chagatai_converts }
			}
		}

		nestorian = {
			save_event_target_as = target_religion
		}
	}

	option = {	# Nestorian
		name = EVTOPTA60010

		trigger = { character = ROOT }

		convert_religion_failsafe_effect = yes

		capital_scope = {
			show_scope_change = no

			religion = nestorian
		}

		any_realm_character = {
			show_scope_change = no

			limit = { religion = tengri_pagan }

			nestorian = {
				save_event_target_as = target_religion
			}

			convert_religion_failsafe_effect = yes

			if = {
				limit = {
					is_playable = yes

					capital_scope = {
						religion = tengri_pagan
					}
				}

				capital_scope = {
					show_scope_change = no

					religion = nestorian
				}
			}
		}
	}

	# Other rulers are informed
	option = {
		name = {
			text = EVTOPTB60010
			trigger = { religion_group = muslim }
		}
		name = {
			text = EXCELLENT
			trigger = { religion_group = christian }
		}
		name = {
			text = EVTOPTD60010
			trigger = {
				NOR = {
					religion_group = christian
					religion_group = muslim
				}
			}
		}

		trigger = {
			NOT = { has_landed_title = e_ilkhanate }
		}
	}
}

### Mongols sack European cities ###

# Mongols sack Kiev
narrative_event = {
	id = 60100
	title = EVTNAME_TOG_001
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60100
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_001
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_kiev

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_kiev }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_kiev
	}

	option = {
		name = {
			text = EVTOPTA60100
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60100
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Novgorod
narrative_event = {
	id = 60101
	title = EVTNAME_TOG_002
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60101
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_002
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_novgorod

			owner = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_novgorod }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_novgorod
	}

	option = {
		name = {
			text = EVTOPTA60101 # Perhaps their bloodlust has been sated now
			trigger = {
				NOT = { culture = mongol }
			}
		}
		name = {
			text = EVTOPTB60101 # May the snows of the frozen north claim them
			trigger = { culture = mongol }
		}
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Krakow
narrative_event = {
	id = 60102
	title = EVTNAME_TOG_003
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60102
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_003
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_krakow

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_krakow }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_krakow
	}

	option = {
		name = {
			text = EVTOPTA60102
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60102
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Aachen
narrative_event = {
	id = 60103
	title = EVTNAME_TOG_004
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60103
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_004
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_aachen

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_aachen }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_aachen
	}

	option = {
		name = {
			text = EVTOPTA60103
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60103
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Paris
narrative_event = {
	id = 60104
	title = EVTNAME_TOG_005
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60104
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_005
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_paris

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_paris }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_paris
	}

	option = {
		name = {
			text = EVTOPTA60104
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60104
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack London
narrative_event = {
	id = 60105
	title = EVTNAME_TOG_006
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60105
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_006
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_london

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_london }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_london
	}

	option = {
		name = {
			text = EVTOPTA60105
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60105
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Rome
narrative_event = {
	id = 60106
	title = EVTNAME_TOG_007
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60106
		picture = GFX_evt_rome_falls
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_007
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_roma

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_rome }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_rome
	}

	option = {
		name = {
			text = EVTOPTA60106
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60106
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Venice
narrative_event = {
	id = 60107
	title = EVTNAME_TOG_008
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60107
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_008
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_venezia

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_venice }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_venice
	}

	option = {
		name = {
			text = EVTOPTA60107
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60107
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Constantinople
narrative_event = {
	id = 60108
	title = EVTNAME_TOG_009
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60108
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_009
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_constantinople

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_constantinople }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_constantinople
	}

	option = {
		name = {
			text = EVTOPTA60108
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60108
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Lisbon
narrative_event = {
	id = 60109
	title = EVTNAME_TOG_010
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60109
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_010
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_lisboa

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_lisbon }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_lisbon
	}

	option = {
		name = {
			text = EVTOPTA60109
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60109
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Smolensk
narrative_event = {
	id = 60110
	title = EVTNAME_TOG_011
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60110
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_011
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_smolensk

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_smolensk }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_smolensk
	}

	option = {
		name = {
			text = EVTOPTA60110
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60110
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Prague
narrative_event = {
	id = 60111
	title = EVTNAME_TOG_012
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60111
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_012
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_praha

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_prague }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_prague
	}

	option = {
		name = {
			text = EVTOPTA60111
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60111
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Vienna
narrative_event = {
	id = 60112
	title = EVTNAME_TOG_013
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60112
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_013
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_wien

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_vienna }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_vienna
	}

	option = {
		name = {
			text = EVTOPTA60112
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60112
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Esztergom
narrative_event = {
	id = 60113
	title = EVTNAME_TOG_014
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60113
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_014
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_esztergom

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_esztergom }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_esztergom
	}

	option = {
		name = {
			text = EVTOPTA60113
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = INTERESTING
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Athens
narrative_event = {
	id = 60114
	title = EVTNAME_TOG_015
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60114
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_015
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_athens

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_athens }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_athens
	}

	option = {
		name = {
			text = EVTOPTA60114
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = UNFORTUNATE
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Belgrade
narrative_event = {
	id = 60115
	title = EVTNAME_TOG_016
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60115
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_016
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_belgrade

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_belgrade }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_belgrade
	}

	option = {
		name = {
			text = EVTOPTA60115
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60115
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

### Mongols sack Middle Eastern cities ###

# Mongols sack Baghdad
narrative_event = {
	id = 60116
	title = EVTNAME_TOG_017
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60116
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_017
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_bagdad

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_baghdad }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_baghdad
	}

	option = {
		name = {
			text = EVTOPTA60116
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60116
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Damascus
narrative_event = {
	id = 60117
	title = EVTNAME_TOG_018
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60117
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_018
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_damascus

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_damascus }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_damascus
	}

	option = {
		name = {
			text = EVTOPTA60117
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60117
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Jerusalem
narrative_event = {
	id = 60118
	title = EVTNAME_TOG_019
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60118
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_019
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_jerusalem

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes

		NOR = {
			has_global_flag = mongols_sack_jerusalem
			religion_group = muslim
			religion_group = christian
		}
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_jerusalem
	}

	option = {
		name = {
			text = EVTOPTA60118
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60118
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Alexandria
narrative_event = {
	id = 60119
	title = EVTNAME_TOG_020
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60119
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_020
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_alexandria

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_alexandria }
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_alexandria
	}

	option = {
		name = {
			text = EVTOPTA60119
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60119
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Cairo
narrative_event = {
	id = 60120
	title = EVTNAME_TOG_021
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60120
		picture = GFX_evt_mongols
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_021
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_cairo

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes
		NOT = { has_global_flag = mongols_sack_cairo }
	}

	major_trigger = {
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_cairo
	}

	option = {
		name = {
			text = EVTOPTA60120
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60120
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

# Mongols sack Mecca
narrative_event = {
	id = 60121
	title = EVTNAME_TOG_022
	border = GFX_event_narrative_frame_war

	desc = {
		text = EVTDESC60121
		picture = GFX_evt_mecca_falls_soa
		trigger = { is_mongol_empire_leader_trigger = no }
	}
	desc = {
		text = EVTDESC_TOG_022
		picture = GFX_evt_mongols_pillage_oldgods
		trigger = { is_mongol_empire_leader_trigger = yes }
	}

	major = yes
	is_triggered_only = yes # on_siege_over_winner

	culture = mongol

	trigger = {
		FROM = {
			title = b_mecca

			holder_scope = {
				is_mongol_empire_leader_trigger = no
			}
		}

		is_mongol_empire_leader_trigger = yes

		NOR = {
			religion_group = muslim
			has_global_flag = mongols_sack_mecca
		}
	}

	major_trigger = {
		ai = no
		is_mongol_empire_leader_trigger = no
	}

	immediate = {
		set_global_flag = mongols_sack_mecca
	}

	option = {
		name = {
			text = EVTOPTA60121
			trigger = {
				NOT = { religion_group = muslim }
			}
		}
		name = {
			text = EVTOPTB60121
			trigger = { religion_group = muslim }
		}

		trigger = { is_mongol_empire_leader_trigger = no }
	}

	option = {
		name = EVTOPTA_TOG_001

		trigger = { is_mongol_empire_leader_trigger = yes }

		prestige = 100
	}
}

##################################
# Rise of the Seljuks
##################################

# Seljuk distinguishes himself in a Turkish court
character_event = {
	id = 60200
	desc = EVTDESC60200
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes # on_yearly_pulse, random_events, turkic_invasions

	only_playable = yes
	war = no

	trigger = {
		is_landed = yes

		trigger_if = {
			limit = { has_dlc = "Horse Lords" }
			is_nomadic = yes
		}
		trigger_else = {
			is_tribal = yes
		}

		OR = {
			culture = turkish
			culture = cuman
			culture = uyghur
			culture = karluk
		}

		NOR = {
			has_game_rule = {
				name = turkic_invasions
				value = off
			}

			has_global_flag = seljuk_spawned
		}

		trigger_if = {
			limit = {
				has_game_rule = {
					name = turkic_invasions
					value = random
				}
			}

			year >= 809
			year < 1200
		}
		trigger_else = {
			year >= 980
			year < 1000
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 4
			culture = turkish
		}

		mult_modifier = {
			factor = 0.05

			has_game_rule = {
				name = turkic_invasions
				value = random
			}
		}
	}

	immediate = {
		set_global_flag = seljuk_spawned

		create_character = {
			random_traits = no
			historical = yes
			dynasty = 613 # Seljuk
			name = "Seljuk"
			culture = turkish
			religion = ROOT
			age = 20
			health = 7
			fertility = 0.8

			attributes = {
				martial = 12
				diplomacy = 8
				stewardship = 5
				intrigue = 4
				learning = 3
			}

			add_trait = brilliant_strategist
			add_trait = wroth
			add_trait = cruel
			add_trait = proud
			add_trait = ambitious
		}

		new_character = {
			if = {
				limit = { has_dlc = "Holy Fury" }

				create_bloodline = {
					type = seljuk
				}
			}

			character_event = {
				id = 60201
				days = 1400
				random = 730
			}

			set_character_flag = is_special_character
			set_character_flag = seljuk_himself

			if = {
				limit = { religion = sunni }
				add_trait = zealous
			}
		}
	}

	option = { # A most capable young man
		name = EVTOPTA60200

		tooltip = {
			create_character = {
				name = "Seljuk"
			}
		}
	}
}

# Seljuk and his men consider starting an adventure
character_event = {
	id = 60201
	desc = EVTDESC60201
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	prisoner = no
	only_capable = yes
	war = no

	trigger = {
		trigger_if = {
			limit = { is_ruler = yes }

			trigger_if = {
				limit = { is_nomadic = yes }
				lower_tier_than = EMPEROR
			}
			trigger_else = {
				lower_real_tier_than = KING
			}
		}

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
			trait = content
			trait = craven
			trait = depressed
			trait = imbecile
			liege = { war = yes }
			has_character_flag = seljuk_started_adventure
		}

		any_independent_ruler = {
			OR = {
				completely_controls = c_merv
				completely_controls = c_dihistan
				completely_controls = c_tus
			}

			NOT = { same_realm = ROOT }
			war = no
			is_nomadic = no
			is_tributary = no
		}
	}

	fail_trigger_effect = {
		if = {
			limit = {
				OR = {
					prisoner = yes
					war = yes
				}
			}

			# Try again later
			repeat_event = {
				id = 60201
				years = 1
			}
		}
	}

	immediate = {
		add_trait = adventurer
		set_character_flag = seljuk_started_adventure
	}

	option = { # Merv it is!
		name = EVTOPTA60201

		trigger = {
			c_merv = {
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_merv = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 1000 }
	}

	option = { # Tus
		name = EVTOPTB60201

		trigger = {
			c_tus = {
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_tus = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 10000 }
	}

	option = { # Dihistan
		name = EVTOPTC60201

		trigger = {
			c_dihistan = { # Dihistan
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_dihistan = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTD60201 # I am fine where I am

		trigger = { ai = no }
	}

	after = {
		if = {
			limit = { is_ruler = yes }

			character_event = {
				id = 60204
				# days = 2
			}
		}
		else = {
			character_event = {
				id = 60203
				# days = 2
			}
		}
	}
}

# Ping the target province - removed

# The landless Seljuk and his men start an adventure
character_event = {
	id = 60203

	hide_window = yes
	is_triggered_only = yes

	prisoner = no
	only_capable = yes

	trigger = {
		lower_tier_than = KING

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
		}
	}

	immediate = {
		wealth = 500
		prestige = 500

		any_liege = {
			character_event = {
				id = 60205
				days = 1
			}
		}

		liege = {
			capital_scope = {
				save_event_target_as = liege_capital
			}

			if = {
				limit = { is_nomadic = yes }

				ROOT = {
					set_character_flag = will_be_nomadic
				}
			}
		}

		event_target:target_province = {
			duchy = {
				save_event_target_as = target_duchy
			}

			owner = {
				top_liege = {
					ROOT = {
						set_defacto_liege = ROOT

						create_title = {
							tier = DUKE
							landless = yes
							temporary = yes
							culture = ROOT
							name = CLAIMANT_ADVENTURE
							holder = ROOT
						}

						if = {
							limit = { has_character_flag = will_be_nomadic }
							clr_character_flag = will_be_nomadic
							set_government_type = nomadic_government
							population = 5000
						}
						else = {
							set_government_type = tribal_government
						}

						set_character_flag = duchy_adventurer

						spawn_unit = {
							province = event_target:liege_capital
							home = event_target:liege_capital
							owner = THIS

							troops = {
								horse_archers = { 2700 2700 }
								light_cavalry = { 1600 1600 }
								light_infantry = { 541 541 }
								heavy_infantry = { 210 210 }
								knights = { 47 47 }
							}

							attrition = 0.1
							cannot_inherit = yes
							maintenance_multiplier = 0
							earmark = seljuk_event_troops
						}

						while = {
							count = 5

							spawn_unit = {
								province = event_target:liege_capital
								home = event_target:liege_capital
								owner = THIS
								match_character = PREV
								match_mult = 0.33
								match_min = 500
								match_max = 10000
								attrition = 0.1
								disband_on_peace = yes
								maintenance_multiplier = 0
								earmark = seljuk_event_troops
							}
						}

						war = {
							target = PREV
							casus_belli = duchy_adventure
							thirdparty_title = event_target:target_duchy
							infamy = 0
						}
					}
				}
			}
		}

		if = {
			limit = {
				NOT = { religion_group = muslim }
			}

			add_trait = zealous
			religion = sunni
		}

		# Create some characters
		while = {
			count = 3

			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 22
			}

			new_character = {
				random_list = {
					1 = { }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
					1 = { add_age = 8 }
				}
			}

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = yes
				age = 16
			}

			new_character = {
				random_list = {
					1 = { }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
				}
			}
		}

		log = "60203: Seljuk starts his first war as a landless character!"
	}
}

# The landed Seljuk and his men start an adventure
character_event = {
	id = 60204
	desc = EVTDESC60204
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { real_tier = BARON }

			abdicate = yes
			repeat_event = { id = 60203 }
		}
		else = {
			wealth = 500
			prestige = 500

			any_liege = {
				character_event = {
					id = 60205
					days = 1
				}
			}

			event_target:target_province = {
				duchy = {
					save_event_target_as = target_duchy
				}

				owner = {
					top_liege = {
						ROOT = {
							if = {
								limit = { lower_real_tier_than = COUNT }

								create_title = {
									tier = DUKE
									landless = yes
									temporary = yes
									culture = ROOT
									name = CLAIMANT_ADVENTURE
									holder = ROOT
								}
							}

							if = {
								limit = { is_nomadic = yes }
								population = 5000
							}

							set_character_flag = duchy_adventurer

							spawn_unit = {
								province = capital_scope
								home = capital_scope
								owner = THIS

								troops = {
									horse_archers = { 2700 2700 }
									light_cavalry = { 1600 1600 }
									light_infantry = { 541 541 }
									heavy_infantry = { 210 210 }
									knights = { 47 47 }
								}

								attrition = 0.1
								cannot_inherit = yes
								maintenance_multiplier = 0
								earmark = seljuk_event_troops
							}

							while = {
								count = 6

								spawn_unit = {
									province = capital_scope
									home = capital_scope
									owner = THIS
									match_character = PREV
									match_mult = 0.33
									match_min = 500
									match_max = 10000
									attrition = 0.1
									disband_on_peace = yes
									maintenance_multiplier = 0
									earmark = seljuk_event_troops
								}
							}

							war = {
								target = PREV
								casus_belli = duchy_adventure
								thirdparty_title = event_target:target_duchy
								infamy = 0
							}
						}
					}
				}
			}

			if = {
				limit = {
					NOT = { religion_group = muslim }
				}

				add_trait = zealous
				religion = sunni
			}

			# Create some characters
			while = {
				count = 3

				create_random_soldier = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = no
					age = 22
				}

				new_character = {
					random_list = {
						1 = { }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
						1 = { add_age = 3 }
						1 = { add_age = 4 }
						1 = { add_age = 5 }
						1 = { add_age = 6 }
						1 = { add_age = 7 }
						1 = { add_age = 8 }
					}
				}

				create_character = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = yes
					age = 16
				}

				new_character = {
					random_list = {
						1 = { }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
					}
				}
			}

			log = "60204: Seljuk starts his first war as a landed character!"
		}
	}

	option = {
		name = EVTOPTA60204
	}
}

# Notify Seljuk's old liege
character_event = {
	id = 60205
	desc = EVTDESC60205
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	ai = no

	trigger = {
		FROM = { is_ruler = yes } # The DoW worked and the adventurer has a temporary title
	}

	option = {
		name = EVTOPTA60205
	}
}

# Seljuk is successful!
# Fired from the duchy_adventure CB
narrative_event = {
	id = 60206
	title = EVTNAME60206
	desc = EVTDESC60206
	picture = GFX_evt_mongols
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes
	major = yes

	major_trigger = {
		ai = no
	}

	immediate = {
		set_character_flag = seljuk_reinforcements
		set_defacto_liege = ROOT
		prestige = 500

		if = {
			limit = { religion_group = muslim }
			piety = 100
		}

		spawn_unit = {
			province = capital_scope
			home = capital_scope
			owner = THIS
			attrition = 0.1
			maintenance_multiplier = 0
			earmark = seljuk_event_troops

			troops = {
				horse_archers = { 2700 2700 }
				light_cavalry = { 1600 1600 }
				light_infantry = { 541 541 }
				heavy_infantry = { 210 210 }
				knights = { 47 47 }
			}
		}

		while = {
			count = 6

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS
				attrition = 0.1
				maintenance_multiplier = 0
				earmark = seljuk_event_troops

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		log = "60206: Seljuk wins his first war!"
	}

	option = {
		name = {
			text = EVTOPTA60206
			trigger = { has_character_flag = seljuk_himself }
		}
		name = {
			text = EVTOPTB60206
			trigger = {
				NOT = { has_character_flag = seljuk_himself }

				OR = {
					culture = turkish
					culture = karluk
					culture = cuman
					culture = pecheneg
				}
			}
		}
		name = {
			text = EVTOPTC60206
			trigger = {
				NOR = {
					has_character_flag = seljuk_himself
					culture = turkish
					culture = karluk
					culture = cuman
					culture = pecheneg
				}
			}
		}
	}
}

# Seljuk's successor revitalizes the new state
character_event = {
	id = 60207
	desc = EVTDESC60207
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes # on_yearly_pulse, random_events, turkic_invasions

	only_independent = yes
	religion_group = muslim
	has_global_flag = seljuk_spawned
	war = no

	trigger = {
		dynasty = 613 # Seljuk
		real_tier = KING
		martial >= 7
		year >= 980
		year < 1100
		realm_size < 150

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
			trait = content
			trait = craven
			trait = depressed
			trait = imbecile
			trait = slow
			has_character_flag = seljuk_himself
			has_character_flag = seljuk_reinforcements
			has_earmarked_regiments = seljuk_event_troops
			has_global_flag = seljuk_state_revitalised
		}

		father = {
			OR = {
				has_character_flag = seljuk_himself

				father = {
					has_character_flag = seljuk_himself
				}
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 2
			martial >= 9
		}

		mult_modifier = {
			factor = 2
			martial >= 11
		}

		mult_modifier = {
			factor = 2
			martial >= 13
		}
	}

	immediate = {
		set_character_flag = seljuk_reinforcements
		set_global_flag = seljuk_state_revitalised
		piety = 250

		while = {
			count = 2

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS
				attrition = 0.1
				maintenance_multiplier = 0
				earmark = seljuk_event_troops
				cannot_inherit = yes

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		if = {
			limit = { martial >= 12 }

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		if = {
			limit = { martial >= 15 }

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}
	}

	option = {
		name = EVTOPTA60207
	}
}

# Event troops no longer needed
character_event = {
	id = 60208
	desc = EVTDESC60208
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes # on_five_year_pulse

	only_independent = yes
	has_character_flag = seljuk_reinforcements
	war = no

	trigger = {
		has_earmarked_regiments = seljuk_event_troops
		tier = EMPEROR
		realm_size >= 150
	}

	option = {
		name = EVTOPTA60208

		disband_event_forces = seljuk_event_troops
	}
}

##################################
# Rise of the Timurids
##################################

# Timur distinguishes himself at a Mongol court
character_event = {
	id = 60300
	desc = EVTDESC60300
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes # on_yearly_pulse, random_events, turkic_invasions

	only_playable = yes
	culture = mongol

	trigger = {
		higher_real_tier_than = COUNT

		NOT = {
			has_game_rule = {
				name = turkic_invasions
				value = off
			}
		}

		trigger_if = {
			limit = {
				has_game_rule = {
					name = turkic_invasions
					value = historical
				}
			}

			has_global_flag = mongol_empire_arrival
			year >= 1350
			year < 1370
		}
		trigger_else = {
			has_game_rule = {
				name = turkic_invasions
				value = random
			}
			year >= 1200
		}

		NOT = { has_global_flag = timur_spawned }

		any_realm_province = {
			OR = {
				region = custom_persia
				region = custom_baluchistan
				region = custom_afghanistan
				region = custom_khwarizm
				region = custom_mesopotamia
			}

			held_under_PREV = yes
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 0.1

			has_game_rule = {
				name = turkic_invasions
				value = random
			}
		}
	}

	immediate = {
		set_global_flag = timur_spawned

		create_character = {
			random_traits = no
			historical = yes
			name = "Timur"
			dynasty = 800
			religion = ROOT
			culture = ROOT
			female = no
			age = 18
			health = 6
			fertility = 0.8

			attributes = {
				martial = 12
				diplomacy = 8
				stewardship = 9
				intrigue = 9
				learning = 6
			}

			add_trait = brilliant_strategist
			add_trait = diligent
			add_trait = ambitious
			add_trait = proud
			add_trait = quick
			add_trait = clubfooted
		}

		new_character = {
			set_character_flag = is_special_character
			set_character_flag = timur_himself

			if = {
				limit = { has_dlc = "Holy Fury" }

				create_bloodline = {
					type = timur
				}
			}

			character_event = {
				id = 60301
				days = 3285
				random = 730
			}
		}
	}

	option = { # A most capable young man
		name = EVTOPTA60300

		tooltip = {
			create_character = {
				name = "Timur"
			}
		}
	}
}

# Timur and his men consider starting an adventure
character_event = {
	id = 60301
	desc = EVTDESC60201
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	prisoner = no
	only_capable = yes
	war = no

	trigger = {
		trigger_if = {
			limit = { is_ruler = yes }

			trigger_if = {
				limit = { is_nomadic = yes }
				lower_tier_than = EMPEROR
			}
			trigger_else = {
				lower_real_tier_than = KING
			}
		}

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
			trait = content
			trait = craven
			trait = depressed
			trait = imbecile
			liege = { war = yes }
			has_character_flag = timur_started_adventure
		}

		any_independent_ruler = {
			war = no
			NOT = { same_realm = ROOT }
			is_nomadic = no
			is_tributary = no

			OR = {
				c_merv = {
					holder_scope = {
						same_realm = PREVPREV

						OR = {
							has_landed_title = d_merv
							completely_controls = d_merv
						}
					}
				}

				c_dihistan = {
					holder_scope = {
						same_realm = PREVPREV

						OR = {
							has_landed_title = d_tabaristan
							completely_controls = d_tabaristan
						}
					}
				}

				c_tus = {
					holder_scope = {
						same_realm = PREVPREV

						OR = {
							has_landed_title = d_khorasan
							completely_controls = d_khorasan
						}
					}
				}

				c_samarkand = {
					holder_scope = {
						same_realm = PREVPREV

						OR = {
							has_landed_title = d_samarkand
							completely_controls = d_samarkand
						}
					}
				}

				c_balkh = {
					holder_scope = {
						same_realm = PREVPREV

						OR = {
							has_landed_title = d_balkh
							completely_controls = d_balkh
						}
					}
				}
			}
		}
	}

	fail_trigger_effect = {
		if = {
			limit = {
				OR = {
					prisoner = yes
					war = yes
				}
			}

			# Try again later
			repeat_event = {
				id = 60301
				years = 1
			}
		}
	}

	immediate = {
		add_trait = adventurer
		set_character_flag = timur_started_adventure
	}

	option = { # Merv it is!
		name = EVTOPTA60201

		trigger = {
			c_merv = { # Merv
				holder_scope = {
					NOT = { same_realm = ROOT }

					OR = {
						has_landed_title = d_merv
						completely_controls = d_merv
					}

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_merv = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 10000 }
	}

	option = { # Khorasan
		name = EVTOPTB60201

		trigger = {
			c_tus = { # Tus
				holder_scope = {
					NOT = { same_realm = ROOT }

					OR = {
						has_landed_title = d_tabaristan
						completely_controls = d_tabaristan
					}

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_tus = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 1000 }
	}

	option = { # Dihistan
		name = EVTOPTC60201

		trigger = {
			c_dihistan = { # Dihistan
				holder_scope = {
					NOT = { same_realm = ROOT }

					OR = {
						has_landed_title = d_khorasan
						completely_controls = d_khorasan
					}

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_dihistan = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 100 }
	}

	option = { # Samarkand
		name = EVTOPTD60201

		trigger = {
			c_samarkand = { # Dihistan
				holder_scope = {
					NOT = { same_realm = ROOT }

					OR = {
						has_landed_title = d_samarkand
						completely_controls = d_samarkand
					}

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_samarkand = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 100 }
	}

	option = { # Balkh
		name = EVTOPTE60201

		trigger = {
			c_balkh = { # Dihistan
				holder_scope = {
					NOT = { same_realm = ROOT }

					OR = {
						has_landed_title = d_balkh
						completely_controls = d_balkh
					}

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_balkh = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTD60201 # I am fine where I am

		trigger = { ai = no }
	}

	after = {
		if = {
			limit = { is_ruler = yes }

			character_event = {
				id = 60304
				# days = 2
			}
		}
		else = {
			character_event = {
				id = 60303
				# days = 2
			}
		}
	}
}

# Ping the target province - removed

# The landless Timur and his men start an adventure
character_event = {
	id = 60303

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		wealth = 500
		prestige = 500

		any_liege = {
			character_event = {
				id = 60305
				days = 1
			}
		}

		liege = {
			capital_scope = {
				save_event_target_as = liege_capital
			}

			if = {
				limit = { is_nomadic = yes }

				ROOT = {
					set_character_flag = will_be_nomadic
				}
			}
		}

		event_target:target_province = {
			duchy = {
				save_event_target_as = target_duchy
			}

			owner = {
				top_liege = {
					ROOT = {
						set_defacto_liege = ROOT

						create_title = {
							tier = DUKE
							landless = yes
							temporary = yes
							culture = ROOT
							name = CLAIMANT_ADVENTURE
							holder = ROOT
						}

						if = {
							limit = { has_character_flag = will_be_nomadic }

							clr_character_flag = will_be_nomadic
							set_government_type = nomadic_government
							population = 5000
						}

						set_character_flag = duchy_adventurer

						spawn_unit = {
							province = event_target:liege_capital
							home = event_target:liege_capital
							owner = THIS
							attrition = 0.1
							cannot_inherit = yes
							maintenance_multiplier = 0
							earmark = timur_event_troops

							troops = {
								horse_archers = { 2700 2700 }
								light_cavalry = { 1600 1600 }
								light_infantry = { 541 541 }
								heavy_infantry = { 210 210 }
								knights = { 47 47 }
							}
						}

						while = {
							count = 6

							spawn_unit = {
								province = event_target:liege_capital
								home = event_target:liege_capital
								owner = THIS
								match_character = PREV
								match_mult = 0.33
								match_min = 500
								match_max = 10000
								attrition = 0.1
								disband_on_peace = yes
								maintenance_multiplier = 0
								earmark = timur_event_troops
							}
						}

						war = {
							target = PREV
							casus_belli = duchy_adventure
							thirdparty_title = event_target:target_duchy
							infamy = 0
						}
					}
				}
			}
		}

		# Create some characters
		while = {
			count = 5

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 23

				attributes = {
					martial = 12
				}

				add_trait = brilliant_strategist
			}

			new_character = {
				random_list = {
					1 = { }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
				}
			}
		}

		while = {
			count = 3

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = yes
				age = 16
			}

			new_character = {
				random_list = {
					1 = { }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
				}
			}
		}

		log = "60303: Timur starts his first war (landless)!"
	}
}

# The landed Timur and his men start an adventure
character_event = {
	id = 60304
	desc = EVTDESC60304
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { real_tier = BARON }

			abdicate = yes
			repeat_event = { id = 60303 }
		}
		else = {
			wealth = 500
			prestige = 500

			any_liege = {
				character_event = {
					id = 60305
					days = 1
				}
			}

			event_target:target_province = {
				duchy = {
					save_event_target_as = target_duchy
				}

				owner = {
					top_liege = {
						ROOT = {
							set_character_flag = duchy_adventurer

							if = {
								limit = { is_nomadic = yes }
								population = 5000
							}

							spawn_unit = {
								province = capital_scope
								home = capital_scope
								owner = THIS
								attrition = 0.1
								cannot_inherit = yes
								maintenance_multiplier = 0
								earmark = timur_event_troops

								troops = {
									horse_archers = { 2700 2700 }
									light_cavalry = { 1600 1600 }
									light_infantry = { 541 541 }
									heavy_infantry = { 210 210 }
									knights = { 47 47 }
								}
							}

							while = {
								count = 6

								spawn_unit = {
									province = capital_scope
									home = capital_scope
									owner = THIS
									match_character = PREV
									match_mult = 0.33
									match_min = 500
									match_max = 10000
									attrition = 0.1
									disband_on_peace = yes
									maintenance_multiplier = 0
									earmark = timur_event_troops
								}
							}

							war = {
								target = PREV
								casus_belli = duchy_adventure
								thirdparty_title = event_target:target_duchy
								infamy = 0
							}
						}
					}
				}
			}

			# Create some characters
			while = {
				count = 5

				create_character = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = no
					age = 23

					attributes = {
						martial = 12
					}

					add_trait = brilliant_strategist
				}

				new_character = {
					random_list = {
						1 = { }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
						1 = { add_age = 3 }
						1 = { add_age = 4 }
						1 = { add_age = 5 }
						1 = { add_age = 6 }
						1 = { add_age = 7 }
					}
				}
			}

			while = {
				count = 3

				create_character = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = yes
					age = 16
				}

				new_character = {
					random_list = {
						1 = { }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
					}
				}
			}

			log = "60304: Timur starts his first war (landed)!"
		}
	}

	option = {
		name = EVTOPTA60204
	}
}

# Notify Timur's old liege
character_event = {
	id = 60305
	desc = EVTDESC60205
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	ai = no

	trigger = {
		FROM = { is_ruler = yes } # The DoW worked and the adventurer has a temporary title
	}

	option = {
		name = EVTOPTA60305
	}
}

# Timur is successful!
# Fired from the duchy_adventure CB
narrative_event = {
	id = 60306
	title = EVTNAME60306
	desc = EVTDESC60306
	picture = GFX_evt_mongols
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes
	major = yes

	major_trigger = {
		ai = no
	}

	immediate = {
		set_character_flag = timur_reinforcements
		set_defacto_liege = ROOT
		prestige = 1000

		if = {
			limit = { religion_group = muslim }
			piety = 100
		}

		while = {
			count = 8

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS
				attrition = 0.1
				maintenance_multiplier = 0
				earmark = timur_event_troops

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		while = {
			count = 6

			random = {
				chance = 50

				spawn_unit = {
					province = capital_scope
					home = capital_scope
					owner = THIS

					troops = {
						light_infantry = { 2250 2250 }
						light_cavalry = { 2000 2000 }
						horse_archers = { 1500 1500 }
						knights = { 50 50 }
					}
				}
			}
		}

		log = "60306: Timur wins his first war!"
	}

	option = {
		name = {
			text = EVTOPTA60306
			trigger = { has_character_flag = timur_himself }
		}
		name = {
			text = EVTOPTB60306
			trigger = {
				NOT = { has_character_flag = timur_himself }
				culture = mongol
			}
		}
		name = {
			text = EVTOPTC60306
			trigger = {
				NOR = {
					has_character_flag = timur_himself
					culture = mongol
				}
			}
		}
	}
}

# Timur's successors revitalize the state
character_event = {
	id = 60307
	desc = EVTDESC60307
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes # on_yearly_pulse, random_events, turkic_invasions

	only_independent = yes
	has_global_flag = timur_spawned

	trigger = {
		dynasty = 800 # Timurid
		real_tier = KING
		realm_size < 150
		martial >= 7
		year >= 1370
		year < 1500

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
			trait = content
			trait = craven
			trait = depressed
			trait = imbecile
			has_character_flag = timur_himself
			has_character_flag = timur_reinforcements
			has_global_flag = timurid_state_revitalised
		}

		father = {
			OR = {
				has_character_flag = timur_himself

				father = {
					has_character_flag = timur_himself
				}
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 2
			martial >= 9
		}

		mult_modifier = {
			factor = 2
			martial >= 11
		}

		mult_modifier = {
			factor = 2
			martial >= 13
		}
	}

	immediate = {
		set_character_flag = timur_reinforcements
		set_global_flag = timurid_state_revitalised

		if = {
			limit = { religion_group = muslim }
			piety = 250
		}

		while = {
			count = 4

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS
				attrition = 0.1
				maintenance_multiplier = 0
				earmark = timur_event_troops
				cannot_inherit = yes

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		if = {
			limit = { martial >= 12 }

			while = {
				count = 1

				spawn_unit = {
					province = capital_scope
					home = capital_scope
					owner = THIS

					troops = {
						light_infantry = { 2250 2250 }
						light_cavalry = { 2000 2000 }
						horse_archers = { 1500 1500 }
						knights = { 50 50 }
					}
				}
			}
		}

		if = {
			limit = { martial >= 15 }

			while = {
				count = 1

				spawn_unit = {
					province = capital_scope
					home = capital_scope
					owner = THIS

					troops = {
						light_infantry = { 2250 2250 }
						light_cavalry = { 2000 2000 }
						horse_archers = { 1500 1500 }
						knights = { 50 50 }
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTA60307
	}
}

# Event troops no longer needed
character_event = {
	id = 60308
	desc = EVTDESC60208
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes # on_five_year_pulse

	only_independent = yes
	has_character_flag = timur_reinforcements
	war = no

	trigger = {
		has_earmarked_regiments = timur_event_troops
		tier = EMPEROR
		realm_size >= 150
	}

	option = {
		name = EVTOPTA60208

		disband_event_forces = timur_event_troops
	}
}

##########################################
# Rise of the Ghaznavids under Sabuktigin
##########################################

# Sabuktigin distinguishes himself at a Muslim court
character_event = {
	id = 60400
	desc = EVTDESC60400
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes # on_yearly_pulse, random_events, turkic_invasions

	only_independent = yes
	religion_group = muslim

	trigger = {
		OR = {
			completely_controls = c_ghazna
			completely_controls = c_bost
			completely_controls = c_mandesh
		}

		higher_real_tier_than = COUNT

		NOR = {
			has_global_flag = sabuktigin_spawned

			has_game_rule = {
				name = turkic_invasions
				value = off
			}
		}

		trigger_if = {
			limit = {
				has_game_rule = {
					name = turkic_invasions
					value = historical
				}
			}

			year >= 965
			year < 1010
		}
		trigger_else = {
			has_game_rule = {
				name = turkic_invasions
				value = random
			}
			year >= 809
			year < 1200
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 0.12

			has_game_rule = {
				name = turkic_invasions
				value = random
			}
		}
	}

	immediate = {
		set_global_flag = sabuktigin_spawned

		create_character = {
			random_traits = no
			historical = yes
			name = "Sabuktigin"
			dynasty = 790
			religion = ROOT
			culture = ROOT
			female = no
			age = 18
			health = 6
			fertility = 0.8

			attributes = {
				martial = 12
				diplomacy = 8
				stewardship = 9
				intrigue = 9
				learning = 6
			}

			add_trait = brilliant_strategist
			add_trait = diligent
			add_trait = ambitious
			add_trait = proud
			add_trait = quick
		}

		new_character = {
			set_character_flag = sabuktigin_himself

			if = {
				limit = { has_dlc = "Holy Fury" }

				create_bloodline = {
					type = ghaznavid
				}
			}

			character_event = {
				id = 60401
				days = 3285
				random = 730
			}
		}
	}

	option = { # A most capable young man
		name = EVTOPTA60300

		tooltip = {
			create_character = {
				name = "Sabuktigin"
			}
		}
	}
}

# Sabuktigin and his men consider starting an adventure
character_event = {
	id = 60401
	desc = EVTDESC60201
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	prisoner = no
	only_capable = yes
	war = no

	trigger = {
		trigger_if = {
			limit = { is_ruler = yes }

			trigger_if = {
				limit = { is_nomadic = yes }
				lower_tier_than = EMPEROR
			}
			trigger_else = {
				lower_real_tier_than = KING
			}
		}

		NOR = {
			trait = blinded
			trait = eunuch
			trait = infirm
			trait = content
			trait = craven
			trait = depressed
			trait = imbecile
			liege = { war = yes }
			has_character_flag = sabuktigin_started_adventure
		}

		any_independent_ruler = {
			war = no
			NOT = { same_realm = ROOT }
			is_nomadic = no
			is_tributary = no

			OR = {
				completely_controls = c_nandana
				completely_controls = c_multan
				completely_controls = c_lahur
				completely_controls = c_bhakkar
			}
		}
	}

	fail_trigger_effect = {
		if = {
			limit = {
				OR = {
					prisoner = yes
					war = yes
				}
			}

			# Try again later
			repeat_event = {
				id = 60401
				years = 1
			}
		}
	}

	immediate = {
		add_trait = adventurer
		set_character_flag = sabuktigin_started_adventure
	}

	option = { # Gandhara it is!
		name = EVTOPTA60401

		trigger = {
			c_nandana = { # Nandana
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_nandana = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 10000 }
	}

	option = { # Multan
		name = EVTOPTB60401

		trigger = {
			c_multan = { # Multan
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_multan = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 1000 }
	}

	option = { # Lahore
		name = EVTOPTC60401

		trigger = {
			c_lahur = { # Lahore
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_lahur = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 100 }
	}

	option = { # Bhakkar
		name = EVTOPTD60401

		trigger = {
			c_bhakkar = { # Bhakkar
				holder_scope = {
					NOT = { same_realm = ROOT }

					top_liege = {
						war = no
						is_nomadic = no
						is_tributary = no
					}
				}
			}
		}

		custom_tooltip = {
			text = BEGIN_ADVENTURE

			c_bhakkar = {
				location = {
					save_event_target_as = target_province
				}
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTD60201 # I am fine where I am

		trigger = { ai = no }
	}

	after = {
		if = {
			limit = { is_ruler = yes }

			character_event = {
				id = 60404
				# days = 2
			}
		}
		else = {
			character_event = {
				id = 60403
				# days = 2
			}
		}
	}
}

# Ping the target province - removed

# The landless Sabuktigin and his men start an adventure
character_event = {
	id = 60403

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		wealth = 500
		prestige = 500

		any_liege = {
			character_event = {
				id = 60405
				days = 1
			}
		}

		liege = {
			capital_scope = {
				save_event_target_as = liege_capital
			}

			if = {
				limit = { is_nomadic = yes }

				ROOT = {
					set_character_flag = will_be_nomadic
				}
			}
		}

		event_target:target_province = {
			duchy = {
				save_event_target_as = target_duchy
			}

			owner = {
				top_liege = {
					ROOT = {
						set_defacto_liege = ROOT

						create_title = {
							tier = DUKE
							landless = yes
							temporary = yes
							culture = ROOT
							name = CLAIMANT_ADVENTURE
							holder = ROOT
						}

						if = {
							limit = { has_character_flag = will_be_nomadic }

							clr_character_flag = will_be_nomadic
							set_government_type = nomadic_government
							population = 5000
						}

						set_character_flag = duchy_adventurer

						spawn_unit = {
							province = event_target:liege_capital
							home = event_target:liege_capital
							owner = THIS
							attrition = 0.1
							cannot_inherit = yes
							maintenance_multiplier = 0
							earmark = sabuktigin_event_troops

							troops = {
								horse_archers = { 2700 2700 }
								light_cavalry = { 1600 1600 }
								light_infantry = { 541 541 }
								heavy_infantry = { 210 210 }
								knights = { 47 47 }
							}
						}

						while = {
							count = 6

							spawn_unit = {
								province = event_target:liege_capital
								home = event_target:liege_capital
								owner = THIS
								match_character = PREV
								match_mult = 0.33
								match_min = 500
								match_max = 10000
								attrition = 0.1
								disband_on_peace = yes
								maintenance_multiplier = 0
								earmark = sabuktigin_event_troops
							}
						}

						war = {
							target = PREV
							casus_belli = duchy_adventure
							thirdparty_title = event_target:target_duchy
							infamy = 0
						}
					}
				}
			}
		}

		# Create some characters
		while = {
			count = 5

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 23

				attributes = {
					martial = 12
				}

				add_trait = brilliant_strategist
			}

			new_character = {
				random_list = {
					1 = { }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
				}
			}
		}

		while = {
			count = 3

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = yes
				age = 16
			}

			new_character = {
				random_list = {
					1 = { }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
				}
			}
		}

		log = "60403: Sabuktigin starts his first war (landless)!"
	}
}

# The landed Sabuktigin and his men start an adventure
character_event = {
	id = 60404
	desc = EVTDESC60304
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { real_tier = BARON }

			abdicate = yes
			repeat_event = { id = 60403 }
		}
		else = {
			wealth = 500
			prestige = 500

			any_liege = {
				character_event = {
					id = 60405
					days = 1
				}
			}

			event_target:target_province = {
				duchy = {
					save_event_target_as = target_duchy
				}

				owner = {
					top_liege = {
						ROOT = {
							set_character_flag = duchy_adventurer

							if = {
								limit = { is_nomadic = yes }
								population = 5000
							}

							spawn_unit = {
								province = capital_scope
								home = capital_scope
								owner = THIS
								attrition = 0.1
								cannot_inherit = yes
								maintenance_multiplier = 0
								earmark = sabuktigin_event_troops

								troops = {
									horse_archers = { 2700 2700 }
									light_cavalry = { 1600 1600 }
									light_infantry = { 541 541 }
									heavy_infantry = { 210 210 }
									knights = { 47 47 }
								}
							}

							while = {
								count = 6

								spawn_unit = {
									province = capital_scope
									home = capital_scope
									owner = THIS
									match_character = PREV
									match_mult = 0.33
									match_min = 500
									match_max = 10000
									attrition = 0.25
								}
							}

							war = {
								target = PREV
								casus_belli = duchy_adventure
								thirdparty_title = event_target:target_duchy
								infamy = 0
							}
						}
					}
				}
			}

			# Create some characters
			while = {
				count = 5

				create_character = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = no
					age = 23

					attributes = {
						martial = 12
					}

					add_trait = brilliant_strategist
				}

				new_character = {
					random_list = {
						1 = { }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
						1 = { add_age = 3 }
						1 = { add_age = 4 }
						1 = { add_age = 5 }
						1 = { add_age = 6 }
						1 = { add_age = 7 }
					}
				}
			}

			while = {
				count = 3

				create_character = {
					random_traits = yes
					dynasty = none
					religion = ROOT
					culture = ROOT
					female = yes
					age = 16
				}

				new_character = {
					random_list = {
						1 = { }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
					}
				}
			}

			log = "60404: Sabuktigin starts his first war (landed)!"
		}
	}

	option = {
		name = EVTOPTA60204
	}
}

# Notify Sabuktigin's old liege
character_event = {
	id = 60405
	desc = EVTDESC60205
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	ai = no

	trigger = {
		FROM = { is_ruler = yes } # The DoW worked and the adventurer has a temporary title
	}

	option = {
		name = EVTOPTA60305
	}
}

# Sabuktigin is successful!
# Fired from the duchy_adventure CB
narrative_event = {
	id = 60406
	title = EVTNAME60406
	desc = EVTDESC60406
	picture = GFX_evt_mongols
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes
	major = yes

	major_trigger = {
		ai = no
	}

	immediate = {
		set_defacto_liege = ROOT
		prestige = 500

		if = {
			limit = { religion_group = muslim }
			piety = 100
		}

		capital_scope = {
			religion = ROOT
			culture = ROOT
		}

		while = {
			count = 5

			spawn_unit = {
				province = capital_scope
				home = capital_scope
				owner = THIS
				attrition = 0.1
				maintenance_multiplier = 0
				earmark = sabuktigin_event_troops

				troops = {
					light_infantry = { 2250 2250 }
					light_cavalry = { 2000 2000 }
					horse_archers = { 1500 1500 }
					knights = { 50 50 }
				}
			}
		}

		while = {
			count = 3

			random = {
				chance = 50

				spawn_unit = {
					province = capital_scope
					home = capital_scope
					owner = THIS
					attrition = 0.1
					maintenance_multiplier = 0
					earmark = sabuktigin_event_troops

					troops = {
						light_infantry = { 2250 2250 }
						light_cavalry = { 2000 2000 }
						horse_archers = { 1500 1500 }
						knights = { 50 50 }
					}
				}
			}
		}

		random_realm_province = {
			limit = {
				NAND = {
					culture = ROOT
					religion = ROOT
				}

				held_under_PREV = yes
			}

			religion = ROOT
			culture = ROOT
		}

		log = "60406: Sabuktigin wins his first war!"
	}

	option = {
		name = {
			text = EVTOPTA60406
			trigger = { has_character_flag = sabuktigin_himself }
		}
		name = {
			text = EVTOPTB60406
			trigger = {
				NOT = { has_character_flag = sabuktigin_himself }
			}
		}
	}
}

# Event troops no longer needed
character_event = {
	id = 60407
	desc = EVTDESC60208
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes # on_five_year_pulse

	only_independent = yes
	has_character_flag = sabuktigin_himself
	war = no

	trigger = {
		has_earmarked_regiments = sabuktigin_event_troops
		tier = EMPEROR
		realm_size >= 150
	}

	option = {
		name = EVTOPTA60208

		disband_event_forces = sabuktigin_event_troops
	}
}

# Mongol horde starts forming
# CleanSlate: Changed from on_decade_pulse to on_five_year_pulse to avoid issues with the historical game rule
narrative_event = {
	id = 60500
	title = EVTNAME60500
	desc = EVTDESC60500
	picture = GFX_evt_mongols
	border = GFX_event_narrative_frame_war
	portrait = event_target:mongol_china_invader

	is_triggered_only = yes # on_five_year_pulse, random_events, mongol_invasions
	major = yes
	hide_from = yes
	hide_new = yes

	only_playable = yes

	trigger = {
		owns = event_target:pulse_province
		year < 1218

		trigger_if = {
			limit = {
				has_game_rule = {
					name = mongol_invasion
					value = historical
				}
			}

			year >= 1210
		}
		trigger_else_if = {
			limit = {
				has_game_rule = {
					name = mongol_invasion
					value = random
				}
			}

			total_years_played >= 50
		}
		trigger_else_if = {
			limit = {
				has_game_rule = {
					name = mongol_invasion
					value = delayed_random
				}
			}

			year >= 1000
			total_years_played >= 50
		}

		NOR = {
			has_game_rule = {
				name = mongol_invasion
				value = off
			}

			has_global_flag = il_khanate_arrival # Backwards compatibility
			has_global_flag = golden_horde_arrival # Backwards compatibility
			has_global_flag = mongol_empire_arrival
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 1.5
			year >= 1212
		}

		mult_modifier = {
			factor = 5
			year >= 1214
		}

		mult_modifier = {
			factor = 0.5
			year >= 1216
		}

		mult_modifier = {
			factor = 100 # If game has historical rule, ensure that the Mongol Invasion WILL happen when the time comes.

			has_game_rule = {
				name = mongol_invasion
				value = historical
			}
		}

		mult_modifier = {
			factor = 0.5

			has_game_rule = {
				name = mongol_invasion
				value = random
			}

			total_years_played < 100
		}

		mult_modifier = {
			factor = 0.5

			has_game_rule = {
				name = mongol_invasion
				value = delayed_random
			}

			total_years_played < 100
		}

		mult_modifier = {
			factor = 0.5

			has_game_rule = {
				name = mongol_invasion
				value = random
			}
		}

		mult_modifier = {
			factor = 0.6

			has_game_rule = {
				name = mongol_invasion
				value = delayed_random
			}
		}
	}

	immediate = {
		set_global_flag = mongol_empire_arrival

		activate_title = {
			title = e_mongol_empire
			status = yes
		}

		if = {
			limit = { has_global_flag = temujin_born }

			log = "MONGOL ARRIVAL: Temujin detected as born"

			# First find him
			any_independent_ruler = {
				if = {
					limit = { has_character_flag = is_temujin }
					save_event_target_as = temujin
				}

				any_realm_character = {
					limit = { has_character_flag = is_temujin }
					save_event_target_as = temujin
				}
			}

			# Temujin still exists and is Tengri pagan and capable
			if = {
				limit = {
					event_target:temujin = {
						is_alive = yes
						prisoner = no
						health >= 5
						religion = tengri_pagan
						is_incapable = no
						is_maimed_trigger = no
					}
				}

				event_target:temujin = {
					save_event_target_as = mongol_china_invader
					add_trait = bloodlust

					# He's already a count or higher
					if = {
						limit = { higher_real_tier_than = BARON }

						log = "MONGOL ARRIVAL: Temujin already exists as a ruler"
						set_defacto_liege = THIS
						pf_liege_change_effect = yes

						# Become a nomad/tribal if not already
						if = {
							limit = {
								has_dlc = "Horse Lords"
								is_nomadic = no
							}
							set_government_type = nomadic_government
						}
						else_if = {
							limit = { is_tribal = no }
							set_government_type = tribal_government
						}

						# Destroy any current emperor titles and grant Mongol Empire
						e_mongol_empire = {
							set_title_flag = temporary_landless_title
							gain_title = PREV
						}

						any_demesne_title = {
							limit = {
								tier = EMPEROR
								NOT = { title = e_mongol_empire }
							}
							unsafe_destroy_landed_title = THIS
						}
					}
					else = {
						# He's a baron or a courtier
						log = "MONGOL ARRIVAL: Temujin already exists as a courtier"

						if = {
							limit = { tier = BARON }
							abdicate = yes
						}

						e_mongol_empire = {
							set_title_flag = temporary_landless_title
							grant_title = PREV
						}

						set_defacto_liege = THIS
						pf_liege_change_effect = yes

						if = {
							limit = { has_dlc = "Horse Lords" }
							set_government_type = nomadic_government
						}
						else = {
							set_government_type = tribal_government
						}
					}
				}
			}

			else = {
				log = "MONGOL ARRIVAL: Temujin died, generating new character"

				create_character = {
					random_traits = yes
					dynasty = random
					religion = tengri_pagan
					culture = mongol
					female = no
					age = 24

					attributes = {
						martial = 12
						diplomacy = 8
					}

					add_trait = brilliant_strategist
					add_trait = ambitious
					add_trait = diligent
					add_trait = brave
					add_trait = bloodlust
				}

				new_character = {
					save_event_target_as = mongol_china_invader

					e_mongol_empire = {
						set_title_landless = {
							title = THIS
							status = yes
						}

						set_title_flag = temporary_landless_title
						grant_title = PREV
					}

					set_defacto_liege = THIS

					if = {
						limit = { has_dlc = "Horse Lords" }
						set_government_type = nomadic_government
					}
					else = {
						set_government_type = tribal_government
					}

					character_event = { id = 60509 } # Spawn courtiers
					log = "[This.GetBestName] will take Temujin's place"
				}
			}
		}
		else = {
			log = "MONGOL ARRIVAL: Spawning Temujin for invasion"

			create_character = {
				name = "Temujin" # Genghis Khan
				dynasty = 1051210
				dna = "bfimkolbecc"
				properties = "ge0af0000000"
				age = 43
				health = 6
				fertility = 0.7
				religion = tengri_pagan
				culture = mongol

				attributes = {
					martial = 10
					diplomacy = 8
					intrigue = 8
					stewardship = 9
				}

				add_trait = brave
				add_trait = ambitious
				add_trait = diligent
				add_trait = cruel
				add_trait = hunter
				add_trait = cavalry_leader
				add_trait = brilliant_strategist
				add_trait = bloodlust
			}

			new_character = {
				save_event_target_as = mongol_china_invader
				set_character_flag = is_temujin

				e_mongol_empire = {
					set_title_landless = {
						title = THIS
						status = yes
					}

					set_title_flag = temporary_landless_title
					grant_title = PREV
				}

				set_defacto_liege = THIS

				if = {
					limit = { has_dlc = "Horse Lords" }
					set_government_type = nomadic_government
				}
				else = {
					set_government_type = tribal_government
				}

				character_event = { id = 60505 } # Spawn Temujins generals
				character_event = { id = 60509 } # Spawn courtiers
			}
		}

		# Happens for whoever is the Mongol Emperor
		event_target:mongol_china_invader = {
			# Remove landless status if Temujin already owns land
			if = {
				limit = { num_of_count_titles_in_realm >= 1 }

				e_mongol_empire = {
					clr_title_flag = temporary_landless_title

					set_title_landless = {
						title = THIS
						status = no
					}
				}
			}

			if = {
				limit = {
					has_dlc = "Holy Fury"

					NOT = {
						any_owned_bloodline = {
							has_bloodline_flag = genghis_khan_line
						}
					}
				}

				create_bloodline = {
					type = genghis_khan
				}
			}

			wealth = 5000
			prestige = 5000
			set_character_flag = horde_invader

			# Spawn troops (formerly event 60510)
			while = {
				count = 9

				spawn_unit = {
					province = c_tuul
					earmark = first_mongol_horde
					maintenance_multiplier = 0
					attrition = 0.1

					troops = {
						light_cavalry = { 2750 2750 }
						horse_archers = { 2250 2250 }
						knights = { 500 500 }
					}
				}
			}

			while = {
				count = 6

				spawn_unit = {
					province = c_khilok
					earmark = first_mongol_horde
					maintenance_multiplier = 0
					attrition = 0.1

					troops = {
						light_cavalry = { 2750 2750 }
						horse_archers = { 2250 2250 }
						knights = { 500 500 }
					}
				}
			}

			while = {
				count = 2

				random = {
					chance = 50

					while = {
						count = 3

						spawn_unit = {
							province = c_anxi
							earmark = first_mongol_horde
							maintenance_multiplier = 0
							attrition = 0.1

							troops = {
								light_cavalry = { 2750 2750 }
								horse_archers = { 2250 2250 }
								knights = { 500 500 }
							}
						}
					}
				}
			}

			# Spawn population (formerly event 60515)
			if = {
				limit = { is_nomadic = yes }

				population = 120000

				# Boost population growth by 200%
				add_character_modifier = {
					name = invading_population_halt
					years = 30
					hidden = yes
				}

				# Add more population next year
				character_event = {
					id = 60516
					years = 1
				}
			}

			if = {
				limit = {
					has_dlc = "Jade Dragon"

					offmap_china = {
						trigger_if = {
							limit = { has_offmap_flag = china_invaded_player_dynasty }

							had_offmap_tmp_flag = {
								flag = china_invaded_player_dynasty
								years >= 200
							}
						}
					}
				}

				character_event = {
					id = 60531 # invade China
					days = 100
					random = 100
				}
			}

			# Start the first war, if Temujin does not already own land
			if = {
				limit = { is_landed = no }

				c_tuul = {
					kingdom = {
						event_target:mongol_china_invader = {
							if = {
								limit = { has_dlc = "Horse Lords" }

								war = {
									casus_belli = nomad_invasion
									target = PREVPREV # The top liege of the owner of the province
									thirdparty_title = PREV # The de jure kingdom
								}
							}
							else = {
								war = {
									casus_belli = tribal_invasion
									target = PREVPREV # The top liege of the owner of the province
									thirdparty_title = PREV # The de jure kingdom
								}
							}
						}
					}
				}
			}
		}
	}

	option = {
		name = {
			text = EVTOPTA60500
			trigger = {
				is_nomadic = no

				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = pagan_group
				}
			}
		}
		name = {
			text = EVTOPTB60500
			trigger = {
				is_nomadic = no

				NOR = {
					religion_group = christian
					religion_group = muslim
					religion_group = pagan_group
				}
			}
		}
		name = {
			text = EVTOPTC60500
			trigger = { is_nomadic = yes }
		}

		trigger = {
			has_power_omen_modifier_trigger = no
			has_battle_omen_modifier_trigger = no
		}
	}

	option = {
		name = {
			text = EVTOPTA60500
			trigger = {
				is_nomadic = no

				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = pagan_group
				}
			}
		}
		name = {
			text = EVTOPTB60500
			trigger = {
				is_nomadic = no

				NOR = {
					religion_group = christian
					religion_group = muslim
					religion_group = pagan_group
				}
			}
		}
		name = {
			text = EVTOPTC60500
			trigger = { is_nomadic = yes }
		}

		tooltip_info = yes

		trigger = {
			OR = {
				has_power_omen_modifier_trigger = yes
				has_battle_omen_modifier_trigger = yes
			}
		}

		set_character_flag = negative_event_flag # For the scrying outcome calculation...
		calculate_scrying_outcome_effect = yes
		remove_scrying_omen_modifiers_effect = yes
	}
}

# Remove landless status fired from on_action
character_event = {
	id = 60504

	hide_window = yes
	is_triggered_only = yes # on_new_holder(_inheritance/usurpation)

	only_playable = yes

	trigger = {
		is_landed = yes

		e_mongol_empire = {
			holder = ROOT
			has_title_flag = temporary_landless_title
			is_landless_type_title = yes
		}
	}

	immediate = {
		e_mongol_empire = {
			clr_title_flag = temporary_landless_title

			set_title_landless = {
				title = THIS
				status = no
			}
		}
	}
}

# Spawn mongol leaders for Temujin
character_event = {
	id = 60505
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		create_character = {
			name = "Borte" # Temujin's Wife
			age = 44
			dynasty = 1041000
			religion = ROOT
			culture = ROOT
			female = yes
			random_traits = yes
		}

		new_character = {
			save_event_target_as = borte
			add_spouse = ROOT

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}
		}

		create_character = {
			name = "Subutai" # Temujin's primary general
			age = 35
			dynasty = 7315
			religion = ROOT
			culture = ROOT

			attributes = {
				martial = 10
				diplomacy = 4
				intrigue = 6
				stewardship = 6
			}

			add_trait = brave
			add_trait = strong
			add_trait = quick
			add_trait = diligent
			add_trait = brilliant_strategist
			add_trait = trickster
		}

		new_character = {
			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}
		}

		create_character = {
			name = "Chagatai"
			age = 22
			dynasty = ROOT
			religion = ROOT
			culture = ROOT
			random_traits = no
			add_trait = skilled_tactician
			add_trait = wroth
			add_trait = just
			add_trait = drunkard
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte
			set_character_flag = is_chagatai_khan

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check

			ROOT = {
				create_character = {
					name = "Ebuskun"
					random_traits = yes
					dynasty = 1041001
					religion = ROOT
					culture = ROOT
					female = yes
					age = 21
					add_trait = quick
				}

				new_character = {
					add_spouse = PREVPREV

					ROOT = {
						create_character = {
							name = "Megujin"
							random_traits = yes
							dynasty = ROOT
							religion = ROOT
							culture = ROOT
							female = no
							age = 5

							attributes = {
								martial = 6
								intrigue = 3
							}

							add_trait = ambitious
							add_trait = just
						}

						new_character = {
							set_mother = PREVPREV
							set_father = PREVPREVPREVPREV
							character_event = { id = geneticPlus.001 } # Genetics check
						}

						create_character = {
							name = "Yesunge"
							random_traits = yes
							dynasty = ROOT
							religion = ROOT
							culture = ROOT
							female = no
							age = 3

							attributes = {
								martial = 4
								diplomacy = 3
							}

							add_trait = wroth
							add_trait = quick
						}

						new_character = {
							set_mother = PREVPREV
							set_father = PREVPREVPREVPREV
							character_event = { id = geneticPlus.001 } # Genetics check
						}
					}
				}
			}
		}

		create_character = {
			name = "gedei" # gedei Khan
			age = 29
			dynasty = ROOT
			religion = ROOT
			culture = ROOT

			attributes = {
				diplomacy = 8
			}

			add_trait = skilled_tactician
			add_trait = gregarious
			add_trait = just
			add_trait = hunter
			add_trait = ambitious
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte
			set_character_flag = is_ogodei_khan

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check

			ROOT = {
				create_character = {
					name = "Tregene"
					random_traits = yes
					dynasty = 1041001
					religion = ROOT
					culture = ROOT
					female = yes
					age = 17
				}

				new_character = {
					add_spouse = PREVPREV

					ROOT = {
						create_character = {
							name = "Guyug"
							random_traits = yes
							dynasty = ROOT
							religion = ROOT
							culture = ROOT
							female = no
							age = 1
							trait = gregarious
							trait = just
						}

						new_character = {
							set_mother = PREVPREV
							set_father = PREVPREVPREVPREV
							character_event = { id = geneticPlus.001 } # Genetics check
						}
					}
				}
			}
		}

		create_character = {
			name = "Jochi"
			age = 24
			dynasty = ROOT
			religion = ROOT
			culture = ROOT
			random_traits = no

			attributes = {
				martial = 8
			}

			add_trait = skilled_tactician
			add_trait = hunter
			add_trait = kind
			add_trait = patient
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check
			set_character_flag = is_jochi_khan

			ROOT = {
				create_character = {
					name = "Sarkan"
					random_traits = yes
					dynasty = 1041002
					religion = ROOT
					culture = ROOT
					female = yes
					age = 19
				}

				new_character = {
					add_spouse = PREVPREV

					ROOT = {
						create_character = {
							name = "Batu"
							random_traits = yes
							dynasty = ROOT
							religion = ROOT
							culture = ROOT
							female = no
							age = 2

							attributes = {
								martial = 4
							}
						}

						new_character = {
							set_father = PREVPREVPREVPREV
							set_mother = PREVPREV
							character_event = { id = geneticPlus.001 } # Genetics check
						}
					}
				}
			}
		}

		create_character = {
			name = "Tolui"
			age = 13
			dynasty = ROOT
			religion = ROOT
			culture = ROOT
			random_traits = yes

			attributes = {
				martial = 4
				stewardship = 8
			}
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte
			set_character_flag = is_tolui_khan

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check
		}

		create_character = {
			name = "Jebe" # Temujin's secondary general
			age = 50
			dynasty = 7317
			religion = ROOT
			culture = ROOT

			attributes = {
				martial = 10
				diplomacy = 5
				intrigue = 5
				stewardship = 4
			}

			add_trait = skilled_tactician
			add_trait = brave
		}

		new_character = {
			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}
		}

		# Daughters
		create_character = {
			name = "Khochen"
			random_traits = yes
			female = yes
			dynasty = ROOT
			culture = ROOT
			religion = ROOT
			age = 20
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check
		}

		create_character = {
			name = "Alakhai"
			random_traits = yes
			female = yes
			dynasty = ROOT
			culture = ROOT
			religion = ROOT
			age = 14
			add_trait = strong
			add_trait = attractive

			attributes = {
				martial = 4
				diplomacy = 6
				stewardship = 6
			}
		}

		new_character = {
			set_father = ROOT
			set_mother = event_target:borte

			opinion = {
				name = opinion_exalted
				who = ROOT
				multiplier = 2
				years = 100
			}

			character_event = { id = geneticPlus.001 } # Genetics check
		}

		recalc_succession = yes
	}
}

# Spawn extra courtiers
character_event = {
	id = 60509

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		while = {
			count = 7

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 16
			}

			new_character = {
				random_list = {
					1 = { }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
					1 = { add_age = 8 }
					1 = { add_age = 9 }
					1 = { add_age = 10 }
					1 = { add_age = 11 }
					1 = { add_age = 12 }
				}

				opinion = {
					name = opinion_exalted
					who = ROOT
					multiplier = 2
					years = 100
				}
			}
		}

		while = {
			count = 5

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = yes
				age = 16
			}

			new_character = {
				random_list = {
					1 = { }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
				}

				opinion = {
					name = opinion_exalted
					who = ROOT
					multiplier = 2
					years = 100
				}
			}
		}

		while = {
			count = 4

			create_character = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 24

				attributes = {
					martial = 12
				}

				add_trait = brilliant_strategist
			}

			new_character = {
				random_list = {
					1 = { }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
					1 = { add_age = 8 }
					1 = { add_age = 9 }
					1 = { add_age = 10 }
					1 = { add_age = 11 }
					1 = { add_age = 12 }
					1 = { add_age = 13 }
					1 = { add_age = 14 }
					1 = { add_age = 15 }
					1 = { add_age = 16 }
					1 = { add_age = 17 }
					1 = { add_age = 18 }
					1 = { add_age = 19 }
					1 = { add_age = 20 }
					1 = { add_age = 21 }
					1 = { add_age = 22 }
					1 = { add_age = 23 }
					1 = { add_age = 24 }
					1 = { add_age = 25 }
					1 = { add_age = 26 }
					1 = { add_age = 27 }
				}

				opinion = {
					name = opinion_exalted
					who = ROOT
					multiplier = 2
					years = 100
				}
			}
		}
	}
}

character_event = {
	id = 60516

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_nomadic = yes
		has_character_modifier = invading_population_halt
	}

	immediate = {
		if = {
			limit = {
				population < 350000
				population_factor < 1
			}

			population = 80000

			# Enforce hard cap
			if = {
				limit = {
					population >= 350000
					population_factor < 1
				}

				remove_character_modifier = invading_population_halt
			}
			else = {
				repeat_event = {
					id = 60516 # Add more population next year
					days = 365
				}
			}
		}
	}

	fail_trigger_effect = {
		remove_character_modifier = invading_population_halt
	}
}

# Notify world about the greatest of Khans
narrative_event = {
	id = 60520
	title = EVTNAME60520
	desc = EVTDESC60520
	picture = GFX_evt_mongols
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes # become_genghis_khan in HL_decisions.txt

	option = {
		name = {
			text = EVTOPTA_60520
			trigger = {
				primary_title = {
					title = e_mongol_empire
				}
			}
		}
		name = {
			text = EVTOPTB_60520
			trigger = {
				NOR = {
					primary_title = {
						title = e_mongol_empire
					}

					any_liege = {
						primary_title = {
							title = e_mongol_empire
						}
					}
				}
			}
		}
		name = {
			text = EVTOPTC_60520
			trigger = {
				any_liege = {
					primary_title = {
						title = e_mongol_empire
					}
				}
			}
		}

		trigger = {
			has_power_omen_modifier_trigger = no
			has_battle_omen_modifier_trigger = no
		}
	}

	# Scrying omen included
	option = {
		name = {
			text = EVTOPTA_60520
			trigger = {
				primary_title = {
					title = e_mongol_empire
				}
			}
		}
		name = {
			text = EVTOPTB_60520
			trigger = {
				NOR = {
					primary_title = {
						title = e_mongol_empire
					}

					any_liege = {
						primary_title = {
							title = e_mongol_empire
						}
					}
				}
			}
		}
		name = {
			text = EVTOPTC_60520
			trigger = {
				any_liege = {
					primary_title = {
						title = e_mongol_empire
					}
				}
			}
		}

		tooltip_info = yes

		trigger = {
			OR = {
				has_power_omen_modifier_trigger = yes
				has_battle_omen_modifier_trigger = yes
			}
		}

		set_character_flag = negative_event_flag # For the scrying outcome calculation...
		calculate_scrying_outcome_effect = yes
		remove_scrying_omen_modifiers_effect = yes
	}
}

# AI - reinforcement event for Genghis decision
character_event = {
	id = 60530

	hide_window = yes
	is_triggered_only = yes # become_genghis_khan in HL_decisions.txt

	immediate = {
		while = {
			count = 4

			spawn_unit = {
				province = capital_scope
				earmark = first_mongol_horde
				maintenance_multiplier = 0
				attrition = 0.1

				troops = {
					light_cavalry = { 2750 2750 }
					horse_archers = { 2250 2250 }
					knights = { 500 500 }
				}
			}
		}
	}
}

character_event = {
	id = 60531

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = { # If China exists - Invade it!
			limit = {
				offmap_china = {
					NOT = { has_status = china_mongol_invasion }

					offmap_ruler = {
						NOT = { dynasty = event_target:mongol_china_invader }
					}
				}
			}

			offmap_china = {
				if = {
					limit = { # Mongols take presedence over Jurchens/Civil War
						OR = {
							has_status = china_jurchen_invasion
							has_status = china_civil_war
						}
					}

					set_offmap_flag = no_status_news
					set_status = china_unrest
					set_offmap_flag = china_had_unrest
					clr_offmap_flag = no_status_news
				}

				governor = {
					offmap_china = {
						set_offmap_flag = no_status_news
						set_status = china_mongol_invasion
						set_offmap_flag = china_mongol_invasion
						clr_offmap_flag = no_status_news
					}

					any_player = {
						limit = {
							has_offmap_news_enabled = offmap_china
							is_within_diplo_range = PREV
						}

						narrative_event = { id = JD.50141 }
					}
				}
			}
		}
	}
}

##################################
# Rise of the Sultanate of Rum
##################################

# A Turkic character wants a foothold in Armenia
character_event = {
	id = 60600

	is_triggered_only = yes # on_yearly_pulse, random_events, turkic_invasions
	hide_window = yes # Only fires for unplayable landless characters

	religion_group = muslim
	culture_group = altaic
	only_men = yes
	min_age = 16
	max_age = 50
	only_capable = yes
	prisoner = no

	trigger = {
		trigger_if = {
			limit = {
				has_game_rule = {
					name = turkic_invasions
					value = historical
				}
			}

			year >= 1000
			year < 1200
		}
		trigger_else = {
			has_game_rule = {
				name = turkic_invasions
				value = random
			}

			year >= 809
			year < 1200
		}

		is_ruler = no

		trigger_if = {
			limit = {
				NOT = { has_character_flag = demon_child_non_pagan }
			}

			martial >= 9
			diplomacy >= 5
			health >= 4
		}

		father_even_if_dead = { # Is of a noble house
			always = yes
		}

		liege = {
			culture_group = altaic

			capital_scope = {
				kingdom = {
					OR = {
						title = k_al-jazira
						title = k_persia
						title = k_syria
						title = k_armenia
					}
				}
			}
		}

		NOR = {
			trait = content
			trait = craven

			any_spouse = {
				is_ruler = yes
			}

			# Somewhat clunky way of checking that the character does not stand to inherit any titles
			any_heir_title = {
				always = yes
			}

			has_global_flag = rum_spawned

			has_game_rule = {
				name = turkic_invasions
				value = off
			}
		}

		trigger_if = { # Pacing mechanic, we don't want too many adventurers to spawn at once
			limit = { has_global_flag = rum_invader_spawned }

			had_global_flag = {
				flag = rum_invader_spawned
				years >= 10
			}
		}

		trigger_if = {
			limit = { has_global_flag = rum_spawning }

			had_global_flag = {
				flag = rum_spawning
				years >= 4
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 0.05
			NOT = { dynasty = 613 } # Seljuk
		}

		mult_modifier = {
			factor = 2
			culture = turkish
		}

		mult_modifier = {
			factor = 0.5

			has_game_rule = {
				name = turkic_invasions
				value = random
			}
		}

		mult_modifier = {
			factor = 2
			has_character_flag = flag_denied_title
		}

		mult_modifier = {
			factor = 100
			has_character_flag = demon_child_non_pagan
		}

		mult_modifier = {
			factor = 0.33
			trait = slothful
		}

		mult_modifier = {
			factor = 0.33
			trait = humble
		}

		mult_modifier = {
			factor = 0.33
			trait = kind
		}
	}

	immediate = {
		set_global_flag = rum_invader_spawned

		random_independent_ruler = {
			limit = {
				any_realm_province = {
					OR = {
						kingdom = {
							title = k_armenia
						}

						duchy = {
							title = d_azerbaijan
						}
					}

					held_under_PREV = yes
				}

				is_landed = yes
				in_revolt = no

				ROOT = {
					liege = {
						NOT = { war_with = PREVPREV }
					}
				}

				NOR = {
					same_realm = ROOT
					religion_group = muslim
				}
			}

			random_realm_province = {
				limit = {
					OR = {
						kingdom = {
							title = k_armenia
						}

						duchy = {
							title = d_azerbaijan
						}
					}

					held_under_PREV = yes
				}

				save_event_target_as = target_province

				ROOT = {
					opinion = {
						name = opinion_duchy_adventure_target
						who = PREVPREV
						years = 3
					}

					add_character_modifier = {
						name = planning_duchy_adventure
						hidden = yes
						years = 2
					}

					character_event = {
						id = 60603 # Fire the attack
						years = 2
					}

					set_global_flag = rum_spawning
					end_inaccessibility_effect = yes # removes in hiding or in_seclusion
					set_character_flag = do_not_disturb

					character_event = {
						id = 60602 # Safety clear of 'do not disturb'
						years = 2
					}
				}

				PREV = {
					character_event = {
						id = 60601 # Warn the target
					}
				}
			}
		}
	}
}

# Warn the target
character_event = {
	id = 60601
	desc = EVTDESC_TOG_1211
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	immediate = {
		opinion = {
			name = opinion_targeted_by_adventurer
			who = FROM
			years = 2
		}
	}

	option = {
		name = EVTOPTA_TOG_1211
	}
}

# Safety clear of DND
character_event = {
	id = 60602

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		remove_do_not_disturb_effect = yes # TODO: Consolidate to some kind of generic event?
	}
}

# Launch the attack!
character_event = {
	id = 60603

	hide_window = yes
	is_triggered_only = yes

	prisoner = no
	only_capable = yes

	trigger = {
		is_ruler = no

		NOT = {
			any_spouse = {
				is_ruler = yes
			}

			any_heir_title = {
				always = yes
			}
		}

		event_target:target_province = {
			owner = {
				top_liege = {
					is_landed = yes
					independent = yes

					NOR = {
						same_realm = ROOT
						religion_group = muslim
					}
				}
			}
		}
	}

	immediate = {
		wealth = 500
		remove_do_not_disturb_effect = yes
		set_character_flag = rum_creator

		liege = {
			character_event = {
				id = 60604
				days = 1
			}

			capital_scope = {
				save_event_target_as = liege_capital
			}
		}

		event_target:target_province = {
			duchy = {
				save_event_target_as = target_duchy
			}

			top_liege = {
				save_event_target_as = target_top_liege
			}
		}

		set_defacto_liege = ROOT
		set_character_flag = duchy_adventurer

		create_title = {
			tier = DUKE
			landless = yes
			temporary = yes
			adventurer = yes
			culture = ROOT
			name = CLAIMANT_ADVENTURE
			holder = ROOT
		}


		while = {
			count = 3

			spawn_unit = {
				province = event_target:liege_capital
				home = event_target:liege_capital
				owner = ROOT
				match_character = event_target:target_top_liege
				match_mult = 0.25
				match_min = 2000
				match_max = 10000
				attrition = 0.25
			}

			spawn_unit = {
				province = event_target:liege_capital
				home = event_target:liege_capital
				owner = ROOT
				match_character = event_target:target_top_liege
				match_mult = 0.25
				match_min = 2000
				match_max = 10000
				attrition = 0.25
				cannot_inherit = yes
			}
		}

		war = {
			target = event_target:target_top_liege
			casus_belli = duchy_adventure
			thirdparty_title = event_target:target_duchy
		}

		remove_opinion = {
			name = opinion_duchy_adventure_target
			who = event_target:target_top_liege
		}

		# Create some decent commander characters
		while = {
			count = 4

			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = ROOT
				culture = ROOT
				female = no
				age = 19
			}

			new_character = {
				random_list = {
					1 = { }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
					1 = { add_age = 5 }
					1 = { add_age = 6 }
					1 = { add_age = 7 }
					1 = { add_age = 8 }
					1 = { add_age = 9 }
					1 = { add_age = 10 }
					1 = { add_age = 11 }
				}
			}
		}

		clr_global_flag = rum_spawning
		set_global_flag = rum_spawned
	}
}

character_event = {
	id = 60604
	desc = EVTDESC_TOG_1213
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	trigger = {
		FROM = {
			is_ruler = yes # The DoW worked and the adventurer has a temporary title
		}
	}

	immediate = {
		FROM = {
			add_trait = adventurer
		}

		any_liege = {
			character_event = { id = 60605 }
		}
	}

	option = {
		name = EVTOPTA_TOG_1203
	}
}

character_event = {
	id = 60605
	desc = EVTDESC_TOG_1214
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	show_from_from = yes
	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_1203
	}
}

#######################################
# Stage 2 (Armenia) and 3 (Anatolia)
# Fired from CB 'duchy_adventure' or 'kingdom_adventure'
#######################################
character_event = {
	id = 60610

	is_triggered_only = yes
	hide_window = yes

	ai = yes

	immediate = {
		if = {
			limit = {
				independent = yes
				war = no
			}

			# Use custom regions for this?
			if = {
				limit = {
					k_armenia = {
						any_de_jure_vassal_title = {
							tier = COUNT

							holder_scope = {
								top_liege = {
									in_revolt = no
									is_landed = yes

									NOR = {
										religion_group = muslim
										reverse_has_truce = ROOT
									}
								}
							}
						}
					}
				}

				k_armenia = {
					any_de_jure_vassal_title = {
						limit = {
							tier = COUNT

							holder_scope = {
								top_liege = {
									in_revolt = no
									is_landed = yes

									NOR = {
										religion_group = muslim
										reverse_has_truce = ROOT
									}
								}
							}
						}

						count = 1

						holder_scope = {
							top_liege = {
								ROOT = {
									while = {
										count = 3

										spawn_unit = {
											province = capital_scope
											home = capital_scope
											owner = THIS
											match_character = PREV
											match_mult = 0.25
											match_min = 2000
											match_max = 10000
											attrition = 0.1
										}
									}

									war = {
										target = PREV
										casus_belli = kingdom_adventure
										thirdparty_title = k_armenia
									}
								}
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					k_anatolia = {
						any_de_jure_vassal_title = {
							tier = COUNT

							holder_scope = {
								top_liege = {
									has_landed_title = e_byzantium

									NOR = {
										religion_group = muslim
										reverse_has_truce = ROOT
									}
								}
							}
						}
					}
				}

				k_anatolia = {
					any_de_jure_vassal_title = {
						limit = {
							tier = COUNT

							holder_scope = {
								top_liege = {
									has_landed_title  = e_byzantium

									NOR = {
										religion_group = muslim
										reverse_has_truce = ROOT
									}
								}
							}
						}

						count = 1

						holder_scope = {
							top_liege = {
								ROOT = {
									while = {
										count = 3

										spawn_unit = {
											province = capital_scope
											home = capital_scope
											owner = THIS
											match_character = PREV
											match_mult = 0.25
											match_min = 2000
											match_max = 10000
											attrition = 0.21
										}
									}

									war = {
										target = PREV
										casus_belli = kingdom_adventure
										thirdparty_title = k_anatolia
									}
								}
							}
						}
					}
				}
			}
			else = {
				# Try again in a month
				repeat_event = {
					id = 60610
					months = 1
				}
			}
		}
	}
}

# Unset Mongol Empire as landless if holder is landed
# Necessary because landless status is not saved in savegame, only loaded from landed titles definition
character_event = {
	id = 60700

	is_triggered_only = yes # on_startup
	hide_window = yes

	only_playable = yes

	trigger = {
		is_landed = yes

		e_mongol_empire = {
			holder = ROOT
			is_landless_type_title = yes
		}
	}

	immediate = {
		set_title_landless = {
			title = e_mongol_empire
			status =  no
		}
	}
}