###########################################
#                                         #
# M&M Monastic Artifacts Events           #
#                                         #
# ID MNM.9000-MNM.9911                    #
#                                         #
###########################################

# IDs:
# 9000-9199 Mathilda
# 9200-9399 Henrik / Milla
# 9400-9599 David
# 9600-9799 / 9030-9032 Drikus
# 9800-9898 Axel
# 9899-9999 Joel

namespace = MNM

# Sends rumors
character_event = {
	id = MNM.9000

	hide_window = yes
	is_triggered_only = yes # on_yearly_pulse, random_events

	has_dlc = "Mystics"
	min_age = 13
	only_playable = yes
	only_capable = yes
	prisoner = no

	trigger = {
		is_landed = yes
		mercenary = no
		holy_order = no

		trigger_if = {
			limit = { ai = yes }
			higher_real_tier_than = COUNT
		}

		any_voter = {
			is_councillor = yes
			is_incapable = no
			prisoner = no
			ai = yes

			opinion = {
				who = ROOT
				value >= 20
			}
		}

		NOR = {
			has_character_modifier = relic_rumor_major
			has_character_modifier = relic_rumor_medium
			has_character_modifier = relic_rumor_minor
			religion_openly_zun_or_reformed_trigger = yes
			religion = pagan
			religion_openly_aztec_or_reformed_trigger = yes
			religion_openly_egyptian_or_reformed_trigger = yes

			has_alternate_start_parameter = {
				key = religion_names
				value = random
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 2.0
			has_ambition = obj_create_treasury
		}
	}

	immediate = {
		save_event_target_as = relic_ruler

		random_voter = {
			limit = {
				is_councillor = yes
				is_incapable = no
				prisoner = no
				ai = yes

				opinion = {
					who = ROOT
					value >= 20
				}
			}
			save_event_target_as = rumor_councillor
		}

		random_list = {
			10 = { # Epic rumor
				trigger = {
					trigger_if = {
						limit = { religion_group = christian }

						NAND = {
							has_artifact = bones_of_st_peter
							has_artifact = staff_of_moses
							has_artifact = davids_harp
						}
					}
					trigger_else_if = {
						limit = { religion_group = jewish_group }

						NAND = {
							has_artifact = bones_of_st_peter
							has_artifact = staff_of_moses
							has_artifact = davids_harp
						}
					}
					trigger_else_if = {
						limit = { religion_group = muslim }

						NAND = {
							has_artifact = staff_of_moses
							has_artifact = davids_harp
							has_artifact = seal_of_mohammad
							has_artifact = holy_banner_of_mohammad
							has_artifact = blessed_mantle
						}
					}
					trigger_else_if = {
						limit = { religion_group = zoroastrian_group }

						NAND = {
							has_artifact = cup_of_jamshid
							has_artifact = babr_e_bayan
						}
					}
					trigger_else_if = {
						limit = { religion_group = indian_group }
						NOT = { has_artifact = buddhas_tooth }
					}
					trigger_else_if = {
						limit = { religion_openly_germanic_or_reformed_trigger = yes }

						NAND = {
							has_artifact = mjolnir
							has_artifact = andvaranaut
						}
					}
					trigger_else_if = {
						limit = { religion_openly_west_african_or_reformed_trigger = yes }
						NOT = { has_artifact = fetish_of_souls }
					}
					trigger_else_if = {
						limit = { religion_openly_finnish_or_reformed_trigger = yes }
						NOT = { has_artifact = sampo }
					}
					trigger_else_if = {
						limit = { religion_openly_slavic_or_reformed_trigger = yes }
						NOT = { has_artifact = axe_of_perun }
					}
					trigger_else_if = {
						limit = { religion_openly_baltic_or_reformed_trigger = yes }
						NOT = { has_artifact = axe_of_perkunas }
					}
					trigger_else_if = {
						limit = { religion_openly_tengri_or_reformed_trigger = yes }
						NOT = { has_artifact = yada_tashy }
					}
				}

				mult_modifier = {
					factor = 0.7
					ai = yes
				}

				character_event = { id = MNM.9004 }
			}

			30 = { # Good rumor
				trigger = {
					religion_openly_finnish_or_reformed_trigger = no
					religion_openly_slavic_or_reformed_trigger = no
					religion_openly_baltic_or_reformed_trigger = no
					religion_openly_tengri_or_reformed_trigger = no

					trigger_if = {
						limit = { religion_group = christian }

						NAND = {
							has_artifact = crown_of_thorns
							has_artifact = seamless_robe_of_jesus
							has_artifact = fragment_of_true_cross
							has_artifact = holy_foreskin
							has_artifact = seal_of_solomon
							has_artifact = image_of_edessa
						}
					}
					trigger_else_if = {
						limit = { religion_group = jewish_group }

						NAND = {
							has_artifact = seal_of_solomon
							has_artifact = tabernacle
						}
					}
					trigger_else_if = {
						limit = { religion_group = muslim }

						NAND = {
							has_artifact = seal_of_solomon
							has_artifact = sword_of_mohammad
							has_artifact = letter_of_mohammad
							has_artifact = blessed_sandals
							has_artifact = cloak_of_mohammad
						}
					}
					trigger_else_if = {
						limit = { religion_group = zoroastrian_group }

						NAND = {
							has_artifact = derafsh_kaviani
							has_artifact = cyrus_cylinder
						}
					}
					trigger_else_if = {
						limit = { religion_group = indian_group }

						NAND = {
							has_artifact = mountain_of_light_diamond
							has_artifact = elaborate_danda
							has_artifact = sarira
							has_artifact = sariraka_actual_body_part
						}
					}
					trigger_else_if = {
						limit = { religion_openly_germanic_or_reformed_trigger = yes }
						NOT = { has_artifact = gjallarhorn }
					}
				}

				character_event = { id = MNM.9005 }
			}

			60 = { # Weak rumor
				trigger = {
					trigger_if = {
						limit = { religion_group = christian }

						NAND = {
							has_artifact = fingerbone_of_saint
							has_artifact = famous_head
							has_artifact = famous_tongue
							has_artifact = infamous_tongue
							has_artifact = famous_hand
							has_artifact = famous_arm
							has_artifact = famous_foot
							has_artifact = famous_ancient_weapon
							has_artifact = chains_of_st_peter
							has_artifact = right_hand_st_demetrius
							has_artifact = veil_of_veronica
							has_artifact = remains_of_st_cessianus
							has_artifact = weeping_statue
						}
					}
					trigger_else_if = {
						limit = { religion_group = jewish_group }

						NAND = {
							has_artifact = famous_head
							has_artifact = famous_tongue
							has_artifact = infamous_tongue
							has_artifact = famous_hand
							has_artifact = famous_arm
							has_artifact = famous_foot
							has_artifact = famous_ancient_weapon
							has_artifact = davids_sling
						}
					}
					trigger_else_if = {
						limit = { religion_group = muslim }

						NAND = {
							has_artifact = mohammads_beard
							has_artifact = famous_head
							has_artifact = famous_tongue
							has_artifact = infamous_tongue
							has_artifact = famous_hand
							has_artifact = famous_arm
							has_artifact = famous_foot
							has_artifact = famous_ancient_weapon
							has_artifact = mohammads_bowl
							has_artifact = tooth_of_mohammad

							OR = {
								has_artifact = blessed_mantle # safeguard so you don't end up with two waters
								has_artifact = water_of_blessed_mantle
							}
						}
					}
					trigger_else_if = {
						limit = { religion_group = zoroastrian_group }

						NAND = {
							has_artifact = haoma_sapling
							has_artifact = keshmar_cypress_branch
							has_artifact = famous_head
							has_artifact = famous_tongue
							has_artifact = infamous_tongue
							has_artifact = famous_hand
							has_artifact = famous_arm
							has_artifact = famous_foot
							has_artifact = famous_ancient_weapon
						}
					}
					trigger_else_if = {
						limit = { religion_group = indian_group }

						NAND = {
							has_artifact = famous_head
							has_artifact = famous_tongue
							has_artifact = infamous_tongue
							has_artifact = famous_hand
							has_artifact = famous_arm
							has_artifact = famous_foot
							has_artifact = famous_ancient_weapon
						}
					}
					trigger_if = {
						limit = { religion_group = pagan_group }

						NAND = {
							has_artifact = famous_head
							has_artifact = famous_tongue
							has_artifact = infamous_tongue
							has_artifact = famous_hand
							has_artifact = famous_arm
							has_artifact = famous_foot
							has_artifact = famous_ancient_weapon
						}
					}
				}

				character_event = { id = MNM.9006 }
			}

			9000 = { # AI is less likely to find artifacts
				trigger = { ai = yes }
			}
		}
	}
}

# Rumors [Major/Extraordinary rumor]
character_event = {
	id = MNM.9004
	desc = EVTDESC_MNM_9004
	picture = GFX_evt_treasure_chamber
	border = GFX_event_normal_frame_religion
	portrait = event_target:rumor_councillor

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = {
		name = EVTOPTA_MNM_9004

		custom_tooltip = { text = EVTOPTA_MNM_9004_TT }
		custom_tooltip = { text = outcome_will_depend_on_froms_skill_tt }

		add_character_modifier = {
			name = relic_rumor_major
			years = 20
		}

		add_artifact_search_payment_effect = yes

		hidden_effect = {
			# Start searching
			event_target:rumor_councillor = { # the councilor
				set_character_flag = relic_hunter
				save_event_target_as = relic_hunter
				character_event = { id = MNM.9007 days = 30 } # The looping evaluation for progress increase/decrease begins...
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTB_MNM_9004

		custom_tooltip = { text = EVTOPTB_MNM_9004_TT }

		add_character_modifier = {
			name = relic_rumor_major
			years = 20
		}
	}

	after = {
		hidden_effect = { set_variable = { which = relic_score value = 0 } }

		opinion = {
			name = opinion_grateful
			who = event_target:rumor_councillor
			years = 20
		}
	}
}

# Rumors [Good/Medium rumor]
character_event = {
	id = MNM.9005
	desc = EVTDESC_MNM_9005
	picture = GFX_evt_treasure_chamber
	border = GFX_event_normal_frame_religion
	portrait = event_target:rumor_councillor

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = {
		name = EVTOPTA_MNM_9005

		custom_tooltip = { text = EVTOPTA_MNM_9005_TT }
		custom_tooltip = { text = outcome_will_depend_on_froms_skill_tt }

		add_character_modifier = {
			name = relic_rumor_medium
			years = 20
		}

		add_artifact_search_payment_effect = yes

		hidden_effect = {
			# Start searching
			event_target:rumor_councillor = { # the councilor
				set_character_flag = relic_hunter
				save_event_target_as = relic_hunter
				character_event = { id = MNM.9007 days = 30 } # The looping evaluation for progress increase/decrease begins...
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTB_MNM_9005

		custom_tooltip = { text = EVTOPTB_MNM_9005_TT }

		add_character_modifier = {
			name = relic_rumor_medium
			years = 20
		}
	}

	after = {
		hidden_effect = { set_variable = { which = relic_score value = 0 } }

		opinion = {
			name = opinion_grateful
			who = event_target:rumor_councillor
			years = 15
		}
	}
}

# Rumors [Decent rumor]
character_event = {
	id = MNM.9006
	desc = EVTDESC_MNM_9006
	picture = GFX_evt_gathering_of_minds
	border = GFX_event_normal_frame_religion
	portrait = event_target:rumor_councillor

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = {
		name = EVTOPTA_MNM_9006

		custom_tooltip = { text = EVTOPTA_MNM_9006_TT }
		custom_tooltip = { text = outcome_will_depend_on_froms_skill_tt }

		add_character_modifier = {
			name = relic_rumor_minor
			years = 10
		}

		add_artifact_search_payment_effect = yes

		hidden_effect = {
			# Start searching
			event_target:rumor_councillor = { # the councilor
				set_character_flag = relic_hunter
				save_event_target_as = relic_hunter
				character_event = { id = MNM.9007 days = 30 } # The looping evaluation for progress increase/decrease begins...
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = INTERESTING

		custom_tooltip = { text = EVTOPTB_MNM_9006_TT }

		add_character_modifier = {
			name = relic_rumor_minor
			years = 10
		}
	}

	after = {
		hidden_effect = { set_variable = { which = relic_score value = 0 } }

		opinion = {
			name = opinion_grateful
			who = event_target:rumor_councillor
			years = 10
		}
	}
}

# Person you sent out starts searching
character_event = {
	id = MNM.9007

	hide_window = yes
	is_triggered_only = yes # search_for_artifact, mnm_artifact_decisions.txt, other events

	has_character_flag = relic_hunter
	has_job_title = yes
	has_dlc = "Mystics"
	only_capable = yes
	prisoner = no

	trigger = {
		liege = {
			character = event_target:relic_ruler

			OR = {
				has_character_modifier = relic_rumor_major
				has_character_modifier = relic_rumor_medium
				has_character_modifier = relic_rumor_minor
			}
		}
	}

	fail_trigger_effect = {
		if = {
			limit = { has_character_flag = relic_hunter }
			event_target:relic_ruler = { character_event = { id = MNM.9009 } }
		}
		else = {
			event_target:relic_ruler = { clr_artifact_searcher_effect = yes }
		}
	}

	immediate = {
		# If relic is found...
		if = {
			limit = { the_hunt_for_an_artifact_has_made_enough_progress_trigger = yes }
			event_target:relic_ruler = { character_event = { id = MNM.9008 } } # Relic tombola
		}

		# If relic isn't found...
		else = {
			if = {
				limit = { # to make sure that you don't the Ask For Help events too often...
					event_target:relic_ruler = {
						had_character_flag = {
							flag = they_asked_for_your_help
							months >= 18
						}
					}
				}

				clr_character_flag = they_asked_for_your_help
			}

			# Outcome of this search
			random_list = {
				20 = { # Search through diplomacy
					mult_modifier = { factor = 5 has_job_title = job_chancellor }
					mult_modifier = { factor = 3 diplomacy >= 10 }

					random_list = {
						15 = { # Passive points gain
							mult_modifier = { factor = 1.5 has_job_title = job_chancellor }
							mult_modifier = { factor = 1.2 diplomacy >= 8 }
							mult_modifier = { factor = 1.2 diplomacy >= 10 }
							mult_modifier = { factor = 1.4 diplomacy >= 12 }
							mult_modifier = { factor = 1.4 diplomacy >= 15 }
							mult_modifier = { factor = 1.4 diplomacy >= 18 }
							mult_modifier = { factor = 1.5 has_pleasant_personality_trigger = yes }

							event_target:relic_ruler = {
								change_variable = { which = relic_score value = 1 }

								if = {
									limit = { the_hunt_for_an_artifact_has_made_enough_progress_trigger = yes }
									character_event = { id = MNM.9035 } # progress nearing end notification
								}
								else = { character_event = { id = MNM.9031 } }
							}
						}

						15 = { # Ask for help
							trigger = {
								event_target:relic_ruler = {
									NOR = {
										has_character_flag = they_asked_for_your_help
										has_character_modifier = treasure_hunting_diplomats
									}
								}
							}

							mult_modifier = { factor = 1.5 has_job_title = job_chancellor }
							mult_modifier = { factor = 1.4 diplomacy >= 12 }

							event_target:relic_ruler = { character_event = { id = MNM.9020 } }
						}

						1 = { # Setback
							mult_modifier = { factor = 1.25 event_target:relic_ruler = { has_character_modifier = relic_rumor_medium } }
							mult_modifier = { factor = 1.5 event_target:relic_ruler = { has_character_modifier = relic_rumor_major } }
							mult_modifier = { factor = 1.5 NOT = { has_job_title = job_chancellor } }
							mult_modifier = { factor = 1.5 is_dumb_trigger = yes }
							mult_modifier = { factor = 2.5 diplomacy < 8 }

							event_target:relic_ruler = {
								change_variable = { which = relic_score value = -1 }
								character_event = { id = MNM.9032 } # small setback event
							}
						}

						1 = { # Unfortunate accident
							trigger = { ai = yes }

							mult_modifier = { factor = 1.5 NOT = { has_job_title = job_chancellor } }
							mult_modifier = { factor = 1.5 diplomacy < 8 }

							event_target:relic_ruler = { character_event = { id = MNM.9029 } }
						}
					}
				}
				20 = { # Search through martial
					mult_modifier = { factor = 5 has_job_title = job_marshal }
					mult_modifier = { factor = 3 martial >= 10 }

					random_list = {
						15 = { # Passive points gain
							mult_modifier = { factor = 1.5 has_job_title = job_marshal }
							mult_modifier = { factor = 1.2 martial >= 8 }
							mult_modifier = { factor = 1.2 martial >= 10 }
							mult_modifier = { factor = 1.4 martial >= 12 }
							mult_modifier = { factor = 1.4 martial >= 15 }
							mult_modifier = { factor = 1.4 martial >= 18 }
							mult_modifier = { factor = 1.4 trait = brave }
							mult_modifier = { factor = 1.4 combat_rating >= 20 }

							event_target:relic_ruler = {
								change_variable = { which = relic_score value = 1 }

								if = {
									limit = { the_hunt_for_an_artifact_has_made_enough_progress_trigger = yes }
									character_event = { id = MNM.9035 }  # progress nearing end notification
								}
								else = { character_event = { id = MNM.9031 } }
							}
						}

						15 = { # Ask for help
							trigger = {
								event_target:relic_ruler = {
									NOR = {
										has_character_flag = they_asked_for_your_help
										has_character_modifier = treasure_hunting_soldiers
									}
								}
							}

							mult_modifier = { factor = 1.5 has_job_title = job_marshal }
							mult_modifier = { factor = 1.4 martial >= 12 }

							event_target:relic_ruler = { character_event = { id = MNM.9021 } }
						}

						1 = { # Setback
							mult_modifier = { factor = 1.25 event_target:relic_ruler = { has_character_modifier = relic_rumor_medium } }
							mult_modifier = { factor = 1.5 event_target:relic_ruler = { has_character_modifier = relic_rumor_major } }
							mult_modifier = { factor = 1.5 is_dumb_trigger = yes }
							mult_modifier = { factor = 1.5 NOT = { has_job_title = job_marshal } }
							mult_modifier = { factor = 2.5 martial < 8 }

							event_target:relic_ruler = {
								change_variable = { which = relic_score value = -1 }
								character_event = { id = MNM.9032 } # small setback event
							}
						}

						1 = { # Unfortunate accident
							trigger = { ai = yes }

							mult_modifier = { factor = 1.5 NOT = { has_job_title = job_marshal } }
							mult_modifier = { factor = 1.5 martial < 8 }
							mult_modifier = { factor = 1.5 combat_rating < 0 }

							event_target:relic_ruler = { character_event = { id = MNM.9029 } }
						}
					}
				}

				20 = { # Search through stewardship
					mult_modifier = { factor = 5 has_job_title = job_treasurer }
					mult_modifier = { factor = 3 stewardship >= 10 }

					random_list = {
						15 = { # Passive points gain
							mult_modifier = { factor = 1.5 has_job_title = job_treasurer }
							mult_modifier = { factor = 1.2 stewardship >= 10 }
							mult_modifier = { factor = 1.4 stewardship >= 12 }
							mult_modifier = { factor = 1.4 stewardship >= 15 }
							mult_modifier = { factor = 1.4 stewardship >= 18 }
							mult_modifier = { factor = 1.4 monthly_income >= 3 }

							event_target:relic_ruler = {
								change_variable = { which = relic_score value = 1 }

								if = {
									limit = { the_hunt_for_an_artifact_has_made_enough_progress_trigger = yes }
									character_event = { id = MNM.9035 } # progress nearing end notification
								}
								else = { character_event = { id = MNM.9031 } }
							}
						}

						15 = { # Ask for help
							trigger = {
								event_target:relic_ruler = {
									NOR = {
										has_character_flag = they_asked_for_your_help
										has_character_modifier = treasure_hunting_stewards
									}
								}
							}

							mult_modifier = { factor = 1.5 has_job_title = job_treasurer }
							mult_modifier = { factor = 1.4 stewardship >= 12 }

							event_target:relic_ruler = { character_event = { id = MNM.9022 } }
						}

						1 = { # Setback
							mult_modifier = { factor = 1.25 event_target:relic_ruler = { has_character_modifier = relic_rumor_medium } }
							mult_modifier = { factor = 1.5 event_target:relic_ruler = { has_character_modifier = relic_rumor_major } }
							mult_modifier = { factor = 1.5 is_dumb_trigger = yes }
							mult_modifier = { factor = 1.5 NOT = { has_job_title = job_treasurer } }
							mult_modifier = { factor = 2.5 stewardship < 8 }

							event_target:relic_ruler = {
								change_variable = { which = relic_score value = -1 }
								character_event = { id = MNM.9032 } # small setback event
							}
						}

						1 = { # Unfortunate accident
							trigger = { ai = yes }

							mult_modifier = { factor = 1.5 NOT = { has_job_title = job_treasurer } }
							mult_modifier = { factor = 1.5 stewardship < 8 }

							event_target:relic_ruler = { character_event = { id = MNM.9029 } }
						}
					}
				}

				20 = { # Search through intrigue
					mult_modifier = { factor = 5 has_job_title = job_spymaster }
					mult_modifier = { factor = 3 intrigue >= 10 }

					random_list = {
						15 = { # Passive points gain
							mult_modifier = { factor = 1.5 has_job_title = job_spymaster }
							mult_modifier = { factor = 1.2 intrigue >= 10 }
							mult_modifier = { factor = 1.4 intrigue >= 12 }
							mult_modifier = { factor = 1.4 intrigue >= 15 }
							mult_modifier = { factor = 1.4 intrigue >= 18 }
							mult_modifier = { factor = 1.4 has_unpleasant_personality_trigger = yes }

							event_target:relic_ruler = {
								change_variable = { which = relic_score value = 1 }

								if = {
									limit = { the_hunt_for_an_artifact_has_made_enough_progress_trigger = yes }
									character_event = { id = MNM.9035 } # progress nearing end notification
								}
								else = { character_event = { id = MNM.9031 } }
							}
						}

						15 = { # Ask for help
							trigger = {
								event_target:relic_ruler = {
									NOR = {
										has_character_flag = they_asked_for_your_help
										has_character_modifier = treasure_hunting_spies
									}
								}
							}

							mult_modifier = { factor = 1.5 has_job_title = job_spymaster }
							mult_modifier = { factor = 1.4 intrigue >= 12 }

							event_target:relic_ruler = { character_event = { id = MNM.9023 } }
						}

						1 = { # Setback
							mult_modifier = { factor = 1.25 event_target:relic_ruler = { has_character_modifier = relic_rumor_medium } }
							mult_modifier = { factor = 1.5 event_target:relic_ruler = { has_character_modifier = relic_rumor_major } }
							mult_modifier = { factor = 1.5 is_dumb_trigger = yes }
							mult_modifier = { factor = 1.5 NOT = { has_job_title = job_spymaster } }
							mult_modifier = { factor = 2.5 intrigue < 8 }

							event_target:relic_ruler = {
								change_variable = { which = relic_score value = -1 }
								character_event = { id = MNM.9032 } # small setback event
							}
						}

						1 = { # Unfortunate accident
							trigger = { ai = yes }

							mult_modifier = { factor = 1.5 NOT = { has_job_title = job_spymaster } }
							mult_modifier = { factor = 1.5 intrigue < 8 }

							event_target:relic_ruler = { character_event = { id = MNM.9029 } }
						}
					}
				}

				20 = { # Search through learning
					mult_modifier = { factor = 5 has_job_title = job_spiritual }
					mult_modifier = { factor = 3 learning >= 10 }

					random_list = {
						15 = { # Passive points gain
							mult_modifier = { factor = 1.5 has_job_title = job_spiritual }
							mult_modifier = { factor = 1.2 learning >= 10 }
							mult_modifier = { factor = 1.4 learning >= 12 }
							mult_modifier = { factor = 1.4 learning >= 15 }
							mult_modifier = { factor = 1.4 learning >= 18 }
							mult_modifier = { factor = 1.4 is_learned_trigger = yes }

							event_target:relic_ruler = {
								change_variable = { which = relic_score value = 1 }

								if = {
									limit = { the_hunt_for_an_artifact_has_made_enough_progress_trigger = yes }
									character_event = { id = MNM.9035 } # progress nearing end notification
								}
								else = { character_event = { id = MNM.9031 } }
							}
						}

						15 = { # Ask for help
							trigger = {
								event_target:relic_ruler = {
									NOR = {
										has_character_flag = they_asked_for_your_help
										has_character_modifier = treasure_hunting_scholars
									}
								}
							}

							mult_modifier = { factor = 1.5 has_job_title = job_spiritual }
							mult_modifier = { factor = 1.4 learning >= 12 }

							event_target:relic_ruler = { character_event = { id = MNM.9024 } }
						}

						1 = { # Setback
							mult_modifier = { factor = 1.25 event_target:relic_ruler = { has_character_modifier = relic_rumor_medium } }
							mult_modifier = { factor = 1.5 event_target:relic_ruler = { has_character_modifier = relic_rumor_major } }
							mult_modifier = { factor = 1.5 NOT = { has_job_title = job_spiritual } }
							mult_modifier = { factor = 1.5 is_dumb_trigger = yes }
							mult_modifier = { factor = 2.5 learning < 8 }

							event_target:relic_ruler = {
								change_variable = { which = relic_score value = -1 }
								character_event = { id = MNM.9032 } # small setback event
							}
						}

						1 = { # Unfortunate accident
							trigger = { ai = yes }

							mult_modifier = { factor = 1.5 NOT = { has_job_title = job_spiritual } }
							mult_modifier = { factor = 1.5 learning < 8 }

							event_target:relic_ruler = { character_event = { id = MNM.9029 } }
						}
					}
				}

				5 = { # Ask for money
					mult_modifier = {
						factor = 2

						OR = {
							trait = greedy
							trait = deceitful
						}
					}
					mult_modifier = {
						factor = 2
						trait = slothful
					}
					mult_modifier = {
						factor = 2
						is_rival = event_target:relic_ruler
					}

					event_target:relic_ruler = {
						character_event = { id = MNM.9025 }
					}
				}

				15 = { # Mess up badly
					trigger = {
						event_target:relic_ruler = { check_variable = { which = relic_score value >= 0 } }
						NOT = { reverse_has_opinion_modifier = { who = event_target:relic_ruler name = opinion_useless_moron } }
					}

					mult_modifier = { factor = 0.5 is_smart_trigger = yes }
					mult_modifier = { factor = 1.5 is_dumb_trigger = yes }

					event_target:relic_ruler = { character_event = { id = MNM.9027 } }
				}

				5 = { # Encounter a better rumor
					trigger = {
						event_target:relic_ruler = {
							check_variable = { which = relic_score value < 5 }
							NOT = { has_character_modifier = relic_rumor_major }
						}
					}

					mult_modifier = { factor = 3 is_smart_trigger = yes }

					event_target:relic_ruler = { character_event = { id = MNM.9028 } }
				}

				10 = { } # Nothing happens
			}

			character_event = {
				id = MNM.9007
				days = 300
				random = 80
			}
		}
	}
}

# Artifact is found
character_event = {
	id = MNM.9008

	hide_window = yes
	is_triggered_only = yes

	has_dlc = "Mystics"

	immediate = {
		# Artifact tombola
		trigger_switch = {
			on_trigger = has_character_modifier

			relic_rumor_major = {
				random_list = {
					# Christian artifacts
					10 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = bones_of_st_peter }
						}

						set_character_flag = bones_of_st_peter
					}

					# Jewish artifacts
					10 = {
						trigger = {
							NOT = { has_artifact = staff_of_moses }

							OR = {
								religion_group = jewish_group
								religion_group = christian
								religion_group = muslim
							}
						}

						mult_modifier = {
							factor = 0.5
							NOT = { religion_group = jewish_group }
						}

						set_character_flag = staff_of_moses
					}

					10 = {
						trigger = {
							NOT = { has_artifact = davids_harp }

							OR = {
								religion_group = jewish_group
								religion_group = christian
								religion_group = muslim
							}
						}

						mult_modifier = {
							factor = 0.5
							NOT = { religion_group = jewish_group }
						}

						set_character_flag = davids_harp
					}

					5 = {
						trigger = {
							NOT = { has_artifact = ark_of_the_covenant }

							OR = {
								religion_group = jewish_group
								religion_group = christian
							}
						}

						set_character_flag = ark_of_the_covenant
					}

					# Muslim artifacts
					10 = {
						trigger = {
							religion_group = muslim
							NOT = { has_artifact = seal_of_mohammad }
						}

						set_character_flag = seal_of_mohammad
					}

					10 = {
						trigger = {
							religion_group = muslim
							NOT = { has_artifact = holy_banner_of_mohammad }
						}

						set_character_flag = holy_banner_of_mohammad
					}

					10 = {
						trigger = {
							religion_group = muslim
							NOT = { has_artifact = blessed_mantle }
						}

						set_character_flag = blessed_mantle
					}

					# Zoroastrian artifacts
					10 = {
						trigger = {
							religion_group = zoroastrian_group
							NOT = { has_artifact = cup_of_jamshid }
						}

						set_character_flag = cup_of_jamshid
					}

					10 = {
						trigger = {
							NOT = { has_artifact = babr_e_bayan }

							OR = {
								religion_group = zoroastrian_group
								culture_group = iranian
							}
						}

						set_character_flag = babr_e_bayan
					}

					# Dharmic artifacts
					10 = {
						trigger = {
							religion_group = indian_group
							NOT = { has_artifact = buddhas_tooth }
						}

						set_character_flag = buddhas_tooth
					}

					10 = {
						trigger = {
							religion_group = indian_group
							NOT = { has_artifact = mountain_of_light_diamond }
						}

						set_character_flag = mountain_of_light_diamond
					}

					## Pagan artifacts ##
					# Germanic artifacts
					10 = {
						trigger = {
							religion_openly_germanic_or_reformed_trigger = yes
							NOT = { has_artifact = mjolnir }
						}

						set_character_flag = mjolnir
					}

					10 = {
						trigger = {
							religion_openly_germanic_or_reformed_trigger = yes
							NOT = { has_artifact = andvaranaut }
						}

						set_character_flag = andvaranaut
					}

					# West African artifacts
					10 = {
						trigger = {
							religion_openly_west_african_or_reformed_trigger = yes
							NOT = { has_artifact = fetish_of_souls }
						}

						set_character_flag = fetish_of_souls
					}

					# Finnish artifacts
					10 = {
						trigger = {
							religion_openly_finnish_or_reformed_trigger = yes
							NOT = { has_artifact = sampo }
						}

						set_character_flag = sampo
					}

					# Slavic artifacts
					10 = {
						trigger = {
							religion_openly_slavic_or_reformed_trigger = yes
							NOT = { has_artifact = axe_of_perun }
						}

						set_character_flag = axe_of_perun
					}

					# Romuvan artifacts
					10 = {
						trigger = {
							religion_openly_baltic_or_reformed_trigger = yes
							NOT = { has_artifact = axe_of_perkunas }
						}

						set_character_flag = axe_of_perkunas
					}

					# Tengri artifacts
					10 = {
						trigger = {
							religion_openly_tengri_or_reformed_trigger = yes
							NOT = { has_artifact = yada_tashy }
						}

						set_character_flag = yada_tashy
					}

					# Hellenic artifacts
					10 = {
						trigger = {
							religion_openly_hellenic_or_reformed_trigger = yes
							NOT = { has_artifact = achilles_spear }
						}

						set_character_flag = achilles_spear
					}

					10 = {
						trigger = {
							OR = {
								culture_group = byzantine
								religion_openly_hellenic_or_reformed_trigger = yes
							}

							NOT = { has_artifact = ancient_spartan_sword }
						}

						set_character_flag = ancient_spartan_sword
					}
				}
			}

			relic_rumor_medium = {
				random_list = {
					# Christian artifacts
					10 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = seamless_robe_of_jesus }
						}

						set_character_flag = seamless_robe_of_jesus
					}

					10 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = crown_of_thorns }
						}

						set_character_flag = crown_of_thorns
					}

					20 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = fragment_of_true_cross }
						}

						set_character_flag = fragment_of_true_cross
					}

					20 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = holy_foreskin }
						}

						set_character_flag = holy_foreskin
					}

					20 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = image_of_edessa }
						}

						set_character_flag = image_of_edessa
					}

					# Jewish artifacts
					10 = {
						trigger = {
							NOT = { has_artifact = seal_of_solomon }

							OR = {
								religion_group = jewish_group
								religion_group = christian
								religion_group = muslim
							}
						}

						mult_modifier = {
							factor = 0.5
							NOT = { religion_group = jewish_group }
						}

						set_character_flag = seal_of_solomon
					}

					20 = {
						trigger = {
							religion_group = jewish_group
							NOT = { has_artifact = tabernacle }
						}

						set_character_flag = tabernacle
					}

					# Muslim artifacts
					10 = {
						trigger = {
							religion_group = muslim
							NOT = { has_artifact = sword_of_mohammad }
						}

						set_character_flag = sword_of_mohammad
					}

					20 = {
						trigger = {
							religion_group = muslim
							NOT = { has_artifact = letter_of_mohammad }
						}

						set_character_flag = letter_of_mohammad
					}

					20 = {
						trigger = {
							religion_group = muslim
							NOT = { has_artifact = cloak_of_mohammad }
						}

						set_character_flag = cloak_of_mohammad
					}

					20 = {
						trigger = {
							religion_group = muslim
							NOT = { has_artifact = blessed_sandals }
						}

						set_character_flag = blessed_sandals
					}

					# Zoroastrian artifacts
					10 = {
						trigger = {
							NOT = { has_artifact = derafsh_kaviani }

							OR = {
								religion_group = zoroastrian_group
								culture_group = iranian
								has_landed_title = e_persia
								has_landed_title = k_persia
							}
						}

						set_character_flag = derafsh_kaviani
					}

					20 = {
						trigger = {
							NOT = { has_artifact = cyrus_cylinder }

							OR = {
								religion_group = zoroastrian_group
								culture_group = iranian
							}
						}

						set_character_flag = cyrus_cylinder
					}

					# Dharmic artifacts
					20 = {
						trigger = {
							religion_group = indian_group
							NOT = { has_artifact = elaborate_danda }
						}

						set_character_flag = elaborate_danda
					}

					20 = {
						trigger = {
							religion_group = indian_group
							NOT = { has_artifact = sariraka_actual_body_part }
						}

						mult_modifier = {
							factor = 0.5
							NOT = { religion = buddhist }
						}

						set_character_flag = sariraka_actual_body_part
					}

					# Germanic artifacts
					20 = {
						trigger = {
							religion_openly_norse_or_reformed_trigger = yes
							NOT = { has_artifact = gjallarhorn }
						}

						set_character_flag = gjallarhorn
					}
				}
			}

			relic_rumor_minor = {
				random_list = {
					# Generic artifacts
					10 = { # Famous Head
						trigger = {
							NOT = { has_artifact = famous_head }
						}

						set_character_flag = famous_head
					}

					10 = { # Famous Tongue
						trigger = {
							NOT = { has_artifact = famous_tongue }
						}

						set_character_flag = famous_tongue
					}

					10 = { # Infamous Tongue
						trigger = {
							NOT = { has_artifact = infamous_tongue }
						}

						set_character_flag = infamous_tongue
					}

					10 = { # Famous Hand
						trigger = {
							NOT = { has_artifact = famous_hand }
						}

						set_character_flag = famous_hand
					}

					10 = { # Famous Arm
						trigger = {
							NOT = { has_artifact = famous_arm }
						}

						set_character_flag = famous_arm
					}

					10 = { # Famous Foot
						trigger = {
							NOT = { has_artifact = famous_foot }
						}

						set_character_flag = famous_foot
					}

					10 = { # Famous Ancient Rusty Weapon
						trigger = {
							NOT = { has_artifact = famous_ancient_weapon }
						}

						set_character_flag = famous_ancient_weapon
					}

					# Christian artifacts
					20 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = fingerbone_of_saint }
						}

						set_character_flag = fingerbone_of_saint
					}

					10 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = chains_of_st_peter }
						}

						set_character_flag = chains_of_st_peter
					}

					10 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = right_hand_st_demetrius }
						}

						set_character_flag = right_hand_st_demetrius
					}

					10 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = veil_of_veronica }
						}

						set_character_flag = veil_of_veronica
					}

					10 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = remains_of_st_cessianus }
						}

						set_character_flag = remains_of_st_cessianus
					}

					10 = {
						trigger = {
							religion_group = christian
							NOT = { has_artifact = weeping_statue }
						}

						set_character_flag = weeping_statue
					}

					# Jewish artifacts
					10 = {
						trigger = {
							religion_group = jewish_group
							NOT = { has_artifact = davids_sling }
						}

						set_character_flag = davids_sling
					}

					# Muslim artifacts
					10 = {
						trigger = {
							religion_group = muslim
							NOT = { has_artifact = mohammads_beard }
						}

						set_character_flag = mohammads_beard
					}

					20 = {
						trigger = {
							religion_group = muslim
							NOT = { has_artifact = water_of_blessed_mantle }
						}

						set_character_flag = water_of_blessed_mantle
					}

					10 = {
						trigger = {
							religion_group = muslim
							NOT = { has_artifact = tooth_of_mohammad }
						}

						set_character_flag = tooth_of_mohammad
					}

					10 = {
						trigger = {
							religion_group = muslim
							NOT = { has_artifact = mohammads_bowl }
						}

						set_character_flag = mohammads_bowl
					}

					# Zoroastrian artifacts
					10 = {
						trigger = {
							religion_group = zoroastrian_group
							NOT = { has_artifact = haoma_sapling }
						}

						set_character_flag = haoma_sapling
					}

					20 = {
						trigger = {
							religion_group = zoroastrian_group
							NOT = { has_artifact = keshmar_cypress_branch }
						}

						set_character_flag = keshmar_cypress_branch
					}

					# Dharmic artifacts
					10 = {
						trigger = {
							religion_group = indian_group
							NOT = { has_artifact = sarira }
						}

						mult_modifier = {
							factor = 0.5
							NOT = { religion = buddhist }
						}

						set_character_flag = sarira
					}
				}
			}
		}

		if = {
			limit = {
				OR = {
					has_character_flag = bones_of_st_peter
					has_character_flag = staff_of_moses
					has_character_flag = davids_harp
					has_character_flag = ark_of_the_covenant
					has_character_flag = seal_of_mohammad
					has_character_flag = holy_banner_of_mohammad
					has_character_flag = blessed_mantle
					has_character_flag = cup_of_jamshid
					has_character_flag = babr_e_bayan
					has_character_flag = buddhas_tooth
					has_character_flag = mountain_of_light_diamond
					has_character_flag = andvaranaut
					has_character_flag = mjolnir
					has_character_flag = fetish_of_souls
					has_character_flag = sampo
					has_character_flag = axe_of_perun
					has_character_flag = axe_of_perkunas
					has_character_flag = yada_tashy

					# CK2Plus
					has_character_flag = achilles_spear
					has_character_flag = ancient_spartan_sword
				}
			}

			narrative_event = { id = MNM.9800 } # Quality 5 artifact
		}
		else = {
			character_event = { id = MNM.9801 } # Lower quality artifact
		}
	}
}

# If the searcher can no longer fulfill their duties
character_event = {
	id = MNM.9009
	picture = GFX_evt_recieve_letter
	border = GFX_event_normal_frame_religion

	desc = {
		text = EVTDESC_MNM_9009_A
		trigger = {
			NOR = {
				has_character_modifier = relic_rumor_minor
				has_character_modifier = relic_rumor_medium
				has_character_modifier = relic_rumor_major
			}
		}
	}
	desc = {
		text = EVTDESC_MNM_9009_B
		trigger = {
			OR = {
				has_character_modifier = relic_rumor_minor
				has_character_modifier = relic_rumor_medium
				has_character_modifier = relic_rumor_major
			}
		}
	}

	is_triggered_only = yes

	has_dlc = "Mystics"

	trigger = {
		NOT = { has_character_flag = show_this_event } # fix to deal with duplicate event
	}

	immediate = {
		set_character_flag = show_this_event
	}

	option = {
		name = ALAS

		if = {
			limit = {
				OR = {
					has_character_modifier = relic_rumor_minor
					has_character_modifier = relic_rumor_medium
					has_character_modifier = relic_rumor_major
				}
			}

			clr_artifact_searcher_effect = yes
			custom_tooltip = { text = EVTOPTB_MNM_9006_TT } # an attempt at more clarity
		}
		else = {
			clr_artifact_flagsmodifiers_effect = yes
		}

		hidden_effect = { # If your previous searcher was shit, you don't have to start below zero progress
			if = {
				limit = {
					check_variable = {
						which = relic_score
						value < 0
					}
				}

				set_variable = {
					which = relic_score
					value = 0
				}
			}
		}

		clr_character_flag = show_this_event
	}
}

# Asking for help, diplomacy
character_event = {
	id = MNM.9020
	desc = EVTDESC_MNM_9020
	picture = GFX_evt_state_diplomacy
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = {
		name = EVTOPTA_MNM_9020

		custom_tooltip = { text = EVTOPTA_MNM_9020_TT }

		add_character_modifier = {
			name = treasure_hunting_diplomats
			years = 5
		}

		hidden_effect = { change_variable = { which = relic_score value = 5 } }
	}

	option = {
		name = EVTOPTB_MNM_9020

		custom_tooltip = { text = EVTOPTB_MNM_9020_TT }

		hidden_effect = { change_variable = { which = relic_score value = -1 } }
	}
}

# Asking for help, martial
character_event = {
	id = MNM.9021
	desc = EVTDESC_MNM_9021
	picture = GFX_evt_bandits
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = {
		name = EVTOPTA_MNM_9021

		custom_tooltip = { text = EVTOPTA_MNM_9020_TT }

		add_character_modifier = {
			name = treasure_hunting_soldiers
			years = 5
		}

		hidden_effect = { change_variable = { which = relic_score value = 5 } }
	}

	option = {
		name = EVTOPTB_MNM_9020

		custom_tooltip = { text = EVTOPTB_MNM_9020_TT }

		hidden_effect = { change_variable = { which = relic_score value = -1 } }
	}
}

# Asking for help, stewardship
character_event = {
	id = MNM.9022
	desc = EVTDESC_MNM_9022
	picture = GFX_evt_merchant_caravan
	border = GFX_event_normal_frame_economy

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = {
		name = EVTOPTA_MNM_9022

		custom_tooltip = { text = EVTOPTA_MNM_9020_TT }

		add_character_modifier = {
			name = treasure_hunting_stewards
			years = 5
		}

		hidden_effect = { change_variable = { which = relic_score value = 5 } }
	}

	option = {
		name = EVTOPTB_MNM_9022

		custom_tooltip = { text = EVTOPTB_MNM_9020_TT }

		hidden_effect = { change_variable = { which = relic_score value = -1 } }
	}
}

# Asking for help, intrigue
character_event = {
	id = MNM.9023
	desc = EVTDESC_MNM_9023
	picture = GFX_evt_shady_meeting
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	has_dlc = "Mystics"

	immediate = { # For loc
		random_independent_ruler = {
			limit = {
				is_within_diplo_range = ROOT
				NOT = { character = ROOT }
			}

			save_event_target_as = spy_target

			random_vassal = {
				limit = {
					higher_tier_than = BARON
					NOT = { character = ROOT }
				}

				save_event_target_as = spy_target
			}
		}

		event_target:spy_target = {
			primary_title = { save_event_target_as = spy_title }
		}
	}

	option = {
		name = EVTOPTA_MNM_9023

		custom_tooltip = { text = EVTOPTA_MNM_9020_TT }

		add_character_modifier = {
			name = treasure_hunting_spies
			years = 5
		}

		hidden_effect = { change_variable = { which = relic_score value = 5 } }
	}

	option = {
		name = EVTOPTB_MNM_9020

		custom_tooltip = { text = EVTOPTB_MNM_9020_TT }

		hidden_effect = { change_variable = { which = relic_score value = -1 } }
	}
}

# Asking for help, learning
character_event = {
	id = MNM.9024
	desc = EVTDESC_MNM_9024
	picture = GFX_evt_gathering_of_minds
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	has_dlc = "Mystics"

	immediate = { # for loc
		primary_title = { save_event_target_as = primary_title }
	}

	option = {
		name = EVTOPTA_MNM_9024

		custom_tooltip = { text = EVTOPTA_MNM_9020_TT }

		add_character_modifier = {
			name = treasure_hunting_scholars
			years = 5
		}

		hidden_effect = { change_variable = { which = relic_score value = 5 } }
	}

	option = {
		name = EVTOPTB_MNM_9020

		custom_tooltip = { text = EVTOPTB_MNM_9020_TT }

		hidden_effect = { change_variable = { which = relic_score value = -1 } }
	}
}

# Ask for money
character_event = {
	id = MNM.9025
	desc = EVTDESC_MNM_9025
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_economy

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = {
		name = EVTOPTA_MNM_9025

		custom_tooltip = { text = EVTOPTA_MNM_9020_TT }

		scaled_wealth = { value = -0.5 min = -30 }

		hidden_effect = {
			random_list = {
				80 = {
					change_variable = {
						which = relic_score
						value = 3
					}
				}

				10 = { # You discover that they pocketed the money
					trigger = {
						event_target:relic_hunter = {
							ai = yes
							NOR = {
								trait = honest
								is_lover = ROOT
							}
						}
					}

					mult_modifier = {
						factor = 1.5

						event_target:relic_hunter = {
							OR = {
								trait = greedy
								trait = deceitful
								is_rival = ROOT
							}
						}
					}

					character_event = {
						id = MNM.9026
						days = 14
						random = 14
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTB_MNM_9024

		custom_tooltip = { text = EVTOPTB_MNM_9025_TT }
	}
}

# Stealing discovered
character_event = {
	id = MNM.9026
	desc = EVTDESC_MNM_9026
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_economy

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = {
		name = EVTOPTA_MNM_9026

		custom_tooltip = { text = EVTOPTA_MNM_9026_TT }

		opinion = {
			name = opinion_thief
			who = event_target:relic_hunter
			years = 10
		}
	}

	option = {
		name = EVTOPTB_MNM_9026

		custom_tooltip = { text = EVTOPTB_MNM_9026_TT }

		hidden_effect = { change_variable = { which = relic_score value = 3 } }
	}
}

# Messed up big
character_event = {
	id = MNM.9027
	desc = EVTDESC_MNM_9027
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = {
		name = EVTOPTA_MNM_9027

		custom_tooltip = { text = EVTOPTA_MNM_9027_TT }

		opinion = {
			name = opinion_useless_moron
			who = event_target:relic_hunter
			years = 10
		}

		hidden_effect = { change_variable = { which = relic_score value = -3 } }
	}
}

# Upgrade to bigger rumor
character_event = {
	id = MNM.9028
	desc = EVTDESC_MNM_9028
	picture = GFX_evt_treasure_chamber
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = {
		name = EVTOPTA_MNM_9028

		custom_tooltip = { text = EVTOPTA_MNM_9028_TT }

		random = {
			chance = 20
			add_trait_stressed_effect = yes
		}

		if = {
			limit = { has_character_modifier = relic_rumor_medium }

			remove_character_modifier = relic_rumor_medium

			add_character_modifier = {
				name = relic_rumor_major
				years = 15
			}
		}
		else_if = {
			limit = { has_character_modifier = relic_rumor_minor }

			remove_character_modifier = relic_rumor_minor

			add_character_modifier = {
				name = relic_rumor_medium
				years = 10
			}
		}

		hidden_effect = { multiply_variable = { which = relic_score value = 0.5 } }
	}

	option = {
		name = EVTOPTB_MNM_9028
	}
}

# Terrible accident
character_event = {
	id = MNM.9029
	desc = EVTDESC_MNM_9029
	picture = GFX_evt_burning_house
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = {
		name = EVTOPTA_MNM_9029

		event_target:relic_hunter = {
			random_accident_death_effect = yes
		}
	}
}

# Dead artifact hunter ping
character_event = {
	id = MNM.9030

	hide_window = yes
	is_triggered_only = yes # on_death

	has_dlc = "Mystics"
	has_character_flag = relic_hunter

	immediate = {
		save_event_target_as = relic_hunter

		liege = {
			character_event = { id = MNM.9009 }
		}
	}
}

# Artifact search update event - progress
character_event = {
	id = MNM.9031
	desc = EVTDESC_MNM_9031_B
	picture = GFX_evt_recieve_letter
	border = GFX_event_normal_frame_religion

	notification = yes
	is_triggered_only = yes

	has_dlc = "Mystics"
	ai = no

	option = {
		name = EXCELLENT
	}
}

# Artifact search update event - setback
character_event = {
	id = MNM.9032
	desc = EVTDESC_MNM_9032
	picture = GFX_evt_recieve_letter
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	has_dlc = "Mystics"
	ai = no

	option = {
		name = UNFORTUNATE
	}
}

# Imprisoned artifact hunter ping
character_event = {
	id = MNM.9033

	hide_window = yes
	is_triggered_only = yes # on_become_imprisoned_any_reason

	has_dlc = "Mystics"
	has_character_flag = relic_hunter

	immediate = {
		save_event_target_as = relic_hunter

		liege = {
			character_event = { id = MNM.9009 }
		}
	}
}

# Artifact hunter councillor fired/retires ping
character_event = {
	id = MNM.9034

	hide_window = yes
	is_triggered_only = yes # title lose_effect/retire_effect

	has_dlc = "Mystics"
	has_character_flag = relic_hunter

	immediate = {
		save_event_target_as = relic_hunter

		liege = {
			character_event = { id = MNM.9009 }
		}
	}
}

# Artifact search update event - progress nearing end
character_event = {
	id = MNM.9035
	desc = EVTDESC_MNM_9031_A
	picture = GFX_evt_recieve_letter
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	has_dlc = "Mystics"
	ai = no

	option = {
		name = EXCELLENT
	}
}

### Return Event ###

## Quality 5 ##
narrative_event = {
	id = MNM.9800
	border = GFX_event_narrative_frame_religion

	title = {
		text = EVTNAME_MNM_9804
		trigger = { has_character_flag = bones_of_st_peter }
	}
	title = {
		text = EVTNAME_MNM_9810
		trigger = { has_character_flag = staff_of_moses }
	}
	title = {
		text = EVTNAME_MNM_9811
		trigger = { has_character_flag = davids_harp }
	}
	title = {
		text = EVTTITLE_MNM_9890
		trigger = { has_character_flag = ark_of_the_covenant }
	}
	title = {
		text = EVTNAME_MNM_9820
		trigger = { has_character_flag = seal_of_mohammad }
	}
	title = {
		text = EVTNAME_MNM_9821
		trigger = { has_character_flag = holy_banner_of_mohammad }
	}
	title = {
		text = EVTNAME_MNM_9822
		trigger = { has_character_flag = blessed_mantle }
	}
	title = {
		text = EVTNAME_MNM_9830
		trigger = { has_character_flag = cup_of_jamshid }
	}
	title = {
		text = EVTNAME_MNM_9831
		trigger = { has_character_flag = babr_e_bayan }
	}
	title = {
		text = EVTNAME_MNM_9200
		trigger = { has_character_flag = buddhas_tooth }
	}
	title = {
		text = EVTNAME_MNM_9201
		trigger = { has_character_flag = mountain_of_light_diamond }
	}
	title = {
		text = EVTNAME_MNM_9601
		trigger = { has_character_flag = andvaranaut }
	}
	title = {
		text = EVTNAME_MNM_9602
		trigger = { has_character_flag = mjolnir }
	}
	title = {
		text = EVTNAME_MNM_9603
		trigger = { has_character_flag = fetish_of_souls }
	}
	title = {
		text = EVTNAME_MNM_9604
		trigger = { has_character_flag = sampo }
	}
	title = {
		text = EVTNAME_MNM_9605
		trigger = { has_character_flag = axe_of_perun }
	}
	title = {
		text = EVTNAME_MNM_9606
		trigger = { has_character_flag = axe_of_perkunas }
	}
	title = {
		text = EVTNAME_MNM_9607
		trigger = { has_character_flag = yada_tashy }
	}

	# CK2Plus
	title = {
		text = EVTNAME_MNM_9608
		trigger = { has_character_flag = achilles_spear }
	}
	title = {
		text = EVTNAME_MNM_9609
		trigger = { has_character_flag = ancient_spartan_sword }
	}

	desc = {
		text = EVTDESC_MNM_9804
		trigger = { has_character_flag = bones_of_st_peter }
	}
	desc = {
		text = EVTDESC_MNM_9810
		trigger = { has_character_flag = staff_of_moses }
	}
	desc = {
		text = EVTDESC_MNM_9811
		trigger = { has_character_flag = davids_harp }
	}
	desc = {
		text = EVTDESC_MNM_9890
		trigger = { has_character_flag = ark_of_the_covenant }
	}
	desc = {
		text = EVTDESC_MNM_9820
		trigger = { has_character_flag = seal_of_mohammad }
	}
	desc = {
		text = EVTDESC_MNM_9821
		trigger = { has_character_flag = holy_banner_of_mohammad }
	}
	desc = {
		text = EVTDESC_MNM_9822
		trigger = { has_character_flag = blessed_mantle }
	}
	desc = {
		text = EVTDESC_MNM_9830
		trigger = { has_character_flag = cup_of_jamshid }
	}
	desc = {
		text = EVTDESC_MNM_9831
		trigger = { has_character_flag = babr_e_bayan }
	}
	desc = {
		text = EVTDESC_MNM_9200
		trigger = { has_character_flag = buddhas_tooth }
	}
	desc = {
		text = EVTDESC_MNM_9201
		trigger = { has_character_flag = mountain_of_light_diamond }
	}
	desc = {
		text = EVTDESC_MNM_9601
		trigger = { has_character_flag = andvaranaut }
	}
	desc = {
		text = EVTDESC_MNM_9602
		trigger = { has_character_flag = mjolnir }
	}
	desc = {
		text = EVTDESC_MNM_9603
		trigger = { has_character_flag = fetish_of_souls }
	}
	desc = {
		text = EVTDESC_MNM_9604
		trigger = { has_character_flag = sampo }
	}
	desc = {
		text = EVTDESC_MNM_9605
		trigger = { has_character_flag = axe_of_perun }
	}
	desc = {
		text = EVTDESC_MNM_9606
		trigger = { has_character_flag = axe_of_perkunas }
	}
	desc = {
		text = EVTDESC_MNM_9607
		trigger = { has_character_flag = yada_tashy }
	}

	# CK2Plus
	desc = {
		text = EVTDESC_MNM_9608
		trigger = { has_character_flag = achilles_spear }
	}
	desc = {
		text = EVTDESC_MNM_9609
		trigger = { has_character_flag = ancient_spartan_sword }
	}

	picture = {
		picture = GFX_evt_relic_box
		trigger = { NOT = { religion_group = pagan_group } }
	}
	picture = {
		picture = GFX_evt_pagan_artifacts
		trigger = { religion_group = pagan_group }
	}

	is_triggered_only = yes

	has_dlc = "Mystics"

	option = { # It's their duty
		name = EVTOPT_MAJOR_ARTIFACT_DUTY

		prestige = 10

		reverse_opinion = {
			name = opinion_extremely_disappointed
			who = event_target:relic_hunter
			years = 20
		}
	}

	option = { # Monetary reward
		name = EVTOPT_MAJOR_ARTIFACT_MONEY

		reverse_opinion = {
			name = opinion_was_rewarded
			who = event_target:relic_hunter
			years = 15
		}

		opinion = {
			name = opinion_found_major_artifact
			who = event_target:relic_hunter
			years = 15
		}

		transfer_scaled_wealth = {
			to = event_target:relic_hunter
			value = 1
			min = 50
		}
	}

	option = { # Reward them with a favor
		name = EVTOPT_MAJOR_ARTIFACT_FAVOR

		trigger = {
			NOT = { owes_favor_to = event_target:relic_hunter }
		}

		reverse_opinion = {
			name = opinion_was_rewarded
			who = event_target:relic_hunter
			years = 15
		}

		opinion = {
			name = opinion_found_major_artifact
			who = event_target:relic_hunter
			years = 15
		}

		reverse_add_favor = event_target:relic_hunter
	}

	option = { # Praise them (prestige reward)
		trigger = { diplomacy >= 15 }

		name = EVTOPT_MAJOR_ARTIFACT_PRESTIGE

		reverse_opinion = {
			name = opinion_was_praised
			who = event_target:relic_hunter
			years = 15
		}

		opinion = {
			name = opinion_found_major_artifact
			who = event_target:relic_hunter
			years = 5
		}

		event_target:relic_hunter = {
			show_scope_change = no

			prestige = 100
		}

		random = {
			chance = 20
			add_friend = event_target:relic_hunter
		}
	}

	after = {
		trigger_switch = {
			on_trigger = has_character_flag

			bones_of_st_peter         = { add_artifact = bones_of_st_peter }
			staff_of_moses            = { add_artifact = staff_of_moses }
			davids_harp               = { add_artifact = davids_harp }
			ark_of_the_covenant       = { add_artifact = ark_of_the_covenant }
			seal_of_mohammad          = { add_artifact = seal_of_mohammad }
			holy_banner_of_mohammad   = { add_artifact = holy_banner_of_mohammad }
			blessed_mantle            = { add_artifact = blessed_mantle }
			cup_of_jamshid            = { add_artifact = cup_of_jamshid }
			babr_e_bayan              = { add_artifact = babr_e_bayan }
			buddhas_tooth             = { add_artifact = buddhas_tooth }
			mountain_of_light_diamond = { add_artifact = mountain_of_light_diamond }
			andvaranaut               = { add_artifact = andvaranaut }
			mjolnir                   = { add_artifact = mjolnir }
			fetish_of_souls           = { add_artifact = fetish_of_souls }
			sampo                     = { add_artifact = sampo }
			axe_of_perun              = { add_artifact = axe_of_perun }
			axe_of_perkunas           = { add_artifact = axe_of_perkunas }
			yada_tashy                = { add_artifact = yada_tashy }

			# CK2Plus
			achilles_spear = { add_artifact = achilles_spear }
			ancient_spartan_sword = { add_artifact = ancient_spartan_sword }
		}

		new_artifact = { set_creation_date = 1.1.1 }
		clr_artifact_flagsmodifiers_effect = yes

		clr_character_flag = bones_of_st_peter
		clr_character_flag = staff_of_moses
		clr_character_flag = davids_harp
		clr_character_flag = ark_of_the_covenant
		clr_character_flag = seal_of_mohammad
		clr_character_flag = holy_banner_of_mohammad
		clr_character_flag = blessed_mantle
		clr_character_flag = cup_of_jamshid
		clr_character_flag = babr_e_bayan
		clr_character_flag = buddhas_tooth
		clr_character_flag = mountain_of_light_diamond
		clr_character_flag = andvaranaut
		clr_character_flag = mjolnir
		clr_character_flag = fetish_of_souls
		clr_character_flag = sampo
		clr_character_flag = axe_of_perun
		clr_character_flag = axe_of_perkunas
		clr_character_flag = yada_tashy
	}
}

# Lower quality
character_event = {
	id = MNM.9801
	border = GFX_event_normal_frame_religion

	desc = {
		text = EVTDESC_MNM_9835
		trigger = { has_character_flag = famous_head }
	}
	desc = {
		text = EVTDESC_MNM_9836
		trigger = { has_character_flag = famous_tongue }
	}
	desc = {
		text = EVTDESC_MNM_9837
		trigger = { has_character_flag = infamous_tongue }
	}
	desc = {
		text = EVTDESC_MNM_9838
		trigger = { has_character_flag = famous_hand }
	}
	desc = {
		text = EVTDESC_MNM_9839
		trigger = { has_character_flag = famous_arm }
	}
	desc = {
		text = EVTDESC_MNM_9840
		trigger = { has_character_flag = famous_foot }
	}
	desc = {
		text = EVTDESC_MNM_9841
		trigger = { has_character_flag = famous_ancient_weapon }
	}
	desc = {
		text = EVTDESC_MNM_9805
		trigger = { has_character_flag = seamless_robe_of_jesus }
	}
	desc = {
		text = EVTDESC_MNM_9806
		trigger = { has_character_flag = crown_of_thorns }
	}
	desc = {
		text = EVTDESC_MNM_9807
		trigger = { has_character_flag = fragment_of_true_cross }
	}
	desc = {
		text = EVTDESC_MNM_9808
		trigger = { has_character_flag = holy_foreskin }
	}
	desc = {
		text = EVTDESC_MNM_9809
		trigger = { has_character_flag = fingerbone_of_saint }
	}
	desc = {
		text = EVTDESC_MNM_9842
		trigger = { has_character_flag = chains_of_st_peter }
	}
	desc = {
		text = EVTDESC_MNM_9843
		trigger = { has_character_flag = right_hand_st_demetrius }
	}
	desc = {
		text = EVTDESC_MNM_9844
		trigger = { has_character_flag = veil_of_veronica }
	}
	desc = {
		text = EVTDESC_MNM_9845
		trigger = { has_character_flag = remains_of_st_cessanius }
	}
	desc = {
		text = EVTDESC_MNM_9846
		trigger = { has_character_flag = weeping_statue }
	}
	desc = {
		text = EVTDESC_MNM_9847
		trigger = { has_character_flag = image_of_edessa }
	}
	desc = {
		text = EVTDESC_MNM_9814
		trigger = { has_character_flag = seal_of_solomon }
	}
	desc = {
		text = EVTDESC_MNM_9853
		trigger = { has_character_flag = tabernacle }
	}
	desc = {
		text = EVTDESC_MNM_9854
		trigger = { has_character_flag = davids_sling }
	}
	desc = {
		text = EVTDESC_MNM_9823
		trigger = { has_character_flag = sword_of_mohammad }
	}
	desc = {
		text = EVTDESC_MNM_9824
		trigger = { has_character_flag = letter_of_mohammad }
	}
	desc = {
		text = EVTDESC_MNM_9848
		trigger = { has_character_flag = cloak_of_mohammad }
	}
	desc = {
		text = EVTDESC_MNM_9825
		trigger = { has_character_flag = mohammads_beard }
	}
	desc = {
		text = EVTDESC_MNM_9849
		trigger = { has_character_flag = tooth_of_mohammad }
	}
	desc = {
		text = EVTDESC_MNM_9826
		trigger = { has_character_flag = water_of_blessed_mantle }
	}
	desc = {
		text = EVTDESC_MNM_9850
		trigger = { has_character_flag = mohammads_bowl }
	}
	desc = {
		text = EVTDESC_MNM_9851
		trigger = { has_character_flag = blessed_sandals }
	}
	desc = {
		text = EVTDESC_MNM_9832
		trigger = { has_character_flag = derafsh_kaviani }
	}
	desc = {
		text = EVTDESC_MNM_9833
		trigger = { has_character_flag = haoma_sapling }
	}
	desc = {
		text = EVTDESC_MNM_9834
		trigger = { has_character_flag = keshmar_cypress_branch }
	}
	desc = {
		text = EVTDESC_MNM_9852
		trigger = { has_character_flag = cyrus_cilinder }
	}
	desc = {
		text = EVTDESC_MNM_9202
		trigger = { has_character_flag = elaborate_danda }
	}
	desc = {
		text = EVTDESC_MNM_9203
		trigger = { has_character_flag = sarira }
	}
	desc = {
		text = EVTDESC_MNM_9204
		trigger = { has_character_flag = sariraka_actual_body_part }
	}
	desc = {
		text = EVTDESC_MNM_9600
		trigger = { has_character_flag = gjallarhorn }
	}

	picture = {
		picture = GFX_evt_relic_box
		trigger = { NOT = { religion_group = pagan_group } }
	}
	picture = {
		picture = GFX_evt_pagan_artifacts
		trigger = { religion_group = pagan_group }
	}

	is_triggered_only = yes

	has_dlc = "Mystics"

	immediate = {
		trigger_switch = {
			on_trigger = has_character_flag

			famous_head               = { add_artifact = famous_head }
			famous_tongue             = { add_artifact = famous_tongue }
			infamous_tongue           = { add_artifact = infamous_tongue }
			famous_hand               = { add_artifact = famous_hand }
			famous_arm                = { add_artifact = famous_arm }
			famous_foot               = { add_artifact = famous_foot }
			famous_ancient_weapon     = { add_artifact = famous_ancient_weapon }
			seamless_robe_of_jesus    = { add_artifact = seamless_robe_of_jesus }
			crown_of_thorns           = { add_artifact = crown_of_thorns }
			fragment_of_true_cross    = { add_artifact = fragment_of_true_cross }
			holy_foreskin             = { add_artifact = holy_foreskin }
			fingerbone_of_saint       = { add_artifact = fingerbone_of_saint }
			chains_of_st_peter        = { add_artifact = chains_of_st_peter }
			right_hand_st_demetrius   = { add_artifact = right_hand_st_demetrius }
			veil_of_veronica          = { add_artifact = veil_of_veronica }
			remains_of_st_cessanius   = { add_artifact = remains_of_st_cessianus }
			weeping_statue            = { add_artifact = weeping_statue }
			image_of_edessa           = { add_artifact = image_of_edessa }
			seal_of_solomon           = { add_artifact = seal_of_solomon }
			tabernacle                = { add_artifact = tabernacle }
			davids_sling              = { add_artifact = davids_sling }
			sword_of_mohammad         = { add_artifact = sword_of_mohammad }
			letter_of_mohammad        = { add_artifact = letter_of_mohammad }
			cloak_of_mohammad         = { add_artifact = cloak_of_mohammad }
			mohammads_beard           = { add_artifact = mohammads_beard }
			tooth_of_mohammad         = { add_artifact = tooth_of_mohammad }
			water_of_blessed_mantle   = { add_artifact = water_of_blessed_mantle }
			mohammads_bowl            = { add_artifact = mohammads_bowl }
			blessed_sandals           = { add_artifact = blessed_sandals }
			derafsh_kaviani           = { add_artifact = derafsh_kaviani }
			haoma_sapling             = { add_artifact = haoma_sapling }
			keshmar_cypress_branch    = { add_artifact = keshmar_cypress_branch }
			cyrus_cylinder            = { add_artifact = cyrus_cylinder }
			elaborate_danda           = { add_artifact = elaborate_danda }
			sarira                    = { add_artifact = sarira }
			sariraka_actual_body_part = { add_artifact = sariraka_actual_body_part }
			gjallarhorn               = { add_artifact = gjallarhorn }
		}

		new_artifact = {
			save_event_target_as = found_artifact

			if = {
				limit = { artifact_type = mohammads_beard }
				set_creation_date = 632.06.08
			}
			else_if = {
				limit = { artifact_type = tooth_of_mohammad }
				set_creation_date = 625.03.23
			}
			else = {
				set_creation_date = 1.1.1 # Unknown
			}
		}
	}

	option = { # It's their duty
		name = EVTOPT_MINOR_ARTIFACT_DUTY

		prestige = 10

		reverse_opinion = {
			name = opinion_disappointed
			who = event_target:relic_hunter
			years = 10
		}
	}

	option = { # Monetary reward
		name = EVTOPT_MINOR_ARTIFACT_MONEY

		reverse_opinion = {
			name = opinion_was_rewarded
			who = event_target:relic_hunter
			years = 10
		}

		opinion = {
			name = opinion_found_minor_artifact
			who = event_target:relic_hunter
			years = 10
		}

		event_target:found_artifact = {
			show_scope_change = no

			if = {
				limit = { quality >= 3 }

				ROOT = {
					show_scope_change = no

					transfer_scaled_wealth = {
						to = event_target:relic_hunter
						value = 0.50
						min = 35
					}
				}
			}
			else = {
				ROOT = {
					show_scope_change = no

					transfer_scaled_wealth = {
						to = event_target:relic_hunter
						value = 0.25
						min = 20
					}
				}
			}
		}
	}

	option = { # Reward them with a favor
		name = EVTOPT_MINOR_ARTIFACT_FAVOR

		trigger = {
			has_dlc = "Conclave"
			NOT = { owes_favor_to = event_target:relic_hunter }
		}

		reverse_opinion = {
			name = opinion_was_rewarded
			who = event_target:relic_hunter
			years = 10
		}

		opinion = {
			name = opinion_found_minor_artifact
			who = event_target:relic_hunter
			years = 10
		}

		reverse_add_favor = event_target:relic_hunter
	}

	option = { # Praise them (prestige reward)
		name = EVTOPT_MINOR_ARTIFACT_PRESTIGE

		trigger = { diplomacy >= 15 }

		reverse_opinion = {
			name = opinion_was_praised
			who = event_target:relic_hunter
			years = 10
		}

		opinion = {
			name = opinion_found_minor_artifact
			who = event_target:relic_hunter
			years = 10
		}

		event_target:relic_hunter = {
			show_scope_change = no

			prestige = 25
		}

		random = {
			chance = 20
			add_friend = event_target:relic_hunter
		}
	}

	after = {
		clr_artifact_flagsmodifiers_effect = yes
		clr_character_flag = famous_head
		clr_character_flag = famous_tongue
		clr_character_flag = infamous_tongue
		clr_character_flag = famous_hand
		clr_character_flag = famous_arm
		clr_character_flag = famous_foot
		clr_character_flag = famous_ancient_weapon
		clr_character_flag = seamless_robe_of_jesus
		clr_character_flag = crown_of_thorns
		clr_character_flag = fragment_of_true_cross
		clr_character_flag = holy_foreskin
		clr_character_flag = fingerbone_of_saint
		clr_character_flag = chains_of_st_peter
		clr_character_flag = right_hand_st_demetrius
		clr_character_flag = veil_of_veronica
		clr_character_flag = remains_of_st_cessanius
		clr_character_flag = weeping_statue
		clr_character_flag = image_of_edessa
		clr_character_flag = seal_of_solomon
		clr_character_flag = tabernacle
		clr_character_flag = davids_sling
		clr_character_flag = sword_of_mohammad
		clr_character_flag = letter_of_mohammad
		clr_character_flag = cloak_of_mohammad
		clr_character_flag = mohammads_beard
		clr_character_flag = tooth_of_mohammad
		clr_character_flag = water_of_blessed_mantle
		clr_character_flag = mohammads_bowl
		clr_character_flag = blessed_sandals
		clr_character_flag = derafsh_kaviani
		clr_character_flag = haoma_sapling
		clr_character_flag = keshmar_cypress_branch
		clr_character_flag = cyrus_cilinder
		clr_character_flag = elaborate_danda
		clr_character_flag = sarira
		clr_character_flag = sariraka_actual_body_part
		clr_character_flag = gjallarhorn
	}
}

### Seal of Solomon removes possession###
character_event = {
	id = MNM.9815
	desc = EVTDESC_MNM_9815
	picture = GFX_evt_secluded_in_prayer
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes # on_yearly_pulse

	has_dlc = "Mystics"

	trigger = {
		trait = possessed
		has_artifact = seal_of_solomon
	}

	option = { # remove possession
		name = EVTOPTA_MNM_9815
		remove_trait = possessed
	}

	option = { # nah I'm good
		name = EVTOPTB_MNM_9815
	}
}

### Blessed Mantle allows you to make Water of the Blessed Mantle###
character_event = {
	id = MNM.9816
	desc = EVTDESC_MNM_9816
	picture = GFX_evt_charity
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes # on_yearly_pulse, random_events

	has_dlc = "Mystics"

	trigger = {
		has_artifact = blessed_mantle
		NOT = { has_artifact = water_of_blessed_mantle }
	}

	option = { # Make Water of the Blessed Mantle!
		name = EVTOPTA_MNM_9816

		wealth = -250
		decadence = 10
		add_artifact = water_of_blessed_mantle
	}

	option = { # nah
		name = EVTOPTB_MNM_9816
	}
}

# CleanSlate: employ_a_smith event chain moved to mnm_smith_events.txt

# Artifact looting

# ROOT is the owner of the winning unit
# FROM is the taken holding title
character_event = {
	id = MNM.9900

	hide_window = yes
	is_triggered_only = yes # on_siege_over_winner

	trigger = {
		OR = {
			has_dlc = "Mystics"
			has_dlc = "Holy Fury"
		}

		FROM = {
			is_capital = yes # capital holding
			location = { is_capital = yes } # of capital province
		}
	}

	immediate = {
		save_event_target_as = looter
		# log = "Chance to lose an artifact on_action fired for the leader: [This.GetBestName] on the holding: [From.GetName]"

		FROM = {
			save_event_target_as = target_title
			location = { save_event_target_as = target_location }

			holder_scope = {
				if = {
					limit = {
						NOR = {
							character = ROOT
							is_vassal_or_below_of = ROOT
						}
					}

					# log = "Chance to lose an artifact on_action fired for the capital of [This.GetBestName]"

					if = {
						limit = {
							num_of_artifacts >= 1
							at_location = event_target:target_location
						}

						character_event = { id = MNM.9901 } # Chance to lose an artifact.
					}

					any_courtier = {
						limit = {
							num_of_artifacts >= 1
							at_location = event_target:target_location
							prisoner = no
							is_ruler = no # Don't steal vassals' artifacts, since this is not their capital!
						}

						character_event = { id = MNM.9901 } # Chance to lose an artifact.
					}
				}
			}
		}
	}
}

character_event = {
	id = MNM.9901

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		save_event_target_as = original_item_owner

		random_list = {
			100 = {
				trigger = {
					any_artifact = {
						quality == 1
						NOT = { artifact_type_owned_by = FROM }
					}
				}

				FROM = { character_event = { id = MNM.9902 } }
			}

			70 = {
				trigger = {
					any_artifact = {
						quality == 2
						NOT = { artifact_type_owned_by = FROM }
					}
				}

				FROM = { character_event = { id = MNM.9904 } }
			}

			45 = {
				trigger = {
					any_artifact = {
						quality == 3
					}
				}

				FROM = { character_event = { id = MNM.9906 } }
			}

			25 = {
				trigger = {
					any_artifact = {
						quality == 4
					}
				}

				FROM = { character_event = { id = MNM.9908 } }
			}

			10 = {
				trigger = {
					any_artifact = {
						quality == 5
					}
				}

				FROM = { character_event = { id = MNM.9910 } }
			}

			6000 = { # chance of no artifact stealing
				mult_modifier = {
					factor = 0.2

					# Must be raiding, not sieging
					FROM = { is_looting_in = event_target:target_location }

					FROMFROM = { # Sieged holding
						has_holding_modifier = looted_modifier
						NOT = { controlled_by = FROM }
					}
				}
				mult_modifier = {
					factor = 0.8
					num_of_artifacts >= 3
				}
				mult_modifier = {
					factor = 0.8
					num_of_artifacts >= 4
				}
				mult_modifier = {
					factor = 0.8
					num_of_artifacts >= 5
				}
				mult_modifier = {
					factor = 0.8
					num_of_artifacts >= 6
				}
				mult_modifier = {
					factor = 0.8
					num_of_artifacts >= 7
				}
				mult_modifier = {
					factor = 0.8
					num_of_artifacts >= 8
				}
				mult_modifier = {
					factor = 0.8
					num_of_artifacts >= 9
				}
				mult_modifier = {
					factor = 0.8
					num_of_artifacts >= 10
				}
				mult_modifier = {
					factor = 0.5
					NOT = {
						any_artifact = {
							quality == 1
						}
					}
				}
				mult_modifier = {
					factor = 0.65
					NOT = {
						any_artifact = {
							quality == 2
						}
					}
				}
				mult_modifier = {
					factor = 0.775
					NOT = {
						any_artifact = {
							quality == 3
						}
					}
				}
				mult_modifier = {
					factor = 0.875
					NOT = {
						any_artifact = {
							quality == 4
						}
					}
				}
				mult_modifier = {
					factor = 0.95
					NOT = {
						any_artifact = {
							quality == 5
						}
					}
				}
				mult_modifier = {
					factor = 1.5 # if the item holder has a wonder with a vault of some kind
					any_realm_wonder_upgrade = {
						has_wonder_upgrade_flag = artifact_protection
					}
				}
				mult_modifier = {
					factor = 0.5 # if the sieger was a warrior lodge member
					FROM = {
						is_member_of_any_warrior_lodge_trigger = yes
						society_rank > 1 # Must be rank 2 or higher
					}
				}
				mult_modifier = {
					factor = 0.5 # if the sieger has a reaver bloodline
					FROM = {
						any_owned_bloodline = {
							has_bloodline_flag = bloodline_reaver
							bloodline_is_active_for = PREV
						}
					}
				}
			}
		}

		FROM = { clr_character_flag = looted_by_raiding_holding }
	}
}

# Ransack enemy holding and find artifact, small item
character_event = {
	id = MNM.9902
	picture = GFX_evt_relic_box
	border = GFX_event_normal_frame_war

	desc = {
		text = EVTDESC_MNM_9902_A
		trigger = { looting_artifact_event_religious_artifacts_trigger = no }
	}
	desc = {
		text = EVTDESC_MNM_9902_B
		trigger = { looting_artifact_event_religious_artifacts_trigger = yes }
	}

	is_triggered_only = yes

	immediate = {
		FROM = {
			random_artifact = {
				limit = {
					quality == 1
					NOT = { artifact_type_owned_by = ROOT }
				}

				save_event_target_as = transferred_artifact

				transfer_artifact = {
					from = PREV
					to = ROOT
				}
			}

			character_event = { id = MNM.9903 }
		}
	}

	option = {
		name = {
			text = EVTOPTA_MNM_9902
			trigger = { looting_artifact_event_religious_artifacts_trigger = no }
		}
		name = {
			text = EVTOPTB_MNM_9902
			trigger = { looting_artifact_event_religious_artifacts_trigger = yes }
		}

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				transfer_artifact = {
					from = FROM
					to = ROOT
				}
			}
		}
	}
}

# Someone ransacked my holding and stole my artifact, small item
character_event = {
	id = MNM.9903
	desc = EVTDESC_MNM_9903
	picture = GFX_evt_relic_box
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_MNM_9903

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				transfer_artifact = {
					from = ROOT
					to = FROM
				}
			}
		}
	}
}

# Ransack enemy holding and find artifact, medium item
character_event = {
	id = MNM.9904
	picture = GFX_evt_relic_box
	border = GFX_event_normal_frame_war

	desc = {
		text = EVTDESC_MNM_9902_A
		trigger = {
			looting_artifact_event_religious_artifacts_trigger = no
		}
	}
	desc = {
		text = EVTDESC_MNM_9902_B
		trigger = {
			looting_artifact_event_religious_artifacts_trigger = yes
		}
	}

	is_triggered_only = yes

	immediate = {
		FROM = {
			random_artifact = {
				limit = {
					quality == 2
					NOT = { artifact_type_owned_by = ROOT }
				}

				save_event_target_as = transferred_artifact

				transfer_artifact = {
					from = PREV
					to = ROOT
				}
			}

			character_event = { id = MNM.9905 }
		}
	}

	option = {
		name = {
			text = EVTOPTA_MNM_9902
			trigger = { looting_artifact_event_religious_artifacts_trigger = no }
		}
		name = {
			text = EVTOPTB_MNM_9902
			trigger = { looting_artifact_event_religious_artifacts_trigger = yes }
		}

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				transfer_artifact = {
					from = FROM
					to = ROOT
				}
			}
		}
	}
}

# Someone ransacked my holding and stole my artifact, medium item
character_event = {
	id = MNM.9905
	desc = EVTDESC_MNM_9903
	picture = GFX_evt_relic_box
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_MNM_9903

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				transfer_artifact = {
					from = ROOT
					to = FROM
				}
			}
		}
	}
}

# Ransack enemy holding and find artifact, great item
character_event = {
	id = MNM.9906
	picture = GFX_evt_relic_box
	border = GFX_event_normal_frame_war

	desc = {
		text = EVTDESC_MNM_9906_A
		trigger = {
			NOT = { has_character_flag = looted_artifact_destroy_duplicate }
			looting_artifact_event_religious_artifacts_trigger = no
		}
	}
	desc = {
		text = EVTDESC_MNM_9906_B
		trigger = {
			has_character_flag = looted_artifact_destroy_duplicate
			looting_artifact_event_religious_artifacts_trigger = no
		}
	}
	desc = {
		text = EVTDESC_MNM_9906_C
		trigger = {
			NOT = { has_character_flag = looted_artifact_destroy_duplicate }
			looting_artifact_event_religious_artifacts_trigger = yes
		}
	}
	desc = {
		text = EVTDESC_MNM_9906_D
		trigger = {
			has_character_flag = looted_artifact_destroy_duplicate
			looting_artifact_event_religious_artifacts_trigger = yes
		}
	}

	is_triggered_only = yes

	immediate = {
		FROM = {
			random_artifact = {
				limit = { quality == 3 }

				preferred_limit = {
					NOT = { artifact_type_owned_by = ROOT }
				}

				if = {
					limit = { artifact_type_owned_by = ROOT }
					ROOT = { set_character_flag = looted_artifact_destroy_duplicate }
				}
				else = {
					PREV = { character_event = { id = MNM.9907 } }

					transfer_artifact = {
						from = PREV
						to = ROOT
					}
				}

				save_event_target_as = transferred_artifact
			}
		}
	}

	option = {
		name = {
			text = EVTOPTA_MNM_9906
			trigger = { looting_artifact_event_religious_artifacts_trigger = no }
		}
		name = {
			text = EVTOPTC_MNM_9906
			trigger = { looting_artifact_event_religious_artifacts_trigger = yes }
		}

		trigger = {
			NOT = { has_character_flag = looted_artifact_destroy_duplicate }
		}

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				transfer_artifact = {
					from = FROM
					to = ROOT
				}
			}
		}
	}

	option = {
		name = {
			text = EVTOPTB_MNM_9906
			trigger = { looting_artifact_event_religious_artifacts_trigger = no }
		}
		name = {
			text = EVTOPTD_MNM_9906
			trigger = { looting_artifact_event_religious_artifacts_trigger = yes }
		}

		trigger = { has_character_flag = looted_artifact_destroy_duplicate }

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				destroy_artifact = yes
			}
		}

		FROM = {
			character_event = { id = MNM.9907 }
		}
	}
}

# Someone ransacked my holding and stole my artifact, great item
character_event = {
	id = MNM.9907
	picture = GFX_evt_relic_box
	border = GFX_event_normal_frame_war

	desc = {
		text = EVTDESC_MNM_9907_A
		trigger = {
			FROM = { NOT = { has_character_flag = looted_artifact_destroy_duplicate } }
		}
	}
	desc = {
		text = EVTDESC_MNM_9907_B
		trigger = {
			FROM = { has_character_flag = looted_artifact_destroy_duplicate }
		}
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTA_MNM_9907

		trigger = {
			FROM = { NOT = { has_character_flag = looted_artifact_destroy_duplicate } }
		}

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				transfer_artifact = {
					from = ROOT
					to = FROM
				}
			}
		}
	}

	option = {
		name = EVTOPTB_MNM_9907

		trigger = {
			FROM = { has_character_flag = looted_artifact_destroy_duplicate }
		}

		event_target:transferred_artifact = {
			show_scope_change = no

			destroy_artifact = yes
		}

		FROM = { clr_character_flag = looted_artifact_destroy_duplicate }
	}
}

# Ransack enemy holding and find artifact, great+ item
character_event = {
	id = MNM.9908
	picture = GFX_evt_relic_box
	border = GFX_event_normal_frame_war

	desc = {
		text = EVTDESC_MNM_9906_A
		trigger = {
			NOT = { has_character_flag = looted_artifact_destroy_duplicate }
			looting_artifact_event_religious_artifacts_trigger = no
		}
	}
	desc = {
		text = EVTDESC_MNM_9906_B
		trigger = {
			has_character_flag = looted_artifact_destroy_duplicate
			looting_artifact_event_religious_artifacts_trigger = no
		}
	}
	desc = {
		text = EVTDESC_MNM_9906_C
		trigger = {
			NOT = { has_character_flag = looted_artifact_destroy_duplicate }
			looting_artifact_event_religious_artifacts_trigger = yes
		}
	}
	desc = {
		text = EVTDESC_MNM_9906_D
		trigger = {
			has_character_flag = looted_artifact_destroy_duplicate
			looting_artifact_event_religious_artifacts_trigger = yes
		}
	}

	is_triggered_only = yes

	immediate = {
		FROM = {
			random_artifact = {
				limit = { quality == 4 }

				preferred_limit = {
					NOT = { artifact_type_owned_by = ROOT }
				}

				if = {
					limit = { artifact_type_owned_by = ROOT }
					ROOT = { set_character_flag = looted_artifact_destroy_duplicate }
				}
				else = {
					PREV = { character_event = { id = MNM.9909 } }

					transfer_artifact = {
						from = PREV
						to = ROOT
					}
				}

				save_event_target_as = transferred_artifact
			}
		}
	}

	option = {
		name = {
			text = EVTOPTA_MNM_9906
			trigger = { looting_artifact_event_religious_artifacts_trigger = no }
		}
		name = {
			text = EVTOPTC_MNM_9906
			trigger = { looting_artifact_event_religious_artifacts_trigger = yes }
		}

		trigger = {
			NOT = { has_character_flag = looted_artifact_destroy_duplicate }
		}

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				transfer_artifact = {
					from = FROM
					to = ROOT
				}
			}
		}
	}

	option = {
		name = {
			text = EVTOPTB_MNM_9906
			trigger = { looting_artifact_event_religious_artifacts_trigger = no }
		}
		name = {
			text = EVTOPTD_MNM_9906
			trigger = { looting_artifact_event_religious_artifacts_trigger = yes }
		}

		trigger = { has_character_flag = looted_artifact_destroy_duplicate }

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				destroy_artifact = yes
			}
		}

		FROM = {
			character_event = { id = MNM.9909 }
		}
	}
}

# Someone ransacked my holding and stole my artifact, great+ item
character_event = {
	id = MNM.9909
	picture = GFX_evt_relic_box
	border = GFX_event_normal_frame_war

	desc = {
		text = EVTDESC_MNM_9907_A
		trigger = {
			FROM = { NOT = { has_character_flag = looted_artifact_destroy_duplicate } }
		}
	}
	desc = {
		text = EVTDESC_MNM_9907_B
		trigger = {
			FROM = { has_character_flag = looted_artifact_destroy_duplicate }
		}
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTA_MNM_9907

		trigger = {
			FROM = { NOT = { has_character_flag = looted_artifact_destroy_duplicate } }
		}

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				transfer_artifact = {
					from = ROOT
					to = FROM
				}
			}
		}
	}

	option = {
		name = EVTOPTB_MNM_9907

		trigger = {
			FROM = { has_character_flag = looted_artifact_destroy_duplicate }
		}

		event_target:transferred_artifact = {
			show_scope_change = no

			destroy_artifact = yes
		}

		FROM = { clr_character_flag = looted_artifact_destroy_duplicate }
	}
}

# Ransack enemy holding and find artifact, amazing item
character_event = {
	id = MNM.9910
	picture = GFX_evt_relic_box
	border = GFX_event_normal_frame_war

	desc = {
		text = EVTDESC_MNM_9910_A
		trigger = {
			NOT = { has_character_flag = looted_artifact_destroy_duplicate }
			looting_artifact_event_religious_artifacts_trigger = no
		}
	}
	desc = {
		text = EVTDESC_MNM_9910_B
		trigger = {
			has_character_flag = looted_artifact_destroy_duplicate
			looting_artifact_event_religious_artifacts_trigger = no
		}
	}
	desc = {
		text = EVTDESC_MNM_9910_C
		trigger = {
			NOT = { has_character_flag = looted_artifact_destroy_duplicate }
			looting_artifact_event_religious_artifacts_trigger = yes
		}
	}
	desc = {
		text = EVTDESC_MNM_9910_D
		trigger = {
			has_character_flag = looted_artifact_destroy_duplicate
			looting_artifact_event_religious_artifacts_trigger = yes
		}
	}

	is_triggered_only = yes

	immediate = {
		FROM = {
			random_artifact = {
				limit = { quality == 5 }

				preferred_limit = {
					NOT = { artifact_type_owned_by = ROOT }
				}

				if = {
					limit = { artifact_type_owned_by = ROOT }
					ROOT = { set_character_flag = looted_artifact_destroy_duplicate }
				}
				else = {
					PREV = { character_event = { id = MNM.9911 } }

					transfer_artifact = {
						from = PREV
						to = ROOT
					}
				}

				save_event_target_as = transferred_artifact
			}
		}
	}

	option = {
		name = {
			text = EVTOPTA_MNM_9910
			trigger = { looting_artifact_event_religious_artifacts_trigger = no }
		}
		name = {
			text = EVTOPTC_MNM_9910
			trigger = { looting_artifact_event_religious_artifacts_trigger = yes }
		}

		trigger = {
			NOT = { has_character_flag = looted_artifact_destroy_duplicate }
		}

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				transfer_artifact = {
					from = FROM
					to = ROOT
				}
			}
		}
	}

	option = {
		name = {
			text = EVTOPTB_MNM_9910
			trigger = { looting_artifact_event_religious_artifacts_trigger = no }
		}
		name = {
			text = EVTOPTD_MNM_9910
			trigger = { looting_artifact_event_religious_artifacts_trigger = yes }
		}

		trigger = { has_character_flag = looted_artifact_destroy_duplicate }

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				destroy_artifact = yes
			}
		}

		FROM = {
			character_event = { id = MNM.9911 }
		}
	}
}

# Someone ransacked my holding and stole my artifact, amazing item
character_event = {
	id = MNM.9911
	picture = GFX_evt_relic_box
	border = GFX_event_normal_frame_war

	desc = {
		text = EVTDESC_MNM_9911_A
		trigger = {
			FROM = { NOT = { has_character_flag = looted_artifact_destroy_duplicate } }
		}
	}
	desc = {
		text = EVTDESC_MNM_9911_B
		trigger = {
			FROM = { has_character_flag = looted_artifact_destroy_duplicate }
		}
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTA_MNM_9911

		trigger = {
			FROM = { NOT = { has_character_flag = looted_artifact_destroy_duplicate } }
		}

		tooltip = {
			event_target:transferred_artifact = {
				show_scope_change = no

				transfer_artifact = {
					from = ROOT
					to = FROM
				}
			}
		}
	}

	option = {
		name = EVTOPTB_MNM_9911

		trigger = {
			FROM = { has_character_flag = looted_artifact_destroy_duplicate }
		}

		event_target:transferred_artifact = {
			show_scope_change = no

			destroy_artifact = yes
		}

		FROM = { clr_character_flag = looted_artifact_destroy_duplicate }
	}
}