#########################################################
#
# Way of Life - New Lover Events
#
# Written by Henrik FÃ¥hraeus
#
# ID Range: WoL.1000 to WoL.1999
#
#########################################################

namespace = WoL

##########################################
# SPOUSE SUSPECTS REAL LOVE AFFAIR
##########################################

# Spouse suspected of affair - Choices
character_event = {
	id = WoL.1003
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESC_WOL_1003
		trigger = {
			NOR = {
				event_target:cheating_spouse = {
					is_close_relative = event_target:adulterer
				}

				has_character_flag = tipped_off_about_spouse_affair
				# has_character_flag = spy_spouse_affair
			}
		}
	}
	desc = {
		text = EVTDESC_WOL_1003_CR
		trigger = {
			event_target:cheating_spouse = {
				is_close_relative = event_target:adulterer
			}

			NOR = {
				has_character_flag = tipped_off_about_spouse_affair
				# has_character_flag = spy_spouse_affair
			}
		}
	}
	desc = {
		text = EVTDESC_WOL_1003_TIP
		trigger = { has_character_flag = tipped_off_about_spouse_affair }
	}
	# desc = {
	# 	text = EVTDESC_WOL_1003_SPY_RESULT
	# 	trigger = { has_character_flag = spy_spouse_affair }
	# }

	is_triggered_only = yes # on_yearly_pulse, random_events, wol_lover_events

	is_married = yes
	min_age = 16
	has_dlc = "Way of Life"
	only_capable = yes
	prisoner = no

	trigger = {
		in_command_trigger = no
		is_inaccessible_trigger = no

		# trigger_if = {
		# 	limit = { is_female = yes }
		# 	has_polygamy = no
		# }

		NOR = {
			trait = imbecile
			trait = inbred
			trait = infirm
		}

		any_spouse = {
			any_lover = {
				prisoner = no

				NOR = {
					character = ROOT
					is_consort = PREV
					is_married = PREV
					has_character_modifier = wol_court_tomcat
					has_character_modifier = wol_court_vixen
				}
			}

			is_inaccessible_or_incapable_trigger = no

			NOR = {
				trait = infirm
				has_character_modifier = wol_court_tomcat
				has_character_modifier = wol_court_vixen

				reverse_has_opinion_modifier = {
					name = opinion_cuckolded
					who = ROOT
				}

				reverse_has_opinion_modifier = {
					name = opinion_cuckolded_private
					who = ROOT
				}

				reverse_has_opinion_modifier = {
					name = slut_seductress
					who = ROOT
				}
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 4
			trait = paranoid
		}

		mult_modifier = {
			factor = 4
			trait = genius
		}

		mult_modifier = {
			factor = 2
			trait = master_schemer
		}

		mult_modifier = {
			factor = 2

			OR = {
				trait = quick
				trait = shrewd
			}
		}

		mult_modifier = {
			factor = 4
			has_focus = focus_intrigue
		}

		mult_modifier = {
			factor = 1.33
			trait = envious
		}

		mult_modifier = {
			factor = 1.33
			trait = ambitious
		}

		mult_modifier = {
			factor = 1.33
			trait = just
		}

		mult_modifier = {
			factor = 0.5
			trait = arbitrary
		}

		mult_modifier = {
			factor = 1.33
			trait = content
		}

		mult_modifier = {
			factor = 0.33

			OR = {
				trait = slow
				trait = dull
			}
		}

		mult_modifier = {
			factor = 0.2
			trait = trusting
		}
	}

	immediate = {
		# Event may be fired elsewhere, so these event targets may already be set
		if = {
			limit = {
				NAND = {
					event_target:cheating_spouse = { always = yes }
					event_target:adulterer = { always = yes }
				}
			}

			random_spouse = {
				limit = {
					any_lover = {
						prisoner = no

						NOR = {
							character = ROOT
							is_consort = PREV
							has_character_modifier = wol_court_tomcat
							has_character_modifier = wol_court_vixen
						}
					}

					is_inaccessible_or_incapable_trigger = no

					NOR = {
						trait = infirm
						has_character_modifier = wol_court_tomcat
						has_character_modifier = wol_court_vixen

						reverse_has_opinion_modifier = {
							name = opinion_cuckolded
							who = ROOT
						}

						reverse_has_opinion_modifier = {
							name = opinion_cuckolded_private
							who = ROOT
						}

						reverse_has_opinion_modifier = {
							name = slut_seductress
							who = ROOT
						}
					}
				}

				save_event_target_as = cheating_spouse

				random_lover = {
					limit = {
						prisoner = no

						NOR = {
							character = ROOT
							is_consort = PREV
							is_married = PREV
							has_character_modifier = wol_court_tomcat
							has_character_modifier = wol_court_vixen
						}
					}

					save_event_target_as = adulterer
				}
			}
		}

		# For insult localisation
		save_event_target_as = event_target_1_insulter

		# For relation localisation
		event_target:cheating_spouse = {
			save_event_target_as = event_target_1
		}

		character_event = {
			id = WoL.2000 # Chance of levelling up Intrigue skills
			days = 1
		}

		if = {
			limit = { has_character_flag = tipped_off_about_spouse_affair }

			event_target:accuser = {
				character_event = {
					id = WoL.1025
					days = 3
				}
			}
		}

		# Override investigating spouse from previous instance of this event chain
		save_event_target_as = accuser
	}

	option = {
		name = EVTOPTA_WOL_1003 # Confront Spouse

		event_target:cheating_spouse = {
			character_event = {
				id = WoL.1004
				days = 2
				portrait = yes
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2
				trait = honest
			}
		}
	}

	option = {
		name = {
			text = EVTOPTB_WOL_1003_F # Confront the Lover
			trigger = { event_target:adulterer = { is_female = yes } }
		}
		name = {
			text = EVTOPTB_WOL_1003_M # Confront the Lover
			trigger = { event_target:adulterer = { is_female = no } }
		}

		event_target:adulterer = {
			character_event = {
				id = WoL.1033
				days = 2
				portrait = yes
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2
				trait = deceitful
			}

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value >= 50
				}
			}

			mult_modifier = {
				factor = 3
				is_lover = event_target:cheating_spouse
			}
		}
	}

	option = {
		name = EVTOPTC_WOL_1003_HOMO_F # Two women? Who cares...

		trigger = {
			event_target:adulterer = {
				is_female = yes
				same_sex = event_target:cheating_spouse
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTC_WOL_1003 # Focus on more important matters

		trigger = {
			OR = {
				event_target:adulterer = { is_female = no }
				event_target:cheating_spouse = { is_female = no }
			}
		}

		if = {
			limit = {
				NOT = { trait = arbitrary }
			}

			random = {
				chance = 20
				add_trait_depressed_effect = yes
			}
		}

		ai_chance = {
			factor = 1

			mult_modifier = {
				factor = 500
				trait = craven
			}
		}
	}

	after = {
		clr_character_flag = tipped_off_about_spouse_affair
		# clr_character_flag = spy_spouse_affair
		clear_event_target = event_target_1_insulter
		clear_event_target = event_target_1
	}
}

# Spouse is confronted
character_event = {
	id = WoL.1004
	desc = EVTDESC_WOL_1004
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = EVTOPTA_WOL_1004 # Confess and ask forgiveness (break up with lover)

		event_target:adulterer = {
			show_scope_change = no

			character_event = {
				id = WoL.1005 # Lover notified
				tooltip = EVTTOOLTIP_WoL_1005
			}
		}

		remove_lover = event_target:adulterer

		event_target:accuser = {
			show_scope_change = no

			character_event = {
				id = WoL.1006
				days = 2
				tooltip = EVTTOOLTIP_WoL_1006
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 3
				is_lover = event_target:accuser
			}

			mult_modifier = {
				factor = 5
				trait = honest
			}

			mult_modifier = {
				factor = 2
				trait = craven
			}

			mult_modifier = {
				factor = 2
				trait = just
			}

			mult_modifier = {
				factor = 0.5

				personal_opinion = {
					who = event_target:accuser
					value < 0
				}
			}

			mult_modifier = {
				factor = 0.25

				personal_opinion = {
					who = event_target:accuser
					value < -50
				}
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1004 # Cruelly admit

		event_target:accuser = {
			show_scope_change = no

			character_event = {
				id = WoL.1009
				days = 2
				tooltip = EVTTOOLTIP_WoL_1009
			}
		}

		ai_chance = {
			factor = 100

			trigger = {
				NOT = { is_close_relative = event_target:adulterer }
			}

			mult_modifier = {
				factor = 2
				trait = arbitrary
			}

			mult_modifier = {
				factor = 5
				trait = cruel
			}
		}
	}

	option = {
		name = EVTOPTC_WOL_1004 # Lie and deny

		event_target:accuser = {
			show_scope_change = no

			character_event = {
				id = WoL.1022
				days = 2
				tooltip = EVTTOOLTIP_WoL_1022
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 5
				trait = deceitful
			}
		}
	}

	option = {
		name = EVTOPTD_WOL_1004 # Skillfully manipulate (high intrigue)
		tooltip_info = intrigue

		trigger = {
			attribute_diff = {
				attribute = intrigue
				character = FROM
				value >= 5
			}

			event_target:accuser = {
				NOT = { has_focus = focus_intrigue }
			}
		}

		event_target:accuser = {
			show_scope_change = no

			character_event = {
				id = WoL.1010
				days = 2
				tooltip = EVTTOOLTIP_WoL_1010
			}
		}

		ai_chance = { factor = 10000 }
	}
}

# Lover is told of break-up
character_event = {
	id = WoL.1005
	desc = EVTDESC_WOL_1005
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	ai = no

	immediate = {
		# For relation localisation
		event_target:cheating_spouse = {
			save_event_target_as = event_target_1
		}
	}

	option = {
		name = {
			text = EVTOPTA_WOL_1005_M
			trigger = {
				event_target:accuser = { is_female = no }
			}
		}
		name = {
			text = EVTOPTA_WOL_1005_F
			trigger = {
				event_target:accuser = { is_female = yes }
			}
		}

		show_portrait = event_target:accuser
	}
}

# The spouse responds to the tearful confession
character_event = {
	id = WoL.1006
	desc = EVTDESC_WOL_1006
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = EVTOPTA_WOL_1006 # Forgive and move on

		opinion = {
			name = opinion_unfaithful_private
			who = event_target:cheating_spouse
			years = 2
		}

		if = {
			limit = { same_sex = event_target:adulterer }

			if = {
				limit = { is_female = yes }

				opinion = {
					name = slut_seductress
					who = event_target:adulterer
					years = 10
				}
			}
			else = {
				opinion = {
					name = opinion_cuckolded_private
					who = event_target:adulterer
					years = 20
				}
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value >= 50
				}
			}

			mult_modifier = {
				factor = 1.5
				trait = patient
			}

			mult_modifier = {
				factor = 1.5
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = craven
			}

			mult_modifier = {
				factor = 3
				trait = kind
			}

			mult_modifier = {
				factor = 3
				is_lover = event_target:cheating_spouse
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1006 # Denounce them both (scandal)

		if = {
			limit = {
				event_target:cheating_spouse = { is_female = yes }
			}

			opinion = {
				name = opinion_unfaithful_wife
				who = event_target:cheating_spouse
				years = 10
			}
		}
		else = {
			if = {
				limit = { gender_equality_trigger = no }

				opinion = {
					name = opinion_unfaithful_husband
					who = event_target:cheating_spouse
					years = 10
				}
			}
			else = {
				opinion = {
					name = opinion_unfaithful_husband_crime
					who = event_target:cheating_spouse
					years = 10
				}
			}
		}

		if = {
			limit = { same_sex = event_target:adulterer }

			if = {
				limit = { is_female = yes }

				opinion = {
					name = slut_seductress
					who = event_target:adulterer
					years = 10
				}
			}
			else = {
				opinion = {
					name = opinion_cuckolded
					who = event_target:adulterer
					years = 10
				}
			}
		}

		if = {
			limit = { is_lover = event_target:cheating_spouse }
			remove_lover = event_target:cheating_spouse
		}

		event_target:adulterer = {
			character_event = { id = WoL.1007 }
			save_event_target_as = target_adulterer # For event 20
		}

		event_target:cheating_spouse = {
			character_event = { id = WoL.1008 }
			character_event = { id = 20 } # Adultery fallout
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.2

				is_ruler = no
				event_target:cheating_spouse = { is_ruler = yes }
				NOT = { trait = arbitrary }
			}

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value < 0
				}
			}

			mult_modifier = {
				factor = 2
				trait = wroth
			}

			mult_modifier = {
				factor = 1.5
				trait = proud
			}

			mult_modifier = {
				factor = 1.5
				trait = brave
			}

			mult_modifier = {
				factor = 3
				trait = cruel
			}
		}
	}
}

# Lover is told of public denouncement
# Accuser in FROM scope
# Cheating spouse in FROMFROM
character_event = {
	id = WoL.1007
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESC_WOL_1007
		trigger = {
			NOR = {
				has_character_flag = wol_denounced_after_lover_admission
				has_character_flag = wol_denounced_after_spying
			}
		}
	}
	desc = {
		text = EVTDESC_WOL_1007_LOVER_ADM
		trigger = { has_character_flag = wol_denounced_after_lover_admission }
	}
	desc = {
		text = EVTDESC_WOL_1007_SPYING
		trigger = { has_character_flag = wol_denounced_after_spying }
	}

	is_triggered_only = yes

	immediate = {
		# For relation localisation
		event_target:cheating_spouse = {
			save_event_target_as = event_target_1 # EVTDESC_WOL_1007
		}

		event_target:accuser = {
			save_event_target_as = event_target_2 # EVTDESC_WOL_1007_LOVER_ADM, EVTDESC_WOL_1007_SPYING
		}

		# For insult localisation
		event_target:cheating_spouse = {
			save_event_target_as = event_target_1_insulter
		}
	}

	option = {
		name = {
			text = EVTOPTA21006 # I am doomed!
			trigger = { is_vassal_or_below_of = event_target:accuser }
		}
		name = {
			text = EVTOPTB21006 # Damn!
			trigger = { NOT = { is_vassal_or_below_of = event_target:accuser } }
		}

		clr_character_flag = wol_denounced_after_lover_admission
		clr_character_flag = wol_denounced_after_spying
	}
}

# Spouse is told of public denouncement
# Accuser in FROM scope
# Lover in FROMFROMFROMFROM
character_event = {
	id = WoL.1008
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESC_WOL_1008
		trigger = { NOT = { has_character_flag = wol_denounced_after_cruel_admission } }
	}
	desc = {
		text = EVTDESC_WOL_1008_CRUEL
		trigger = { has_character_flag = wol_denounced_after_cruel_admission }
	}

	is_triggered_only = yes

	option = {
		name = {
			text = EVTOPTA21006 # I am doomed!
			trigger = { is_vassal_or_below_of = event_target:accuser }
		}
		name = {
			text = EVTOPTB21006 # Damn!
			trigger = { NOT = { is_vassal_or_below_of = event_target:accuser } }
		}

		clr_character_flag = wol_denounced_after_cruel_admission
	}
}

# The spouse responds to the cruel admission
character_event = {
	id = WoL.1009
	desc = EVTDESC_WOL_1009
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = {
			text = EVTOPTA_WOL_1009_M # Forgive and move on
			trigger = { is_female = no }
		}
		name = {
			text = EVTOPTA_WOL_1009_F # Forgive and move on
			trigger = { is_female = yes }
		}

		if = {
			limit = {
				NOT = { trait = depressed }
			}

			random = {
				chance = 20
				add_trait_depressed_effect = yes
			}
		}

		opinion = {
			name = opinion_unfaithful_private
			who = event_target:cheating_spouse
			years = 2
		}

		add_rival = event_target:adulterer

		if = {
			limit = { same_sex = event_target:adulterer }

			if = {
				limit = { is_female = yes }

				opinion = {
					name = slut_seductress
					who = event_target:adulterer
					years = 10
				}
			}
			else = {
				opinion = {
					name = opinion_cuckolded_private
					who = event_target:adulterer
					years = 20
				}
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value >= 50
				}
			}

			mult_modifier = {
				factor = 1.5
				trait = patient
			}

			mult_modifier = {
				factor = 1.5
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = craven
			}

			mult_modifier = {
				factor = 3
				trait = kind
			}

			mult_modifier = {
				factor = 3
				is_lover = event_target:cheating_spouse
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1009 # Denounce them both (scandal)

		if = {
			limit = {
				event_target:cheating_spouse = { is_female = yes }
			}

			opinion = {
				name = opinion_unfaithful_wife
				who = event_target:cheating_spouse
				years = 10
			}
		}
		else = {
			if = {
				limit = { gender_equality_trigger = no }

				opinion = {
					name = opinion_unfaithful_husband
					who = event_target:cheating_spouse
					years = 10
				}
			}
			else = {
				opinion = {
					name = opinion_unfaithful_husband_crime
					who = event_target:cheating_spouse
					years = 10
				}
			}
		}

		if = {
			limit = { same_sex = event_target:adulterer }

			if = {
				limit = { is_female = yes }

				opinion = {
					name = slut_seductress
					who = event_target:adulterer
					years = 10
				}
			}
			else = {
				opinion = {
					name = opinion_cuckolded
					who = event_target:adulterer
					years = 10
				}
			}
		}

		if = {
			limit = { is_lover = event_target:cheating_spouse }
			remove_lover = event_target:cheating_spouse
		}

		event_target:adulterer = {
			character_event = { id = WoL.1007 }
		}

		event_target:cheating_spouse = {
			set_character_flag = wol_denounced_after_cruel_admission
			character_event = { id = WoL.1008 }
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.2

				is_ruler = no
				event_target:cheating_spouse = { is_ruler = yes }
				NOT = { trait = arbitrary }
			}

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value < 0
				}
			}

			mult_modifier = {
				factor = 2
				trait = wroth
			}

			mult_modifier = {
				factor = 1.5
				trait = proud
			}

			mult_modifier = {
				factor = 1.5
				trait = brave
			}

			mult_modifier = {
				factor = 3
				trait = cruel
			}
		}
	}
}

# The spouse denies the affair
character_event = {
	id = WoL.1022
	desc = EVTDESC_WOL_1022
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = EVTOPTA_WOL_1022 # Very well...

		if = {
			limit = { trait = trusting }

			random = {
				chance = 20
				remove_trait_trusting_effect = yes
			}
		}
		else = {
			opinion = {
				name = opinion_suspected_adultery
				who = event_target:cheating_spouse
				years = 2
			}

			opinion = {
				name = opinion_chasing_spouse
				who = event_target:adulterer
				years = 2
			}

			if = {
				limit = {
					NOT = { trait = arbitrary }
				}

				random = {
					chance = 20
					add_trait_depressed_effect = yes
				}
			}

			random = {
				chance = 10
				add_trait_paranoid_effect = yes
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.1
				trait = paranoid
			}

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value >= 50
				}
			}

			mult_modifier = {
				factor = 1.5
				trait = patient
			}

			mult_modifier = {
				factor = 1.5
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = craven
			}

			mult_modifier = {
				factor = 3
				trait = kind
			}

			mult_modifier = {
				factor = 3
				is_lover = event_target:cheating_spouse
			}

			mult_modifier = {
				factor = 10
				trait = trusting
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1022 # The lover is married too... Tip off his/her spouse.

		trigger = {
			event_target:adulterer = { is_married = yes }
		}

		event_target:adulterer = {
			show_scope_change = no

			spouse = {
				show_scope_change = no

				set_character_flag = tipped_off_about_spouse_affair

				character_event = {
					id = WoL.1003 # Start this event chain for the lover's spouse
					days = 8
					tooltip = EVTTOOLTIP_WoL_1023
				}
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.1
				trait = imbecile
			}

			mult_modifier = {
				factor = 0.5

				OR = {
					trait = slow
					trait = dull
				}
			}

			mult_modifier = {
				factor = 1.5
				trait = patient
			}

			mult_modifier = {
				factor = 1.5
				trait = gregarious
			}

			mult_modifier = {
				factor = 2.5

				OR = {
					trait = quick
					trait = shrewd
				}
			}

			mult_modifier = {
				factor = 5
				trait = genius
			}
		}
	}

	option = {
		name = EVTOPTC_WOL_1022 # Pay to have them both watched

		trigger = { wealth >= 10 }

		event_target:adulterer = {
			character_event = {
				id = WoL.1026
				days = 30
				random = 30
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.1
				trait = imbecile
			}

			mult_modifier = {
				factor = 0.2
				trait = greedy
			}

			mult_modifier = {
				factor = 0.5

				OR = {
					trait = slow
					trait = dull
				}
			}

			mult_modifier = {
				factor = 1.5
				trait = envious
			}

			mult_modifier = {
				factor = 2.5
				trait = deceitful
			}

			mult_modifier = {
				factor = 10
				trait = paranoid
			}
		}
	}
}

# Response from the other spouse
character_event = {
	id = WoL.1025
	desc = EVTDESC_WOL_1025
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_WOL_1025
	}
}

# Lover: The accuser's spies are investigating
character_event = {
	id = WoL.1026

	is_triggered_only = yes
	hide_window = yes

	option = {
#		name = OK # Success!

		trigger = { is_lover = event_target:cheating_spouse }

		event_target:accuser = {
			character_event = { id = WoL.1028 }
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.5
				event_target:accuser = { intrigue < 2 }
			}

			mult_modifier = {
				factor = 0.5
				event_target:accuser = { intrigue < 5 }
			}

			mult_modifier = {
				factor = 2
				event_target:accuser = { intrigue >= 10}
			}

			mult_modifier = {
				factor = 3
				event_target:accuser = { intrigue >= 15 }
			}

			mult_modifier = {
				factor = 1.5
				event_target:accuser = { trait = deceitful }
			}

			mult_modifier = {
				factor = 2
				event_target:accuser = { trait = master_schemer }
			}

			mult_modifier = {
				factor = 2

				event_target:accuser = {
					any_courtier = {
						has_opinion_modifier = {
							name = opinion_chasing_friend
							who = ROOT
						}
					}
				}
			}

			mult_modifier = {
				factor = 2

				event_target:accuser = {
					any_courtier = {
						has_opinion_modifier = {
							name = opinion_chasing_spouse
							who = ROOT
						}
					}
				}
			}

			mult_modifier = {
				factor = 2

				event_target:accuser = {
					any_courtier = {
						has_opinion_modifier = {
							name = opinion_chasing_child
							who = ROOT
						}
					}
				}
			}

			mult_modifier = {
				factor = 2
				event_target:accuser = { has_focus = focus_intrigue }
			}
		}
	}

	option = {
#		name = OK # Failure

		event_target:accuser = {
			character_event = { id = WoL.1027 }
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.5
				intrigue < 2
			}

			mult_modifier = {
				factor = 0.5
				intrigue < 5
			}

			mult_modifier = {
				factor = 2
				intrigue >= 10
			}

			mult_modifier = {
				factor = 3
				intrigue >= 15
			}

			mult_modifier = {
				factor = 1.5
				trait = deceitful
			}

			mult_modifier = {
				factor = 1.5
				trait = master_seducer
			}

			mult_modifier = {
				factor = 2
				trait = master_schemer
			}

			mult_modifier = {
				factor = 5

				OR = {
					has_character_modifier = wol_court_vixen
					has_character_modifier = wol_court_tomcat
				}
			}

			mult_modifier = {
				factor = 5

				event_target:cheating_spouse = {
					OR = {
						has_character_modifier = wol_court_vixen
						has_character_modifier = wol_court_tomcat
					}
				}
			}

			mult_modifier = {
				factor = 2

				OR = {
					has_focus = focus_intrigue
					event_target:cheating_spouse = { has_focus = focus_intrigue }
				}
			}
		}
	}
}

# Spying failed
character_event = {
	id = WoL.1027
	desc = EVTDESC_WOL_1027
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA21010 # That's a relief!
	}
}

# Spying succeeded
character_event = {
	id = WoL.1028
	desc = EVTDESC_WOL_1028
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = EVTOPTA_WOL_1028 # Don't want a scandal

		opinion = {
			name = opinion_unfaithful_private
			who = event_target:cheating_spouse
			years = 2
		}

		add_rival = event_target:adulterer

		if = {
			limit = { same_sex = event_target:adulterer }

			if = {
				limit = { is_female = yes }

				opinion = {
					name = slut_seductress
					who = event_target:adulterer
					years = 10
				}
			}
			else = {
				opinion = {
					name = opinion_cuckolded_private
					who = event_target:adulterer
					years = 20
				}
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value >= 50
				}
			}

			mult_modifier = {
				factor = 1.5
				trait = patient
			}

			mult_modifier = {
				factor = 1.5
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = craven
			}

			mult_modifier = {
				factor = 3
				trait = kind
			}

			mult_modifier = {
				factor = 3
				is_lover = event_target:cheating_spouse
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1028 # Denounce them both (scandal)

		if = {
			limit = {
				event_target:cheating_spouse = { is_female = yes }
			}

			opinion = {
				name = opinion_unfaithful_wife
				who = event_target:cheating_spouse
				years = 10
			}
		}
		else = {
			if = {
				limit = { gender_equality_trigger = no }

				opinion = {
					name = opinion_unfaithful_husband
					who = event_target:cheating_spouse
					years = 10
				}
			}
			else = {
				opinion = {
					name = opinion_unfaithful_husband_crime
					who = event_target:cheating_spouse
					years = 10
				}
			}
		}

		if = {
			limit = { same_sex = event_target:adulterer }

			if = {
				limit = { is_female = yes }

				opinion = {
					name = slut_seductress
					who = event_target:adulterer
					years = 10
				}
			}
			else = {
				opinion = {
					name = opinion_cuckolded
					who = event_target:adulterer
					years = 10
				}
			}
		}

		if = {
			limit = { is_lover = event_target:cheating_spouse }
			remove_lover = event_target:cheating_spouse
		}

		event_target:adulterer = {
			set_character_flag = wol_denounced_after_spying
			character_event = { id = WoL.1007 }
			save_event_target_as = target_adulterer # For event 20
		}

		event_target:cheating_spouse = {
			character_event = { id = WoL.1031 }
			character_event = { id = 20 } # Adultery fallout
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.2

				is_ruler = no
				event_target:cheating_spouse = { is_ruler = yes }
				NOT = { trait = arbitrary }
			}

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value < 0
				}
			}

			mult_modifier = {
				factor = 2
				trait = wroth
			}

			mult_modifier = {
				factor = 1.5
				trait = proud
			}

			mult_modifier = {
				factor = 1.5
				trait = brave
			}

			mult_modifier = {
				factor = 3
				trait = cruel
			}
		}
	}
}

# Spouse is told of public denouncement after spies uncovered the affair
# Accuser in FROM scope
# Lover in FROMFROM
character_event = {
	id = WoL.1031
	desc = EVTDESC_WOL_1031
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = {
			text = EVTOPTA21006 # I am doomed!
			trigger = { is_vassal_or_below_of = FROM }
		}
		name = {
			text = EVTOPTB21006 # Damn!
			trigger = { NOT = { is_vassal_or_below_of = FROM } }
		}

		clr_character_flag = wol_denounced_after_cruel_admission
	}
}

# The accuser is manipulated
character_event = {
	id = WoL.1010
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESC_WOL_1010_M
		trigger = { is_female = yes }
	}
	desc = {
		text = EVTDESC_WOL_1010_F
		trigger = { is_female = no }
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTA21015 # Now I feel guilty...

		opinion = {
			name = opinion_regrets_accusation
			who = event_target:cheating_spouse
			years = 3
		}

		random = {
			chance = 20
			add_trait_partially_trusting_effect = yes
		}
	}
}

# The lover is confronted directly
character_event = {
	id = WoL.1033
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESC_WOL_1033
		trigger = { same_realm = event_target:accuser }
	}
	desc = {
		text = EVTDESC_WOL_1033_DISTANT
		trigger = { NOT = { same_realm = event_target:accuser } }
	}

	is_triggered_only = yes

	immediate = {
		# For insult localisation
		save_event_target_as = event_target_1_insulter

		# For relation localisation
		event_target:cheating_spouse = {
			save_event_target_as = event_target_1
		}
	}

	option = {
		name = EVTOPTA_WOL_1033 # Deny affair

		if = {
			limit = { same_realm = event_target:accuser }

			event_target:accuser = {
				character_event = {
					id = WoL.1012
					days = 2
				}
			}
		}
		else = {
			event_target:accuser = {
				character_event = {
					id = WoL.1012
					days = 14
				}
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value >= 50
				}
			}

			mult_modifier = {
				factor = 4
				trait = brave
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1033 # Admit

		remove_lover = event_target:cheating_spouse

		event_target:cheating_spouse = {
			character_event = {
				id = WoL.1019
				days = 2
			}
		}

		event_target:accuser = {
			character_event = {
				id = WoL.1020
				days = 2
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value < 0
				}
			}

			mult_modifier = {
				factor = 4
				trait = craven
			}
		}
	}

	option = { # Fly into a rage and physically assault
		name = {
			text = EVTOPTC_WOL_1033_F
			trigger = { is_female = yes }
		}
		name = {
			text = EVTOPTC_WOL_1033_M
			trigger = { is_female = no }
		}

		trigger = {
			same_realm = FROM
			same_sex = FROM
		}

		random_list = {
			1 = { add_trait_wounded_effect = yes }

			1 = {
				add_scarred_tiered_effect = yes
				character_event = { id = 38308 } # Notify
			}

			1 = { }
		}

		custom_tooltip = {
			text = EVTTOOLTIP_WoL_1011_ATTACK

			event_target:accuser = {
				set_character_flag = wol_lover_assaults
			}

			event_target:adulterer = {
				character_event = {
					id = WoL.1012
					days = 2
				}
			}
		}

		ai_chance = {
			factor = 10

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value >= 50
				}
			}

			mult_modifier = {
				factor = 4
				trait = brave
			}

			mult_modifier = {
				factor = 10
				trait = wroth
			}

			mult_modifier = {
				factor = 3
				trait = lunatic
			}

			mult_modifier = {
				factor = 3
				trait = possessed
			}
		}
	}
}

# The lover denies the affair
character_event = {
	id = WoL.1012
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESC_WOL_1012
		trigger = { NOT = { has_character_flag = wol_lover_assaults } }
	}
	desc = {
		text = EVTDESC_WOL_1012_ATTACKED
		trigger = { has_character_flag = wol_lover_assaults }
	}

	is_triggered_only = yes
	show_from_from = yes

	immediate = {
		if = {
			limit = { has_character_flag = wol_lover_assaults }

			random_list = {
				1 = { add_trait_wounded_effect = yes }

				1 = {
					add_scarred_tiered_effect = yes
					character_event = { id = 38308 days = 1 } # Notify
				}

				1 = { }
			}
		}
	}

	option = {
		name = {
			text = EVTOPTA_WOL_1012 # Very well...
			trigger = { NOT = { has_character_flag = wol_lover_assaults } }
		}
		name = {
			text = EVTOPTA_WOL_1012_ATTACKED # Such fury must signal innocence
			trigger = { has_character_flag = wol_lover_assaults }
		}

		clr_character_flag = wol_lover_assaults

		if = {
			limit = { trait = trusting }

			random = {
				chance = 20
				remove_trait_trusting_effect = yes
			}
		}
		else = {
			opinion = {
				name = opinion_suspected_adultery
				who = event_target:cheating_spouse
				years = 2
			}

			opinion = {
				name = opinion_chasing_spouse
				who = event_target:adulterer
				years = 2
			}

			if = {
				limit = {
					NOT = { trait = arbitrary }
				}

				random = {
					chance = 20
					add_trait_depressed_effect = yes
				}
			}

			random = {
				chance = 10
				add_trait_paranoid_effect = yes
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.25
				trait = paranoid
			}

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value >= 50
				}
			}

			mult_modifier = {
				factor = 1.5
				trait = patient
			}

			mult_modifier = {
				factor = 1.5
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = craven
			}

			mult_modifier = {
				factor = 3
				trait = kind
			}

			mult_modifier = {
				factor = 3
				is_lover = event_target:cheating_spouse
			}

			mult_modifier = {
				factor = 5
				trait = trusting
			}
		}
	}

	option = {
		name = EVTOPTC_WOL_1022 # Pay to have them both watched

		trigger = { wealth >= 10 }

		clr_character_flag = wol_lover_assaults

		event_target:adulterer = {
			character_event = {
				id = WoL.1026
				days = 30
				random = 30
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.1
				trait = imbecile
			}

			mult_modifier = {
				factor = 0.2
				trait = greedy
			}

			mult_modifier = {
				factor = 0.5

				OR = {
					trait = slow
					trait = dull
				}
			}

			mult_modifier = {
				factor = 1.5
				trait = envious
			}

			mult_modifier = {
				factor = 2.5
				trait = deceitful
			}

			mult_modifier = {
				factor = 10
				trait = paranoid
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1012 # A little drop of poison...
		tooltip_info = intrigue

		trigger = {
			attribute_diff = {
				attribute = intrigue
				character = event_target:adulterer
				value >= 5
			}

			event_target:adulterer = {
				NOT = { has_focus = focus_intrigue }
			}
		}

		clr_character_flag = wol_lover_assaults

		hidden_effect = {
			event_target:adulterer = {
				random_list = {
					33 = { # Dies
						character_event = {
							id = WoL.1014
							days = 30
							random = 30
						}
					}

					34 = { # Gets sick
						character_event = {
							id = WoL.1015
							days = 30
							random = 30
						}
					}

					33 = { # Lives
						ROOT = {
							character_event = {
								id = WoL.1016
								days = 30
								random = 30
							}
						}
					}
				}
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.25
				trait = kind
			}

			mult_modifier = {
				factor = 2
				trait = deceitful
			}

			mult_modifier = {
				factor = 3
				trait = cruel
			}
		}
	}

	option = {
		name = EVTOPTC_WOL_1012_DUEL # Challenge to a duel

		trigger = {
			trigger_if = {
				limit = { is_female = yes }

				OR = {
					trait = martial_lady
					trait = martial_lady_tengri
					trait = martial_lady_pagan
				}
			}

			practical_age < 60
			combat_rating >= 0

			event_target:adulterer = {
				# is_female = no
				practical_age < 60
				combat_rating >= -50
				is_ill = no
			}

			OR = {
				trait = wroth
				trait = duelist
				trait = berserker
				trait = brave
				is_strong_trigger = yes
			}
		}

		clr_character_flag = wol_lover_assaults

		event_target:adulterer = {
			show_scope_change = no

			character_event = {
				id = WoL.1032
				days = 2
				tooltip = EVTTOOLTIP_WoL_1032
			}
		}

		ai_chance = {
			factor = 1000

			mult_modifier = {
				factor = 0.01
				trait = craven
			}

			mult_modifier = {
				factor = 2
				trait = brave
			}
		}
	}
}

# The lover dies of poison
character_event = {
	id = WoL.1014
	desc = EVTDESC_WOL_1014
	picture = GFX_evt_death # GFX_evt_feast
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	immediate = {
		event_target:accuser = {
			character_event = { id = WoL.1017 }
		}

		if = {
			limit = { multiplayer = yes }

			death = {
				death_reason = death_murder_unknown_poison
				killer = event_target:accuser
			}
		}
	}

	option = {
		name = EVTOPTA_WOL_1014

		if = {
			limit = { multiplayer = yes }

			tooltip = {
				death = {
					death_reason = death_murder_unknown_poison
					killer = event_target:accuser
				}
			}
		}
		else = {
			death = {
				death_reason = death_murder_unknown_poison
				killer = event_target:accuser
			}
		}
	}
}

# The lover gets sick of poison
character_event = {
	id = WoL.1015
	desc = EVTDESC_WOL_1015
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	immediate = {
		event_target:accuser = {
			character_event = { id = WoL.1018 }
		}
	}

	option = {
		name = EVTOPTA_WOL_1015

		if = {
			limit = { has_dlc = "Reapers" }

			set_character_flag = disease_not_serious
			add_trait = vomiting

			character_event = {
				id = RIP.11005
				days = 10
				random = 30
			}
		}
		else = {
			add_trait = ill
		}
	}
}

# The lover did not have the poisoned shellfish
character_event = {
	id = WoL.1016
	desc = EVTDESC_WOL_1016
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = EVTOPTA_WOL_1016

		random = {
			chance = 20
			add_trait_fully_cruel_effect = yes
		}
	}
}

# The lover died of poison
character_event = {
	id = WoL.1017
	desc = EVTDESC_WOL_1017
	picture = GFX_evt_death
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = EVTOPTA_WOL_1017

		random = {
			chance = 20
			add_trait_fully_cruel_effect = yes
		}
	}
}

# The lover got sick from the poison
character_event = {
	id = WoL.1018
	desc = EVTDESC_WOL_1018
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_WOL_1018
	}
}

# Cheating spouse. Lover admits the affair.
character_event = {
	id = WoL.1019
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESC_WOL_1019
		trigger = { NOT = { has_character_flag = wol_lover_admitted_at_sword_point } }
	}
	desc = {
		text = EVTDESC_WOL_1019_DUEL
		trigger = { has_character_flag = wol_lover_admitted_at_sword_point }
	}

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = EVTOPTA_WOL_1019

		clr_character_flag = wol_lover_admitted_at_sword_point
	}
}

# The accuser responds to the lover's confession
character_event = {
	id = WoL.1020
	desc = EVTDESC_WOL_1020
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes
	show_from_from = yes

	immediate = {
		# For insult localisation
		event_target:accuser = {
			save_event_target_as = event_target_1_insulter
		}
	}

	option = {
		name = EVTOPTA_WOL_1020 # Forgive and move on

		opinion = {
			name = opinion_unfaithful_private
			who = event_target:cheating_spouse
			years = 2
		}

		if = {
			limit = { same_sex = event_target:adulterer }

			if = {
				limit = { is_female = yes }

				opinion = {
					name = slut_seductress
					who = event_target:adulterer
					years = 10
				}
			}
			else = {
				opinion = {
					name = opinion_cuckolded_private
					who = event_target:adulterer
					years = 20
				}
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value >= 50
				}
			}

			mult_modifier = {
				factor = 1.5
				trait = patient
			}

			mult_modifier = {
				factor = 1.5
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = craven
			}

			mult_modifier = {
				factor = 3
				trait = kind
			}

			mult_modifier = {
				factor = 3
				is_lover = event_target:cheating_spouse
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1006 # Denounce them both (scandal)

		if = {
			limit = {
				event_target:cheating_spouse = { is_female = yes }
			}

			opinion = {
				name = opinion_unfaithful_wife
				who = event_target:cheating_spouse
				years = 10
			}
		}
		else = {
			if = {
				limit = { gender_equality_trigger = no }

				opinion = {
					name = opinion_unfaithful_husband
					who = event_target:cheating_spouse
					years = 10
				}
			}
			else = {
				opinion = {
					name = opinion_unfaithful_husband_crime
					who = event_target:cheating_spouse
					years = 10
				}
			}
		}

		if = {
			limit = { same_sex = event_target:adulterer }

			if = {
				limit = { is_female = yes }

				opinion = {
					name = slut_seductress
					who = event_target:adulterer
					years = 10
				}
			}

			else = {
				opinion = {
					name = opinion_cuckolded
					who = event_target:adulterer
					years = 10
				}
			}
		}

		if = {
			limit = { is_lover = event_target:cheating_spouse }
			remove_lover = event_target:cheating_spouse
		}

		event_target:adulterer = {
			set_character_flag = wol_denounced_after_lover_admission
			character_event = { id = WoL.1007 }
		}

		event_target:cheating_spouse = {
			character_event = { id = WoL.1021 }
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.2

				is_ruler = no
				event_target:cheating_spouse = { is_ruler = yes }
				NOT = { trait = arbitrary }
			}

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value < 0
				}
			}

			mult_modifier = {
				factor = 2
				trait = wroth
			}

			mult_modifier = {
				factor = 1.5
				trait = proud
			}

			mult_modifier = {
				factor = 1.5
				trait = brave
			}

			mult_modifier = {
				factor = 3
				trait = cruel
			}
		}
	}
}

# Spouse is told of public denouncement (same effects as event 1008, but with slightly different scopes)
character_event = {
	id = WoL.1021
	desc = EVTDESC_WOL_1021
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	ai = no

	option = {
		name = {
			text = EVTOPTA21006 # I am doomed!
			trigger = { is_vassal_or_below_of = event_target:accuser }
		}
		name = {
			text = EVTOPTB21006 # Damn!
			trigger = { NOT = { is_vassal_or_below_of = event_target:accuser } }
		}
	}
}

### DuelEngine TODO: decide whether to replace with new 3.0 vanilla duels
# Accuser challenges lover to a duel
character_event = {
	id = WoL.1032
	desc = EVTDESC_WOL_1032
	picture = GFX_evt_family_feud_republic
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	immediate = {
		# For relation localisation
		event_target:accuser = {
			save_event_target_as = event_target_1
		}
	}

	option = {
		name = EVTOPTA_WOL_1032 # Accept

		hidden_effect = {
			set_character_flag = wol_lover_challenged
			event_target:accuser = { set_character_flag = wol_lover_challenger }
			e_rebels = { holder_scope = { character_event = { id = DuelEngine.0 } } }
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value >= 50
				}
			}

			mult_modifier = {
				factor = 3
				trait = wroth
			}

			mult_modifier = {
				factor = 3
				trait = berserker
			}

			mult_modifier = {
				factor = 3
				trait = brave
			}

			mult_modifier = {
				factor = 5
				trait = duelist
			}

			mult_modifier = {
				factor = 3

				combat_rating_diff = {
					character = event_target:accuser
					value >= 30
				}
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1032 # Refuse

		add_character_modifier = {
			name = wol_refused_duel
			years = 10
		}

		event_target:accuser = {
			character_event = {
				id = WoL.1034
				days = 2
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value >= 50
				}
			}

			mult_modifier = {
				factor = 10
				trait = craven
			}

			mult_modifier = {
				factor = 3

				combat_rating_diff = {
					character = event_target:accuser
					value < -30
				}
			}

			mult_modifier = {
				factor = 5
				event_target:accuser = { trait = duelist }
			}
		}
	}

	option = {
		name = EVTOPTC_WOL_1032 # Admit fault and apologize

		remove_lover = event_target:cheating_spouse
		set_character_flag = wol_lover_admitted_at_sword_point

		event_target:cheating_spouse = {
			character_event = {
				id = WoL.1019
				days = 2
			}
		}

		event_target:accuser = {
			character_event = {
				id = WoL.1020
				days = 2
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2

				personal_opinion = {
					who = event_target:cheating_spouse
					value < 0
				}
			}

			mult_modifier = {
				factor = 10
				trait = craven
			}

			mult_modifier = {
				factor = 3

				combat_rating_diff = {
					character = event_target:accuser
					value < -30
				}
			}

			mult_modifier = {
				factor = 5
				event_target:accuser = { trait = duelist }
			}
		}
	}

	after = {
		clear_event_target = event_target_1
	}
}

# Accuser is notified of dishonorable refusal to duel
character_event = {
	id = WoL.1034
	desc = EVTDESC_WOL_1034
	picture = GFX_evt_family_feud_republic
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = EVTOPTA_WOL_1034

		if = {
			limit = {
				NOT = { trait = trusting }
			}

			opinion = {
				name = opinion_suspected_adultery
				who = event_target:cheating_spouse
				years = 2
			}

			opinion = {
				name = opinion_chasing_spouse
				who = event_target:adulterer
				years = 2
			}

			if = {
				limit = {
					NOT = { trait = arbitrary }
				}

				random = {
					chance = 10
					add_trait_depressed_effect = yes
				}
			}
		}
	}
}

# Accuser: Duel outcome
character_event = {
	id = WoL.1035

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		# Required for the evaluation below...
		save_event_target_as = combatant_1
		event_target:adulterer = { save_event_target_as = combatant_2 }
		evaluate_duel_result_score_effect = yes

		random_list = {
			50 = {

				mult_modifier = {
					factor = 3
					trait = duelist
				}

				mult_modifier = {
					factor = 3
					trait = berserker
				}

				mult_modifier = {
					factor = 1.5
					duelist_skill_is_high_group_trigger = yes
				}

				mult_modifier = {
					factor = 3
					duel_result_score_high_group_trigger = yes
				}

				mult_modifier = {
					factor = 1.5

					combat_rating_diff = {
						character = event_target:adulterer
						value >= 10
					}
				}

				mult_modifier = {
					factor = 2

					combat_rating_diff = {
						character = event_target:adulterer
						value >= 30
					}
				}

				character_event = { id = WoL.1036 } # Notify
			}

			50 = {

				mult_modifier = {
					factor = 3
					event_target:adulterer = { trait = duelist }
				}

				mult_modifier = {
					factor = 3
					event_target:adulterer = { trait = berserker }
				}

				mult_modifier = {
					factor = 1.5
					event_target:adulterer = { duelist_skill_is_high_group_trigger = yes }
				}

				mult_modifier = {
					factor = 3
					duel_result_score_low_group_trigger = yes
				}

				mult_modifier = {
					factor = 1.5

					event_target:adulterer = {
						combat_rating_diff = {
							character = ROOT
							value >= 10
						}
					}
				}

				mult_modifier = {
					factor = 2

					event_target:adulterer = {
						combat_rating_diff = {
							character = ROOT
							value >= 30
						}
					}
				}

				event_target:adulterer = {
					character_event = { id = WoL.1039 }
				}
			}
		}

		clean_up_after_duel_effect = yes
	}
}

# Duel: Accuser wins!
character_event = {
	id = WoL.1036
	picture = GFX_evt_family_feud_republic
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	immediate = {
		# For insult localisation
		save_event_target_as = event_target_1_insulter

		if = {
			limit = { trait = craven }

			random = {
				chance = 50
				remove_trait_craven_effect = yes
			}
		}
		else = {
			random = {
				chance = 20
				add_trait_brave_effect = yes
			}
		}

	#	if = {
	#		limit = {
	#			combat_rating_diff = {
	#				character = event_target:adulterer
	#				value < -30
	#			}
	#		}
	#
	#		random_list = {
	#			70 = { set_character_flag = enemy_yields }
	#
	#			15 = {
	#				set_character_flag = enemy_wounded
	#
	#				event_target:adulterer = {
	#					add_trait = wounded
	#				}
	#			}
	#
	#			10 = {
	#				set_character_flag = enemy_maimed
	#
	#				event_target:adulterer = {
	#					maim_hand_effect = yes
	#				}
	#			}
	#
	#			5 = { set_character_flag = enemy_killed }
	#		}
	#
	#		random = {
	#			chance = 75
	#
	#			random_list = {
	#				50 = { add_trait_wounded_effect = yes }
	#				50 = { maim_hand_effect = yes }
	#			}
	#		}
	#	}
	#
	#	else_if = {
	#		limit = {
	#			combat_rating_diff = {
	#				character = event_target:adulterer
	#				value < 0
	#			}
	#		}
	#
	#		random_list = {
	#			50 = { set_character_flag = enemy_yields }
	#
	#			25 = {
	#				set_character_flag = enemy_wounded
	#
	#				event_target:adulterer = {
	#					add_trait = wounded
	#				}
	#			}
	#
	#			15 = {
	#				set_character_flag = enemy_maimed
	#
	#				event_target:adulterer = {
	#					maim_hand_effect = yes
	#				}
	#			}
	#
	#			10 = { set_character_flag = enemy_killed }
	#		}
	#
	#		random = {
	#			chance = 50
	#
	#			random_list = {
	#				75 = { add_trait_wounded_effect = yes }
	#				25 = { maim_hand_effect = yes }
	#			}
	#		}
	#	}
	#
	#	else_if = {
	#		limit = {
	#			combat_rating_diff = {
	#				character = event_target:adulterer
	#				value < 30
	#			}
	#		}
	#
	#		random_list = {
	#			25 = { set_character_flag = enemy_yields }
	#
	#			40 = {
	#				set_character_flag = enemy_wounded
	#
	#				event_target:adulterer = {
	#					add_trait = wounded
	#				}
	#			}
	#
	#			20 = {
	#				set_character_flag = enemy_maimed
	#
	#				event_target:adulterer = {
	#					maim_hand_effect = yes
	#				}
	#			}
	#
	#			15 = { set_character_flag = enemy_killed }
	#		}
	#
	#		random = {
	#			chance = 25
	#
	#			random_list = {
	#				90 = { add_trait_wounded_effect = yes }
	#				10 = { maim_hand_effect = yes }
	#			}
	#		}
	#	}
	#
	#	else = {
	#		random_list = {
	#			10 = { set_character_flag = enemy_yields }
	#
	#			45 = {
	#				set_character_flag = enemy_wounded
	#
	#				event_target:adulterer = {
	#					add_trait = wounded
	#				}
	#			}
	#
	#			25 = {
	#				set_character_flag = enemy_maimed
	#
	#				event_target:adulterer = {
	#					maim_hand_effect = yes
	#				}
	#			}
	#
	#			20 = { set_character_flag = enemy_killed }
	#		}
	#
	#		random = {
	#			chance = 10
	#			add_trait_wounded_effect = yes
	#		}
	#	}
	}

	desc = {
		text = EVTDESC_WOL_1036
		trigger = {
			NOR = {
				trait = wounded
				is_maimed_trigger = yes
			}
		}
	}
	desc = {
		text = EVTDESC_WOL_1036_WOUND
		trigger = {
			trait = wounded
			is_maimed_trigger = no
		}
	}
	desc = {
		text = EVTDESC_WOL_1036_MAIM
		trigger = {
			is_maimed_trigger = yes
		}
	}

	option = {
		name = {
			text = EVTOPTA_WOL_1036
			trigger = { has_character_flag = enemy_yields }
		}
		name = {
			text = EVTOPTB_WOL_1036
			trigger = { has_character_flag = enemy_wounded }
		}
		name = {
			text = EVTOPTC_WOL_1036
			trigger = { has_character_flag = enemy_maimed }
		}
		name = {
			text = EVTOPTD_WOL_1036
			trigger = { has_character_flag = enemy_killed }
		}

		event_target:adulterer = {
			save_event_target_as = target_adulterer # For event 20
		}

		event_target:cheating_spouse = {
			character_event = { id = WoL.1037 }
			character_event = { id = 20 } # Adultery fallout
		}

		clr_character_flag = enemy_yields
		clr_character_flag = enemy_wounded
		clr_character_flag = enemy_maimed
		clr_character_flag = enemy_killed
	}
}

# Cheating spouse notified of duel outcome - spouse wins!
character_event = {
	id = WoL.1037
	picture = GFX_evt_family_feud_republic
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	desc = {
		text = EVTDESC_WOL_1037
		trigger = {
			event_target:accuser = { has_character_flag = enemy_yields }
		}
	}
	desc = {
		text = EVTDESC_WOL_1037_WOUND
		trigger = {
			event_target:accuser = { has_character_flag = enemy_wounded }
		}
	}
	desc = {
		text = EVTDESC_WOL_1037_MAIM
		trigger = {
			event_target:accuser = { has_character_flag = enemy_maimed }
		}
	}
	desc = {
		text = EVTDESC_WOL_1037_DEATH
		trigger = {
			event_target:accuser = { has_character_flag = enemy_killed }
		}
	}

	immediate = {
		event_target:adulterer = {
			character_event = { id = WoL.1038 }
		}
	}

	option = {
		name = EVTOPTA_WOL_1037
		trigger = {
			event_target:accuser = { NOT = { has_character_flag = enemy_killed } }
		}
	}

	option = {
		name = EVTOPTB_WOL_1037
		trigger = { event_target:accuser = { has_character_flag = enemy_killed } }

		opinion = {
			name = opinion_killed_lover
			who = event_target:accuser
			years = 5
		}
	}
}

# Lover is notified of duel loss
character_event = {
	id = WoL.1038
	picture = GFX_evt_family_feud_republic
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESC_WOL_1038
		trigger = {
			event_target:accuser = { has_character_flag = enemy_yields }
		}
	}
	desc = {
		text = EVTDESC_WOL_1038_WOUND
		trigger = {
			event_target:accuser = { has_character_flag = enemy_wounded }
		}
	}
	desc = {
		text = EVTDESC_WOL_1038_MAIM
		trigger = {
			event_target:accuser = { has_character_flag = enemy_maimed }
		}
	}
	desc = {
		text = EVTDESC_WOL_1038_DEATH
		trigger = {
			event_target:accuser = { has_character_flag = enemy_killed }
		}
	}

	is_triggered_only = yes
	show_from_from = yes

	immediate = {
		if = {
			limit = {
				event_target:accuser = {
					has_character_flag = enemy_killed
				}

				multiplayer = yes
			}

			death = {
				death_reason = death_duel
				killer = event_target:accuser
			}
		}
	}

	option = {
		name = EVTOPTA_WOL_1038

		trigger = {
			event_target:accuser = {
				NOT = { has_character_flag = enemy_killed }
			}
		}

		remove_lover = event_target:cheating_spouse
	}

	option = {
		name = EVTOPTB_WOL_1038

		trigger = {
			event_target:accuser = {
				NOT = { has_character_flag = enemy_killed }
			}
		}

		add_rival = event_target:accuser

		if = {
			limit = { trait = kind }

			random = {
				chance = 50
				remove_trait_kind_effect = yes
			}
		}
		else = {
			random = {
				chance = 25
				add_trait_cruel_effect = yes
			}
		}
	}

	option = {
		name = EVTOPTC_WOL_1038

		trigger = {
			event_target:accuser = {
				has_character_flag = enemy_killed
			}
		}

		if = {
			limit = { multiplayer = yes }

			tooltip = {
				death = {
					death_reason = death_duel
					killer = event_target:accuser
				}
			}
		}
		else = {
			death = {
				death_reason = death_duel
				killer = event_target:accuser
			}
		}
	}
}

# Duel: Defender wins!
character_event = {
	id = WoL.1039
	picture = GFX_evt_family_feud_republic
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { trait = craven }

			random = {
				chance = 50
				remove_trait_craven_effect = yes
			}
		}
		else = {
			random = {
				chance = 20
				add_trait_brave_effect = yes
			}
		}

	#	if = {
	#		limit = {
	#			combat_rating_diff = {
	#				character = event_target:accuser
	#				value < -30
	#			}
	#		}
	#
	#		random_list = {
	#			70 = { set_character_flag = enemy_yields }
	#
	#			15 = {
	#				set_character_flag = enemy_wounded
	#
	#				event_target:accuser = {
	#					add_trait = wounded
	#				}
	#			}
	#
	#			10 = {
	#				set_character_flag = enemy_maimed
	#
	#				event_target:accuser = {
	#					maim_hand_effect = yes
	#				}
	#			}
	#
	#			5 = { set_character_flag = enemy_killed }
	#		}
	#
	#		random = {
	#			chance = 75
	#
	#			random_list = {
	#				50 = { add_trait_wounded_effect = yes }
	#				50 = { maim_hand_effect = yes }
	#			}
	#		}
	#	}
	#
	#	else_if = {
	#		limit = {
	#			combat_rating_diff = {
	#				character = FROM
	#				value < 0
	#			}
	#		}
	#
	#		random_list = {
	#			50 = { set_character_flag = enemy_yields }
	#
	#			25 = {
	#				set_character_flag = enemy_wounded
	#
	#				event_target:accuser = {
	#					add_trait = wounded
	#				}
	#			}
	#
	#			15 = {
	#				set_character_flag = enemy_maimed
	#
	#				event_target:accuser = {
	#					maim_hand_effect = yes
	#				}
	#			}
	#
	#			10 = { set_character_flag = enemy_killed }
	#		}
	#
	#		random = {
	#			chance = 50
	#
	#			random_list = {
	#				75 = { add_trait_wounded_effect = yes }
	#				25 = { maim_hand_effect = yes }
	#			}
	#		}
	#	}
	#
	#	else_if = {
	#		limit = {
	#			combat_rating_diff = {
	#				character = event_target:accuser
	#				value < 30
	#			}
	#		}
	#
	#		random_list = {
	#			25 = { set_character_flag = enemy_yields }
	#
	#			40 = {
	#				set_character_flag = enemy_wounded
	#
	#				event_target:accuser = {
	#					add_trait = wounded
	#				}
	#			}
	#
	#			20 = {
	#				set_character_flag = enemy_maimed
	#
	#				event_target:accuser = {
	#					maim_hand_effect = yes
	#				}
	#			}
	#
	#			15 = { set_character_flag = enemy_killed }
	#		}
	#
	#		random = {
	#			chance = 25
	#
	#			random_list = {
	#				90 = { add_trait_wounded_effect = yes }
	#				10 = { maim_hand_effect = yes }
	#			}
	#		}
	#	}
	#
	#	else = {
	#		random_list = {
	#			10 = { set_character_flag = enemy_yields }
	#
	#			45 = {
	#				set_character_flag = enemy_wounded
	#
	#				event_target:accuser = {
	#					add_trait = wounded
	#				}
	#			}
	#
	#			25 = {
	#				set_character_flag = enemy_maimed
	#
	#				event_target:accuser = {
	#					maim_hand_effect = yes
	#				}
	#			}
	#
	#			20 = { set_character_flag = enemy_killed }
	#		}
	#
	#		random = {
	#			chance = 10
	#			add_trait_wounded_effect = yes
	#		}
	#	}
	}

	desc = {
		text = EVTDESC_WOL_1039
		trigger = {
			NOR = {
				trait = wounded
				is_maimed_trigger = yes
			}
		}
	}
	desc = {
		text = EVTDESC_WOL_1039_WOUND
		trigger = {
			trait = wounded
			is_maimed_trigger = no
		}
	}
	desc = {
		text = EVTDESC_WOL_1039_MAIM
		trigger = { is_maimed_trigger = yes }
	}

	option = {
		name = {
			text = EVTOPTA_WOL_1036
			trigger = { has_character_flag = enemy_yields }
		}
		name = {
			text = EVTOPTB_WOL_1036
			trigger = { has_character_flag = enemy_wounded }
		}
		name = {
			text = EVTOPTC_WOL_1036
			trigger = { has_character_flag = enemy_maimed }
		}
		name = {
			text = EVTOPTD_WOL_1036
			trigger = { has_character_flag = enemy_killed }
		}

		event_target:cheating_spouse = {
			character_event = { id = WoL.1040 }
		}

		clr_character_flag = enemy_yields
		clr_character_flag = enemy_wounded
		clr_character_flag = enemy_maimed
		clr_character_flag = enemy_killed
	}
}

# Cheating spouse notified of duel outcome - lover wins!
character_event = {
	id = WoL.1040
	picture = GFX_evt_family_feud_republic
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESC_WOL_1040
		trigger = {
			event_target:adulterer = { has_character_flag = enemy_yields }
		}
	}
	desc = {
		text = EVTDESC_WOL_1040_WOUND
		trigger = {
			event_target:adulterer = { has_character_flag = enemy_wounded }
		}
	}
	desc = {
		text = EVTDESC_WOL_1040_MAIM
		trigger = {
			event_target:adulterer = { has_character_flag = enemy_maimed }
		}
	}
	desc = {
		text = EVTDESC_WOL_1040_DEATH
		trigger = {
			event_target:adulterer = { has_character_flag = enemy_killed }
		}
	}

	is_triggered_only = yes

	immediate = {
		event_target:accuser = {
			character_event = { id = WoL.1041 }
		}
	}

	option = {
		name = {
			text = EVTOPTA_WOL_1040
			trigger = {
				event_target:adulterer = {
					NOT = { has_character_flag = enemy_killed }
				}
			}
		}
		name = {
			text = EVTOPTB_WOL_1040
			trigger = {
				event_target:adulterer = {
					has_character_flag = enemy_killed
				}
			}
		}
	}
}

# Accuser is notified of duel loss
character_event = {
	id = WoL.1041
	picture = GFX_evt_family_feud_republic
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESC_WOL_1041
		trigger = {
			event_target:adulterer = { has_character_flag = enemy_yields }
		}
	}
	desc = {
		text = EVTDESC_WOL_1041_WOUND
		trigger = {
			event_target:adulterer = { has_character_flag = enemy_wounded }
		}
	}
	desc = {
		text = EVTDESC_WOL_1041_MAIM
		trigger = {
			event_target:adulterer = { has_character_flag = enemy_maimed }
		}
	}
	desc = {
		text = EVTDESC_WOL_1041_DEATH
		trigger = {
			event_target:adulterer = { has_character_flag = enemy_killed }
		}
	}

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = EVTOPTA_WOL_1041

		trigger = {
			event_target:adulterer = {
				NOT = { has_character_flag = enemy_killed }
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1038

		trigger = {
			event_target:adulterer = {
				NOT = { has_character_flag = enemy_killed }
			}
		}

		add_rival = event_target:adulterer

		if = {
			limit = { trait = kind }

			random = {
				chance = 50
				remove_trait_kind_effect = yes
			}
		}
		else = {
			random = {
				chance = 25
				add_trait_cruel_effect = yes
			}
		}
	}

	option = {
		name = EVTOPTC_WOL_1041

		trigger = {
			event_target:adulterer = {
				has_character_flag = enemy_killed
			}
		}

		death = {
			death_reason = death_duel
			killer = event_target:adulterer
		}
	}
}

##########################################
# LOVERS FALLING OUT OF LOVE
##########################################

character_event = {
	id = WoL.1102
	desc = EVTDESC_WOL_1102
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_intrigue
	portrait = event_target:target_lover

	is_triggered_only = yes # on_yearly_pulse, random_events, wol_lover_events; various events

	min_age = 16
	has_dlc = "Way of Life"
	only_capable = yes
	prisoner = no

	trigger = {
		has_lover = yes

		trigger_if = {
			limit = {
				NOT = { event_target:target_lover = { always = yes } } # If not called by another event
			}

			any_lover = {
				ai = yes
				NOT = { has_character_flag = gbc_courtly_lover }

				reverse_opinion = {
					who = ROOT
					value < 25
				}
			}

			NOT = { has_character_flag = gbc_courtly_lover }
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 5
			trait = cruel
		}

		mult_modifier = {
			factor = 2
			trait = cynical
		}

		mult_modifier = {
			factor = 2
			trait = arbitrary
		}

		mult_modifier = {
			factor = 1.33
			trait = wroth
		}

		mult_modifier = {
			factor = 0.5
			trait = patient
		}

		mult_modifier = {
			factor = 0.33
			trait = kind
		}

		mult_modifier = {
			factor = 0.33
			has_focus = focus_seduction
		}
	}

	immediate = {
		save_event_target_as = affair_ender

		if = {
			limit = { event_target:target_lover = { always = yes } } # If called by another event

			event_target:target_lover = {
				save_event_target_as = event_target_1
			}
		}
		else = {
			random_lover = {
				limit = {
					ai = yes
					NOT = { has_character_flag = gbc_courtly_lover }

					reverse_opinion = {
						who = ROOT
						value < 25
					}
				}

				save_event_target_as = target_lover
				save_event_target_as = event_target_1
			}
		}
	}

	option = {
		name = {
			text = EVTOPTA_WOL_1102 # Such is life
			trigger = {
				NOT = { is_married = event_target:target_lover }
			}
		}
		name = {
			text = EVTOPTB_WOL_1102 # Such is life. Married.
			trigger = { is_married = event_target:target_lover }
		}

		event_target:target_lover = {
			show_scope_change = no

			character_event = {
				id = WoL.1103
				days = 3
				tooltip = EVTTOOLTIP64046
			}
		}
	}

	option = {
		name = EVTOPTC_WOL_1102 # Rekindle our love!

		trigger = {
			OR = {
				has_focus = focus_seduction
				trait = master_seducer
				trait = master_seductress
				has_character_modifier = wol_seducer_2
			}

			NOT = {
				has_opinion_modifier = {
					name = opinion_rekindle_love
					who = event_target:target_lover
				}
			}
		}

		opinion = {
			name = opinion_rekindle_love
			who = event_target:target_lover
			years = 2
		}
	}

	after = {
		clear_event_target = event_target_1
	}
}

# Lover is notified
character_event = {
	id = WoL.1103
	desc = EVTDESC_WOL_1103
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = {
			text = EVTOPTA64046
			trigger = {
				NOT = { is_married = event_target:affair_ender }
			}
		}
		name = {
			text = EVTOPTB_WOL_1102
			trigger = { is_married = event_target:affair_ender }
		}

		remove_lover = event_target:affair_ender
	}

	option = {
		name = EVTOPTC_WOL_1103 # Re-seduction!

		trigger = {
			OR = {
				has_focus = focus_seduction
				trait = master_seducer
				trait = master_seductress
				has_character_modifier = wol_seducer_1
				has_character_modifier = wol_seducer_2
			}
		}

		event_target:affair_ender = {
			show_scope_change = no

			character_event = {
				id = WoL.1104
				days = 1
				tooltip = EVTTOOLTIP_WoL_1104
			}
		}

		ai_chance = { factor = 10 }
	}
}

# Lover attempts re-seduction
character_event = {
	id = WoL.1104
	desc = EVTDESC_WOL_1104
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = EVTOPTA_WOL_1104 # Oh yes!

		opinion = {
			name = opinion_rekindle_love
			who = event_target:target_lover
			years = 3
		}

		event_target:target_lover = {
			show_scope_change = no

			character_event = {
				id = WoL.1105
				days = 3
				tooltip = EVTTOOLTIP_WoL_1105
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2
				event_target:target_lover = { has_character_modifier = wol_seducer_1 }
			}

			mult_modifier = {
				factor = 4
				event_target:target_lover = { has_character_modifier = wol_seducer_2 }
			}

			mult_modifier = {
				factor = 5

				event_target:target_lover = {
					OR = {
						trait = master_seducer
						trait = master_seductress
					}
				}
			}

			mult_modifier = {
				factor = 5
				trait = hedonist
			}

			mult_modifier = {
				factor = 5
				trait = lustful
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1104 # Nope

		remove_lover = event_target:target_lover

		event_target:target_lover = {
			character_event = {
				id = WoL.1106
				days = 3
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2
				trait = arbitrary
			}

			mult_modifier = {
				factor = 3
				trait = cruel
			}

			mult_modifier = {
				factor = 5
				trait = chaste
			}
		}
	}
}

# Lover succeeds with re-seduction
character_event = {
	id = WoL.1105
	desc = EVTDESC_WOL_1105
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_WOL_1105
	}
}

# Lover fails with re-seduction
character_event = {
	id = WoL.1106
	desc = EVTDESC_WOL_1106
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_WOL_1106
	}
}

##########################################
# THE STRESS OF MULTIPLE LOVERS
##########################################

character_event = {
	id = WoL.1150
	desc = EVTDESC_WOL_1150
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes # on_yearly_pulse, random_events, wol_lover_events
	hide_from = yes

	has_dlc = "Way of Life"
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		num_of_lovers >= 2
		NOT = { trait = stressed }

		any_lover = {
			count >= 2

			prisoner = no
			is_incapable = no

			NOR = {
				is_married = ROOT
				is_consort = ROOT
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 2
			trait = depressed
		}

		mult_modifier = {
			factor = 2
			trait = slothful
		}

		mult_modifier = {
			factor = 1.33
			num_of_lovers >= 3
		}

		mult_modifier = {
			factor = 2
			num_of_lovers >= 4
		}

		mult_modifier = {
			factor = 2
			num_of_lovers >= 6
		}

		mult_modifier = {
			factor = 2
			num_of_lovers >= 8
		}

		mult_modifier = {
			factor = 2
			num_of_lovers >= 10
		}

		mult_modifier = {
			factor = 1.33
			trait = wroth
		}

		mult_modifier = {
			factor = 0.8
			trait = patient
		}

		mult_modifier = {
			factor = 0.67
			trait = ambitious
		}

		mult_modifier = {
			factor = 0.5
			trait = diligent
		}

		mult_modifier = {
			factor = 0.5

			OR = {
				trait = master_seducer
				trait = master_seductress
				has_character_modifier = wol_seducer_2
				has_focus = focus_seduction
			}
		}
	}

	immediate = {
		random_lover = {
			limit = {
				prisoner = no
				is_incapable = no

				NOR = {
					is_married = ROOT
					is_consort = ROOT
				}
			}

			save_event_target_as = first_lover
		}

		random_lover = {
			limit = {
				prisoner = no
				is_incapable = no

				NOR = {
					is_married = ROOT
					is_consort = ROOT
					character = event_target:first_lover
				}
			}

			save_event_target_as = second_lover
		}

		random_lover = {
			limit = {
				prisoner = no
				is_incapable = no

				NOR = {
					is_married = ROOT
					is_consort = ROOT
					character = event_target:first_lover
					character = event_target:second_lover
				}
			}

			save_event_target_as = third_lover
		}
	}

	option = {
		name = EVTOPTA_WOL_1150 # Become stressed

		add_trait = stressed
	}

	option = {
		name = EVTOPTB_WOL_1150 # End an affair

		event_target:first_lover = {
			show_scope_change = no

			remove_lover = ROOT
		}
	}

	option = {
		name = EVTOPTC_WOL_1150 # End an affair

		trigger = { event_target:second_lover = { always = yes } }

		event_target:second_lover = {
			show_scope_change = no

			remove_lover = ROOT
		}
	}

	option = {
		name = EVTOPTD_WOL_1150 # End an affair

		trigger = { event_target:third_lover = { always = yes } }

		event_target:third_lover = {
			show_scope_change = no

			remove_lover = ROOT
		}
	}
}

##################################################
# THE COMFORT OF A LOVER (WHEN MARRIAGE IS SOUR)
##################################################

# Starts with the lover
character_event = {
	id = WoL.1160
	desc = EVTDESC_WOL_1160
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes # on_yearly_pulse, random_events, wol_lover_events

	has_dlc = "Way of Life"
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		is_ill = no
		has_regent = no
		in_command_trigger = no

		any_lover = {
			is_married = yes
			has_polygamy = no
			in_command_trigger = no
			has_regent = no
			is_ill = no
			prisoner = no
			is_incapable = no

			spouse = {
				prisoner = no
				is_incapable = no

				NOR = {
					character = ROOT
					is_lover = PREV
				}

				opinion = {
					who = PREV
					value < 0
				}
			}

			reverse_opinion = {
				who = ROOT
				value >= 25
			}

			NOT = {
				reverse_has_opinion_modifier = {
					name = opinion_seduced_yearning
					who = ROOT
				}
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 2
			trait = kind
		}

		mult_modifier = {
			factor = 1.33
			trait = diligent
		}

		mult_modifier = {
			factor = 0.5
			trait = depressed
		}

		mult_modifier = {
			factor = 0.5
			trait = stressed
		}

		mult_modifier = {
			factor = 0.33
			trait = slothful
		}

		mult_modifier = {
			factor = 0.33
			trait = cruel
		}
	}

	immediate = {
		random_lover = {
			limit = {
				is_married = yes
				has_polygamy = no
				in_command_trigger = no
				has_regent = no
				is_ill = no
				prisoner = no
				is_incapable = no

				spouse = {
					prisoner = no
					is_incapable = no

					NOR = {
						character = ROOT
						is_lover = PREV
					}

					opinion = {
						who = PREV
						value < 0
					}
				}

				reverse_opinion = {
					who = ROOT
					value >= 25
				}

				NOT = {
					reverse_has_opinion_modifier = {
						who = ROOT
						name = opinion_seduced_yearning
					}
				}
			}

			save_event_target_as = my_lover
		}
	}

	option = {
		name = EVTOPTA_WOL_1160 # Suggest time together

		event_target:my_lover = {
			show_scope_change = no

			character_event = {
				id = WoL.1161
				days = 3
				tooltip = EVTTOOLTIP_WoL_1161
			}

			hidden_effect = {
				reverse_opinion = {
					name = opinion_seduced_yearning
					who = ROOT
					years = 3
				}
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1160 # Should not interfere

		ai_chance = { factor = 0 }
	}
}

# The married lover
character_event = {
	id = WoL.1161
	desc = EVTDESC_WOL_1161
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = EVTOPTA_WOL_1161 # Agree, country retreat

		random = {
			chance = 50
			remove_trait_stressed_effect = yes
		}

		random = {
			chance = 25
			remove_trait_depressed_effect = yes
		}

		add_character_modifier = {
			name = comfort_of_lover
			years = 1
		}

		FROM = {
			show_scope_change = no

			character_event = {
				id = WoL.1163
				days = 3
				tooltip = EVTTOOLTIP_WoL_1163
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 2
				trait = slothful
			}

			mult_modifier = {
				factor = 2
				trait = honest
			}

			mult_modifier = {
				factor = 5
				trait = kind
			}

			mult_modifier = {
				factor = 2
				trait = humble
			}
		}
	}

	option = {
		name = EVTOPTB_WOL_1161 # Do it right here

		trigger = {
			OR = {
				trait = depressed
				trait = stressed
			}
		}

		remove_trait_silently_stressed_effect = yes

		random = {
			chance = 50
			remove_trait_depressed_effect = yes
		}

		add_character_modifier = {
			name = thrill_of_lover
			years = 1
		}

		FROM = {
			show_scope_change = no

			character_event = {
				id = WoL.1162
				days = 3
				tooltip = EVTTOOLTIP_WoL_1162
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 0.25
				is_female = yes
			}

			mult_modifier = {
				factor = 5
				trait = cruel
			}

			mult_modifier = {
				factor = 5
				trait = arbitrary
			}

			mult_modifier = {
				factor = 2
				trait = brave
			}

			mult_modifier = {
				factor = 2
				trait = deceitful
			}
		}
	}

	option = {
		name = EVTOPTC_WOL_1161 # I don't need comfort

		trigger = {
			NOT = { trait = lunatic }
		}

		opinion = {
			name = opinion_declined_romance
			who = FROM
			years = 2
		}

		FROM = {
			character_event = {
				id = WoL.1164
				days = 3
			}
		}

		ai_chance = {
			factor = 100

			mult_modifier = {
				factor = 5
				trait = craven
			}

			mult_modifier = {
				factor = 2
				trait = proud
			}
		}
	}

	option = {
		name = EVTOPTD_WOL_1161 # Lunatic text
		tooltip_info = lunatic

		trigger = { trait = lunatic }

		opinion = {
			name = opinion_declined_romance
			who = FROM
			years = 2
		}

		FROM = {
			character_event = {
				id = WoL.1164
				days = 3
			}
		}

		ai_chance = { factor = 1000 }
	}
}

# Stayed in castle. Notify the lover.
character_event = {
	id = WoL.1162
	desc = EVTDESC_WOL_1162
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	immediate = {
		# STDs and pregnancy
		unprotected_sex_effect = yes

		# Set up event targets for WoL.1003
		save_event_target_as = adulterer
		FROM = { save_event_target_as = cheating_spouse }

		if = {
			limit = {
				NOR = {
					has_character_modifier = wol_court_tomcat
					has_character_modifier = wol_court_vixen
				}

				FROM = {
					NOR = {
						has_character_modifier = wol_court_tomcat
						has_character_modifier = wol_court_vixen
					}
				}
			}

			random = {
				chance = 25

				FROM = {
					spouse = {
						character_event = { id = WoL.1003 } # Start off the suspicious spouse events
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTA_WOL_1162 # Naughty...
	}
}

# Countryside Romance. Notify the lover.
character_event = {
	id = WoL.1163
	desc = EVTDESC_WOL_1163
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	immediate = {
		# STDs and pregnancy
		unprotected_sex_effect = yes

		# Set up event targets for WoL.1003
		save_event_target_as = adulterer
		FROM = { save_event_target_as = cheating_spouse }

		if = {
			limit = {
				NOR = {
					has_character_modifier = wol_court_tomcat
					has_character_modifier = wol_court_vixen
				}

				FROM = {
					NOR = {
						has_character_modifier = wol_court_tomcat
						has_character_modifier = wol_court_vixen
					}
				}
			}

			random = {
				chance = 5

				FROM = {
					spouse = {
						character_event = { id = WoL.1003 } # Start off the suspicious spouse events
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTA_WOL_1163 # Lovely!
	}
}

# Lover declines
character_event = {
	id = WoL.1164
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESC_WOL_1164
		trigger = { FROM = { NOT = { trait = lunatic } } }
	}
	desc = {
		text = EVTDESC_WOL_1164_MAD
		trigger = { FROM = { trait = lunatic } }
	}

	is_triggered_only = yes

	option = {
		name = {
			text = EVTOPTA_WOL_1164 # Awww
			trigger = {
				FROM = {
					NOT = { trait = lunatic }
				}
			}
		}
		name = {
			text = EVTOPTA_WOL_1164_MAD
			trigger = {
				FROM = { trait = lunatic }

				NOR = {
					trait = lunatic
					trait = possessed
				}
			}
		}
		name = {
			text = EVTOPTA_WOL_1164_MAD_MAD
			trigger = {
				FROM = { trait = lunatic }

				OR = {
					trait = lunatic
					trait = possessed
				}
			}
		}

		opinion = {
			name = opinion_declined_romance
			who = FROM
			years = 2
		}
	}
}