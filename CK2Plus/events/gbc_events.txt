###########################################
#                                         #
# CK Chronicles	events			          #
# ID GBC.1-GBC.199						  #
#                                         #
###########################################

# Written by Milla Isaksson & Mathilda Bjarnehed

namespace = GBC

### GRIEF BRINGS FAMILY TOGETHER ###

# selecting target relative
letter_event = {
	id = GBC.1
#	desc = EVTDESC_GBC_1

	hide_window = yes
	is_triggered_only = yes # on_yearly_pulse, random_events

	has_global_flag = black_death_happened
	min_age = 16

	trigger = {
		NOT = { has_character_flag = gbc_mourning }

		OR = {
			any_friend = {
				trait = bubonic_plague
				is_adult = yes
				ai = yes
			}

			any_dynasty_member = {
				trait = bubonic_plague
				is_adult = yes
				ai = yes
				is_offmap_ruler = no
			}
		}
	}

	immediate = {
		if = {
			limit = {
				any_friend = {
					trait = bubonic_plague
					is_adult = yes
					ai = yes
				}
			}

			any_friend = {
				limit = {
					trait = bubonic_plague
					is_adult = yes
					ai = yes
				}

				score_value = {
					value = 10
					interesting_courtier_selection_score = yes
				}

				save_event_target_as = GBC_dead_one
			}
		}

		else = {
			any_dynasty_member = {
				limit = {
					trait = bubonic_plague
					is_adult = yes
					ai = yes
					is_offmap_ruler = no
				}

				score_value = {
					value = 10
					interesting_courtier_selection_score = yes
				}

				save_event_target_as = GBC_dead_one
			}
		}

		# Kill plagued char
		event_target:GBC_dead_one = {
			add_trait = falconer
			death = { death_reason = death_trait }
		}

		set_character_flag = gbc_mourning
		narrative_event = { id = GBC.2 days = 10 }
	}
}

# Gazing at the stars
narrative_event = {
	id = GBC.2
	title = EVTNAME_GBC_2
	desc = EVTDESC_GBC_2
	picture = GFX_evt_comet
	border = GFX_event_narrative_frame_religion

	is_triggered_only = yes

	# I can't believe they're not with us
	option = {
		name = EVTOPTA_GBC_2

		character_event = {
			id = GBC.3
			days = 10
		}
	}
}

# Contemplating
character_event = {
	id = GBC.3
	picture = GFX_evt_pale_rider
	border = GFX_event_normal_frame_religion

	desc = {
		text = EVTDESC_GBC_3_A

		trigger = {
			job_spiritual = {
				character = yes
			}
		}
	}

	desc = {
		text = EVTDESC_GBC_3_B

		trigger = {
			NOT = {
				job_spiritual = {
					character = yes
				}
			}
		}
	}

	hide_from = yes
	is_triggered_only = yes

	# I should talk to someone about my grief
	option = {
		name = EVTOPTA_GBC_3

		random = {
			chance = 50
			add_trait_stressed_effect = yes
		}

		character_event = {
			id = GBC.5
			days = 5
		}
	}

	# I wish my friend was here
	option = {
		name = EVTOPTB_GBC_3

		random = {
			chance = 10
			add_trait_depressed_effect = yes
		}

		character_event = {
			id = GBC.5
			days = 8
		}
	}
}

# Relative approaches you - they've seen you in mourning, but has been reluctant to talk to you
character_event = {
	id = GBC.5
	picture = GFX_evt_courtiers_talking
	desc = EVTDESC_GBC_5
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		any_dynasty_member = {
			is_adult = yes
			is_incapable = no
			ai = yes
			is_offmap_ruler = no
		}
	}

	immediate = {
		any_dynasty_member = {
			limit = {
				is_adult = yes
				is_incapable = no
				ai = yes
				is_offmap_ruler = no
			}

			score_value = {
				value = 10
				interesting_courtier_selection_score = yes
			}

			save_event_target_as = GBC_new_friend

			add_character_modifier = {
				name = pet_owl
				duration = -1
			}
		}
	}

	# I'm more human than they know
	option = {
		name = EVTOPTA_GBC_5

		remove_trait_silently_deceitful_effect = yes

		if = {
			limit = {
				NOT = { trait = honest }
			}
			add_trait = honest
		}

		remove_trait_silently_shy_effect = yes

		character_event = {
			id = GBC.6
			days = 10
		}
	}

	# I'm FINE, I SAID: I AM FINE!
	option = {
		name = EVTOPTB_GBC_5

		remove_trait_silently_honest_effect = yes
		add_trait_silently_stubborn_effect = yes

		character_event = {
			id = GBC.6
			days = 10
		}
	}
}

# Relative hands you an owl - it used to belong to the dead character
character_event = {
	id = GBC.6
	picture = GFX_evt_falconing
	desc = EVTDESC_GBC_6
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		event_target:GBC_new_friend = {
			is_alive = yes
		}
	}

	# The owl is adorable!
	option = {
		name = EVTOPTA_GBC_6

		event_target:GBC_new_friend = {
			show_scope_change = no

			opinion = {
				who = ROOT
				name = opinion_budding_friendship
			}

			hidden_effect = {
				remove_character_modifier = pet_owl
			}
		}

		add_character_modifier = {
			name = pet_owl
			duration = -1
		}

		character_event = {
			id = 77800 # Owl dies
			days = 3500
			random = 2000
		}

		remove_trait_silently_depressed_effect = yes
		remove_trait_silently_stressed_effect = yes

		character_event = {
			id = GBC.73
			days = 25
		}
	}

	# I can barely take care of myself
	option = {
		name = EVTOPTB_GBC_6

		character_event = {
			id = GBC.73
			days = 25
		}
	}
}

# Councillor asks about new friend
character_event = {
	id = GBC.73
	picture = GFX_evt_council
	desc = EVTDESC_GBC_73
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				any_courtier = {
					is_councillor = yes

					opinion = {
						who = ROOT
						value >= 25
					}
				}
			}

			any_courtier = {
				limit = {
					is_councillor = yes

					opinion = {
						who = ROOT
						value >= 25
					}
				}

				score_value = {
					value = 10
					interesting_courtier_selection_score = yes
				}

				save_event_target_as = GBC_nice_councillor
			}
		}
		else_if = {
			limit = {
				any_courtier = {
					is_adult = yes

					opinion = {
						who = ROOT
						value >= 25
					}
				}
			}

			any_courtier = {
				limit = {
					is_adult = yes

					opinion = {
						who = ROOT
						value >= 25
					}
				}

				score_value = {
					value = 10
					interesting_courtier_selection_score = yes
				}

				save_event_target_as = GBC_nice_councillor
			}
		}
		else = {
			any_courtier = {
				score_value = {
					value = 10
					interesting_courtier_selection_score = yes
				}

				save_event_target_as = GBC_nice_councillor
			}
		}

		if = {
			limit = { has_dlc = "Reapers" }

			event_target:GBC_new_friend = {
				add_trait = fever
				set_character_flag = developing_illness
			}
		}
	}

	# Our grief has brought us together
	option = {
		name = EVTOPTA_GBC_73

		add_friend = event_target:GBC_new_friend

		character_event = {
			id = GBC.8
			days = 30
		}
	}

	# I don't know what you're talking about
	option = {
		name = EVTOPTB_GBC_73

		# Because you are callous
		add_trait_silently_cynical_effect = yes

		character_event = {
			id = GBC.8
			days = 30
		}
	}
}

# Relative wants bird back
character_event = {
	id = GBC.8
	picture = GFX_evt_quarrel
	desc = EVTDESC_GBC_8
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		event_target:GBC_new_friend = {
			is_alive = yes
		}
	}

	# What's wrong?
	option = {
		name = EVTOPTA_GBC_8

		if = {
			limit = { trait = wroth }
			remove_trait = wroth
		}
		else_if = {
			limit = {
				NOT = { trait = patient }
			}
			add_trait = patient
		}

		character_event = { id = GBC.9 }
	}

	# NO, YOU CAN'T TAKE HER FROM ME
	option = {
		name = EVTOPTB_GBC_8

		if = {
			limit = { trait = patient }
			remove_trait = patient
		}
		else_if = {
			limit = {
				NOT = { trait = wroth }
			}
			add_trait = wroth
		}

		character_event = { id = GBC.10 }
	}

	# You don't really care
	option = {
		name = EVTOPTC_GBC_8

		remove_trait_silently_just_effect = yes
		add_trait_silently_arbitrary_effect = yes

		# (skips GBC.17, they will not invite you hunting)
		character_event = { id = GBC.11 }
	}
}

# They admit they think they are sick
character_event = {
	id = GBC.9
	picture = GFX_evt_shadowy_cabal
	desc = EVTDESC_GBC_9
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		set_character_flag = GBC_knows_friend_is_ill
	}

	# I don't think this is the plague
	option = {
		name = EVTOPTA_GBC_9

		character_event = {
			id = GBC.17
			days = 15
		}
	}
}

# They start to cry, without explanation
character_event = {
	id = GBC.10
	picture = GFX_evt_shadowy_cabal
	desc = EVTDESC_GBC_10
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	# They'll talk when they're ready
	option = {
		name = EVTOPTA_GBC_10

		character_event = {
			id = GBC.17
			days = 15
		}
	}
}

# They curse you and your ignorance
character_event = {
	id = GBC.11
	picture = GFX_evt_shadowy_cabal
	desc = EVTDESC_GBC_11
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	# You tell them to leave
	option = {
		name = EVTOPTA_GBC_11

		custom_tooltip = {
			text = EVTOPTA_GBC_11_TOOLTIP

			random_list = {
				# They live
				65 = {
					narrative_event = {
						id = GBC.12
						days = 20
					}
				}

				# They die
				35 = {
					character_event = {
						id = GBC.19
						days = 20
					}
				}
			}
		}
	}
}

# Hanging out, awkward
character_event = {
	id = GBC.17
	picture = GFX_evt_suspicious_noble
	border = GFX_event_normal_frame_religion

	desc = {
		text = EVTDESC_GBC_17_A
		trigger = { has_character_flag = GBC_knows_friend_is_ill }
	}
	desc = {
		text = EVTDESC_GBC_17_B
		trigger = {
			NOT = { has_character_flag = GBC_knows_friend_is_ill }
		}
	}

	trigger = {
		event_target:GBC_new_friend = { is_alive = yes }
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTA_GBC_17

		trigger = { has_character_flag = GBC_knows_friend_is_ill }

		custom_tooltip = {
			text = EVTOPTA_GBC_17_TOOLTIP

			random_list = {
				# They live
				65 = {
					narrative_event = {
						id = GBC.12
						days = 30
						random = 10
					}
				}

				# They die
				35 = {
					character_event = {
						id = GBC.19
						days = 30
						random = 10
					}
				}
			}

			event_target:GBC_new_friend = {
				add_trait = falconer
			}
		}
	}

	option = {
		name = EVTOPTB_GBC_17

		trigger = {
			NOT = { has_character_flag = GBC_knows_friend_is_ill }
		}

		custom_tooltip = {
			text = EVTOPTB_GBC_17_TOOLTIP

			random_list = {
				# They live
				65 = {
					narrative_event = {
						id = GBC.12
						days = 40
						random = 10
					}
				}

				# They die
				35 = {
					character_event = {
						id = GBC.19
						days = 40
						random = 10
					}
				}
			}

			event_target:GBC_new_friend = {
				add_trait = falconer
			}
		}
	}
}

# New_friend succumbs to disease - hidden event
character_event = {
	id = GBC.19

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		event_target:GBC_new_friend = {
			is_alive = yes
		}
	}

	immediate = {
		if = {
			limit = { has_dlc = "Reapers" }

			event_target:GBC_new_friend = {
				add_trait = malaise
			}
		}

		event_target:GBC_new_friend = {
			death = { death_reason = death_trait }
		}

		narrative_event = {
			id = GBC.13
			days = 5
			random = 5
		}
	}
}

# They live
narrative_event = {
	id = GBC.12
	title = EVTNAME_GBC_12
	picture = GFX_evt_garden
	border = GFX_event_narrative_frame_religion

	desc = {
		text = EVTDESC_GBC_12_A

		trigger = { has_character_flag = GBC_knows_friend_is_ill }
	}

	desc = {
		text = EVTDESC_GBC_12_B

		trigger = {
			NOT = { has_character_flag = GBC_knows_friend_is_ill }
		}
	}

	is_triggered_only = yes

	trigger = {
		event_target:GBC_new_friend = {
			is_alive = yes
		}
	}

	# You knew it was nothing to worry about
	option = {
		name = {
			text = EVTOPTA_GBC_12

			trigger = {
				has_character_flag = GBC_knows_friend_is_ill
			}
		}

		name = {
			text = EVTOPTB_GBC_12

			trigger = {
				NOT = { has_character_flag = GBC_knows_friend_is_ill }
			}
		}

		custom_tooltip = {
			text = EVTOPTA_GBC_12_TOOLTIP

			clr_character_flag = GBC_knows_friend_is_ill

			if = {
				limit = { has_dlc = "Reapers" }

				event_target:GBC_new_friend = {
					remove_trait = fever
					clr_character_flag = developing_illness
				}
			}
		}
	}
}

# They die
narrative_event = {
	id = GBC.13
	title = EVTNAME_GBC_13
	picture = GFX_evt_death
	border = GFX_event_narrative_frame_religion

	desc = {
		text = EVTDESC_GBC_13_A

		trigger = { has_character_flag = GBC_knows_friend_is_ill }
	}

	desc = {
		text = EVTDESC_GBC_13_B

		trigger = {
			NOT = { has_character_flag = GBC_knows_friend_is_ill }
		}
	}

	is_triggered_only = yes

	# Life is so cruel
	option = {
		name = EVTOPTA_GBC_13

		custom_tooltip = {
			text = EVTOPTA_GBC_13_TOOLTIP

			clr_character_flag = GBC_knows_friend_is_ill
		}
	}
}

### COURTLY LOVE ###

# Sending it to the one who got married
character_event = {
	id = GBC.199

	hide_window = yes
	is_triggered_only = yes # on_marriage

	trigger = {
		FROM = {
			ai = no
			is_landed = yes
			has_lover = no
			block_general_event_trigger = no

			NOR = {
				trait = celibate
				has_character_flag = gbc_courtly_love
			}

			random < 3 # 3% chance of firing

			OR = {
				liege = {
					ai = yes
					is_married = yes
					block_general_event_trigger = no

					any_spouse = {
						root_attraction_trigger = yes
						NOT = { is_close_relative = ROOT }
						block_general_event_trigger = no
					}
				}

				liege = {
					NOT = { character = ROOT }

					any_vassal = {
						is_married = yes
						ai = yes
						block_general_event_trigger = no

						any_spouse = {
							root_attraction_trigger = yes
							block_general_event_trigger = no
						}
					}
				}

				any_vassal = {
					is_married = yes
					ai = yes
					block_general_event_trigger = no

					any_spouse = {
						root_attraction_trigger = yes
						NOT = { is_close_relative = ROOT_FROM }
						block_general_event_trigger = no
					}
				}
			}
		}
	}

	immediate = {
		new_character = {
			save_event_target_as = gbc_spouse
		}

		FROM = {
			character_event = {
				id = GBC.100
				days = 3
			}
		}
	}
}

# Trying to find a lover
character_event = {
	id = GBC.100

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# Rival: liege
		if = {
			limit = {
				liege = {
					ai = yes
					is_married = yes
					block_general_event_trigger = no

					spouse = {
						root_attraction_trigger = yes
						NOT = { is_close_relative = ROOT }
						block_general_event_trigger = no
					}
				}
			}

			liege = {
				any_spouse = {
					limit = {
						root_attraction_trigger = yes
						NOT = { is_close_relative = ROOT }
						block_general_event_trigger = no
					}

					score_value = {
						value = 10
						interesting_courtier_selection_score = yes
					}

					save_event_target_as = gbc_lover
				}
			}
		}

		# Rival: someone else under the same liege
		else_if = {
			limit = {
				liege = {
					NOT = { character = ROOT }

					any_vassal = {
						is_married = yes
						ai = yes
						block_general_event_trigger = no

						any_spouse = {
							root_attraction_trigger = yes
							NOT = { is_close_relative = ROOT }
							block_general_event_trigger = no
						}
					}
				}
			}

			# Find a lover
			liege = {
				random_vassal = {
					limit = {
						is_married = yes
						ai = yes
						block_general_event_trigger = no

						any_spouse = {
							root_attraction_trigger = yes
							NOT = { is_close_relative = ROOT }
							block_general_event_trigger = no
						}
					}

					any_spouse = {
						limit = {
							root_attraction_trigger = yes
							NOT = { is_close_relative = ROOT }
							block_general_event_trigger = no
						}

						score_value = {
							value = 10
							interesting_courtier_selection_score = yes
						}

						save_event_target_as = gbc_lover
					}
				}
			}
		}

		# Rival: one of your vassals
		else_if = {
			limit = {
				any_vassal = {
					is_married = yes
					ai = yes
					block_general_event_trigger = no

					any_spouse = {
						root_attraction_trigger = yes
						NOT = { is_close_relative = ROOT }
						block_general_event_trigger = no
					}
				}
			}

			random_vassal = {
				limit = {
					is_married = yes
					ai = yes
					block_general_event_trigger = no

					any_spouse = {
						root_attraction_trigger = yes
						NOT = { is_close_relative = ROOT }
						block_general_event_trigger = no
					}
				}

				any_spouse = {
					limit = {
						root_attraction_trigger = yes
						NOT = { is_close_relative = ROOT }
						block_general_event_trigger = no
					}

					score_value = {
						value = 10
						interesting_courtier_selection_score = yes
					}

					save_event_target_as = gbc_lover
				}
			}
		}

		event_target:gbc_lover = {
			remove_trait = ugly
			remove_trait = lunatic
			remove_trait = clubfooted
			remove_trait = harelip
			remove_trait = hunchback
			remove_trait = slow
			remove_trait = imbecile
			remove_trait = cruel
			remove_trait = envious
			remove_trait = greedy
			remove_trait = gluttonous
			remove_trait = arbitrary
			remove_trait = craven
			add_trait = attractive
			add_trait = kind
			add_trait = brave

			if = {
				limit = { FROM = { trait = homosexual } }

				add_trait = homosexual
				set_character_flag = revealed_homosexual@ROOT
			}

			spouse = {
				save_event_target_as = gbc_rival
			}
		}

		FROM = {
			narrative_event = {
				id = GBC.102
				days = 3
			}
		}
	}
}

# You notice the person at a party
narrative_event = {
	id = GBC.102
	title = EVTNAME_GBC_102
	desc = EVTDSC_GBC_102
	border = GFX_event_narrative_frame_diplomacy
	picture = GFX_evt_marriage

	is_triggered_only = yes
	hide_new = yes

	option = {
		name = EVTOPTA_GBC_102

		set_character_flag = gbc_courtly_love

		character_event = {
			id = GBC.104
			days = 3
		}
	}
}

# You engage with them or not
character_event = {
	id = GBC.104
	desc = EVTDSC_GBC_104
	picture = GFX_evt_dancing
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		event_target:gbc_lover = {
			block_general_event_trigger = no
		}
	}

	# Pay attention
	option = {
		name = EVTOPTA_GBC_104

		opinion = {
			name = opinion_charmed
			who = event_target:gbc_lover
		}

		spouse = {
			show_scope_change = no

			opinion = {
				name = opinion_inattentive
				who = ROOT
			}
		}
	}

	# Ignore
	option = {
		name = EVTOPTB_GBC_104

		trigger = {
			NOT = { trait = lustful }
		}
	}

	after = {
		character_event = {
			id = GBC.106
			days = 15
		}
	}
}

# You dream about the person
character_event = {
	id = GBC.106
	desc = EVTDSC_GBC_106
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_lovers

	is_triggered_only = yes

	trigger = {
		event_target:gbc_lover = {
			block_general_event_trigger = no
		}
	}

	# Find him/her before they leave
	option = {
		name = EVTOPTA_GBC_105

		trigger = {
			NOT = { trait = craven }
		}

		ai_chance = {
			factor = 1

			mult_modifier = {
				factor = 5
				trait = lustful
			}
		}

		character_event = {
			id = GBC.108
			days = 3
		}

		if = {
			limit = {
				NOT = { trait = brave }
			}

			random = {
				chance = 20

				tooltip = {
					remove_trait_silently_craven_effect = yes
					add_trait = brave
				}

				hidden_effect = {
					remove_trait_silently_craven_effect = yes
					add_trait_brave_effect = yes
				}
			}
		}
	}

	# This is wrong :(
	option = {
		name = EVTOPTB_GBC_105

		add_trait_stressed_effect = yes

		if = {
			limit = {
				NOT = { trait = chaste }
			}

			random = {
				chance = 50

				tooltip = {
					remove_trait_silently_lustful_effect = yes
					add_trait = chaste
				}

				hidden_effect = {
					remove_trait_silently_lustful_effect = yes
					add_trait_chaste_effect = yes
				}
			}
		}

		ai_chance = {
			factor = 5
		}
	}
}

# You find the person in the garden, she virtuously rejects
character_event = {
	id = GBC.108
	desc = EVTDSC_GBC_108
	picture = GFX_evt_castle_garden
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		event_target:gbc_lover = {
			block_general_event_trigger = no
		}
	}

	option = {
		name = EVTOPTA_GBC_108

		character_event = {
			id = GBC.109
			days = 150
		}
	}
}

# Write them poetry
character_event = {
	id = GBC.109
	desc = EVTDSC_GBC_109
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_recieve_letter

	is_triggered_only = yes

	trigger = {
		event_target:gbc_lover = {
			block_general_event_trigger = no
		}
	}

	# Give it all you got
	option = {
		name = EVTOPTA_GBC_109

		trigger = {
			NOT = { trait = poet }
		}

		random_list = {
			50 = {
				mult_modifier = {
					factor = 1.5
					diplomacy >= 12
				}

				mult_modifier = {
					factor = 1.5
					diplomacy >= 18
				}

				mult_modifier = {
					factor = 1.5
					diplomacy >= 24
				}

				tooltip = {
					add_trait = poet
				}

				hidden_effect = {
					character_event = {
						id = GBC.110 # Goed poem
						days = 3
					}
				}
			}

			50 = {
				tooltip = {
					add_trait_silently_stressed_effect = yes
				}

				hidden_effect = {
					character_event = {
						id = GBC.111 # Bad poem
						days = 3
					}
				}
			}
		}
	}

	# Masterful poem
	option = {
		name = EVTOPTB_GBC_109

		trigger = { trait = poet }

		character_event = {
			id = GBC.110 # Good poem
			days = 3
		}
	}

	# Nah, send a gift instead
	option = {
		name = EVTOPTC_GBC_109

		scaled_wealth = {
			value = -0.5
			min = -25
		}

		set_character_flag = gbc_gift

		letter_event = {
			id = GBC.113
			days = 40
			random = 20
		}
	}

	# Don't send anything
	option = {
		name = EVTOPTD_GBC_109

		narrative_event = {
			id = GBC.143 # Bad end
			days = 30
		}

		event_target:gbc_lover = {
			show_scope_change = no

			opinion = {
				name = opinion_broken_promises
				who = ROOT
			}
		}
	}
}

# Poem is done, good
character_event = {
	id = GBC.110
	desc = EVTDSC_GBC_110
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_monk

	is_triggered_only = yes
	hide_from = yes

	trigger = {
		event_target:gbc_lover = {
			block_general_event_trigger = no
		}
	}

	option = {
		name = EVTOPTA_GBC_110

		add_trait = poet
		set_character_flag = gbc_poem_good

		letter_event = {
			id = GBC.113
			days = 40
			random = 20
		}
	}
}

# Poem is done, bad
character_event = {
	id = GBC.111
	desc = EVTDSC_GBC_111
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_monk

	is_triggered_only = yes
	hide_from = yes

	trigger = {
		event_target:gbc_lover = {
			block_general_event_trigger = no
		}
	}

	option = {
		name = EVTOPTA_GBC_111

		add_trait_silently_stressed_effect = yes
		set_character_flag = gbc_poem_bad

		letter_event = {
			id = GBC.113
			days = 40
			random = 20
		}
	}

	option = {
		name = EVTOPTB_GBC_111

		add_trait_silently_stressed_effect = yes
		set_character_flag = gbc_gift

		letter_event = {
			id = GBC.113
			days = 40
			random = 20
		}

		scaled_wealth = {
			value = -0.5
			min = -25
		}
	}
}

# Lover replies after gift
letter_event = {
	id = GBC.113
	border = GFX_event_letter_frame_diplomacy

	desc = {
		trigger = { has_character_flag = gbc_poem_good }

		text = EVTDSC_GBC_113_A
	}

	desc = {
		trigger = { has_character_flag = gbc_poem_bad }

		text = EVTDSC_GBC_113_B
	}

	desc = {
		trigger = { has_character_flag = gbc_gift }

		text = EVTDSC_GBC_113_C
	}

	is_triggered_only = yes

	trigger = {
		event_target:gbc_lover = {
			block_general_event_trigger = no
		}
	}

	# Lover liked poem
	option = {
		name = EVTOPTA_GBC_113

		trigger = { has_character_flag = gbc_poem_good }

		character_event = {
			id = GBC.114
			days = 150
			random = 15
		}

		reverse_opinion = {
			name = opinion_romantic_poem
			who = event_target:gbc_lover
		}

		clr_character_flag = gbc_poem_good
	}

	# Lover hated poem
	option = {
		name = EVTOPTB_GBC_113

		trigger = { has_character_flag = gbc_poem_bad }

		narrative_event = {
			id = GBC.143 # Bad end
			days = 30
		}

		reverse_opinion = {
			name = opinion_terrible_poem
			who = event_target:gbc_lover
		}

		clr_character_flag = gbc_poem_bad
	}

	# Lover liked gift
	option = {
		name = EVTOPTC_GBC_113

		trigger = { has_character_flag = gbc_poem_gift }

		character_event = {
			id = GBC.114
			days = 150
			random = 15
		}

		reverse_opinion = {
			name = opinion_romantic_gift
			who = event_target:gbc_lover
		}

		clr_character_flag = gbc_poem_gift
	}
}

# After having exchanged letters for a while, get invite
character_event = {
	id = GBC.114
	desc = EVTDSC_GBC_114
	picture = GFX_evt_hunting_scene
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes
	hide_from = yes

	trigger = {
		event_target:gbc_lover = {
			block_general_event_trigger = no
		}
	}

	# Go there
	option = {
		name = EVTOPTA_GBC_114

		character_event = {
			id = GBC.116
			days = 50
			random = 10
		}
	}

	# Don't go there
	option = {
		name = EVTOPTB_GBC_114

		narrative_event = {
			id = GBC.143 # Bad end
			days = 30
		}
	}
}

# You go there and see lover during dinner
character_event = {
	id = GBC.116
	desc = EVTDSC_GBC_116
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = {
		event_target:gbc_lover = {
			block_general_event_trigger = no
		}

		event_target:gbc_rival = {
			block_general_event_trigger = no
		}
	}

	# Try to talk to lover
	option = {
		name = EVTOPTA_GBC_116

		character_event = {
			id = GBC.118
			days = 3
		}
	}

	# Watch from afar
	option = {
		name = EVTOPTB_GBC_116

		character_event = {
			id = GBC.119
			days = 20
		}
	}
}

# You don't get a chance to talk to lover, rival discovers
character_event = {
	id = GBC.118
	desc = EVTDSC_GBC_118
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	trigger = {
		event_target:gbc_rival = {
			block_general_event_trigger = no
		}
	}

	option = {
		name = EVTOPTA_GBC_118

		event_target:gbc_rival = {
			show_scope_change = no

			opinion = {
				name = opinion_acting_suspicious
				who = ROOT
			}
		}

		character_event = {
			id = GBC.119
			days = 17
		}
	}
}

# Hear a scream
character_event = {
	id = GBC.119
	desc = EVTDSC_GBC_119
	border = GFX_event_normal_frame_war
	picture = GFX_evt_hunt

	hide_from = yes
	is_triggered_only = yes

	# Find out what's going on!
	option = {
		name = EVTOPTA_GBC_119

		character_event = {
			id = GBC.121
			days = 1
		}
	}

	# Ignore
	option = {
		name = EVTOPTB_GBC_119

		character_event = {
			id = GBC.141
			days = 7
		}
	}
}

# She died
character_event = {
	id = GBC.141
	desc = EVTDSC_GBC_141
	border = GFX_event_normal_frame_religion
	picture = GFX_evt_death

	hide_from = yes
	is_triggered_only = yes

	trigger = {
		event_target:gbc_lover = {
			block_general_event_trigger = no
		}
	}

	option = {
		name = EVTOPTA_GBC_141

		event_target:gbc_lover = {
			show_scope_change = no

			death = { death_reason = death_accident }
		}

		narrative_event = {
			id = GBC.143 # Bad end
			days = 30
		}

		add_trait_silently_depressed_effect = yes
	}
}

# Save lover, or not
character_event = {
	id = GBC.121
	desc = EVTDSC_GBC_121
	border = GFX_event_normal_frame_war
	picture = GFX_evt_hunt

	is_triggered_only = yes

	trigger = {
		event_target:gbc_lover = {
			block_general_event_trigger = no
		}
	}

	# Shoot
	option = {
		name = EVTOPTA_GBC_121

		random_list = {
			# Success
			40 = {
				mult_modifier = {
					factor = 1.2
					combat_rating >= 10
				}

				mult_modifier = {
					factor = 1.2
					combat_rating >= 20
				}

				mult_modifier = {
					factor = 1.2
					combat_rating >= 30
				}

				mult_modifier = {
					factor = 1.2
					combat_rating >= 40
				}

				mult_modifier = {
					factor = 1.2
					combat_rating >= 50
				}

				mult_modifier = {
					factor = 1.2
					combat_rating >= 60
				}

				mult_modifier = {
					factor = 1.2
					combat_rating >= 70
				}

				mult_modifier = {
					factor = 1.5
					trait = hunter
				}

				custom_tooltip = {
					text = EVTOPTA_GBC_121_TOOLTIP_A

					set_character_flag = gbc_successful_shot
				}
			}

			# Failure
			60 = {
				mult_modifier = {
					factor = 1.2
					combat_rating < 0
				}

				mult_modifier = {
					factor = 1.2
					combat_rating < -10
				}

				mult_modifier = {
					factor = 1.2
					combat_rating < -20
				}

				mult_modifier = {
					factor = 1.2
					combat_rating < -30
				}

				mult_modifier = {
					factor = 1.2
					combat_rating < -40
				}

				tooltip = {
					event_target:gbc_lover = {
						show_scope_change = no

						add_maimed_trait_effect = yes
					}
				}

				set_character_flag = gbc_failed_shot
			}
		}

		character_event = {
			id = GBC.123
			days = 1
		}
	}

	# Attack
	option = {
		name = EVTOPTB_GBC_121

		trigger = {
			NOT = { trait = craven }
		}

		random_list = {
			# Success
			70 = {
				custom_tooltip = {
					text = EVTOPTB_GBC_121_TOOLTIP_A

					set_character_flag = gbc_successful_attack
				}
			}

			# Failure
			30 = {
				custom_tooltip = {
					text = maimed_effect_tooltip

					set_character_flag = gbc_failed_attack
				}
			}
		}

		character_event = {
			id = GBC.123
			days = 1
		}
	}

	# Do nothing
	option = {
		name = EVTOPTC_GBC_121

		# Maimed
		random_list = {
			80 = {
				tooltip = {
					event_target:gbc_lover = {
						show_scope_change = no

						add_maimed_trait_effect = yes
					}
				}

				set_character_flag = gbc_do_nothing_maimed
			}

			# Death
			20 = {
				tooltip = {
					event_target:gbc_lover = {
						show_scope_change = no

						death = { death_reason = death_accident }
					}
				}

				set_character_flag = gbc_do_nothing_death
			}
		}

		character_event = {
			id = GBC.123
			days = 1
		}
	}
}

# Outcome after attempting to save (or doing nothing)
character_event = {
	id = GBC.123
	border = GFX_event_normal_frame_war
	picture = GFX_evt_hunt

	is_triggered_only = yes

	desc = {
		trigger = { has_character_flag = gbc_successful_shot }

		text = EVTDSC_GBC_123_A
	}

	desc = {
		trigger = { has_character_flag = gbc_failed_shot }

		text = EVTDSC_GBC_123_B
	}

	desc = {
		trigger = { has_character_flag = gbc_successful_attack }

		text = EVTDSC_GBC_123_C
	}

	desc = {
		trigger = { has_character_flag = gbc_failed_attack }

		text = EVTDSC_GBC_123_D
	}

	desc = {
		trigger = {
			OR = {
				has_character_flag = gbc_do_nothing_maimed
				has_character_flag = gbc_do_nothing_death
			}
		}

		text = EVTDSC_GBC_123_E
	}

	# Save love interest, become lovers
	option = {
		name = EVTOPTA_GBC_123

		trigger = {
			OR = {
				has_character_flag = gbc_successful_shot
				has_character_flag = gbc_successful_attack
				has_character_flag = gbc_failed_attack
			}
		}

		add_lover = event_target:gbc_lover

		hidden_effect = {
			set_character_flag = gbc_courtly_lover

			event_target:gbc_lover = {
				remove_lover = event_target:gbc_rival
			}
		}

		if = {
			limit = { has_character_flag = gbc_failed_attack }
			add_maimed_trait_effect = yes
		}

		character_event = {
			id = GBC.124 # A few days later...
			days = 20
		}

		character_event = {
			id = GBC.140 # Hunt is over
			days = 30
		}

		clr_character_flag = gbc_successful_shot
		clr_character_flag = gbc_successful_attack
		clr_character_flag = gbc_failed_attack
	}

	# Save love interest, deny love
	option = {
		name = EVTOPTB_GBC_123

		trigger = {
			OR = {
				has_character_flag = gbc_successful_shot
				has_character_flag = gbc_successful_attack
				has_character_flag = gbc_failed_attack
			}
		}

		reverse_opinion = {
			name = opinion_advance_rejected
			who = event_target:gbc_lover
		}

		if = {
			limit = { has_character_flag = gbc_failed_attack }
			add_maimed_trait_effect = yes
		}

		character_event = {
			id = GBC.140
			days = 30
		}

		narrative_event = {
			id = GBC.143 # Bad end
			days = 30
		}

		clr_character_flag = gbc_successful_shot
		clr_character_flag = gbc_successful_attack
		clr_character_flag = gbc_failed_attack
	}

	# Lover is maimed
	option = {
		name = EVTOPTC_GBC_123

		trigger = {
			OR = {
				has_character_flag = gbc_failed_shot
				has_character_flag = gbc_do_nothing_maimed
			}
		}

		event_target:gbc_lover = {
			show_scope_change = no
			add_maimed_trait_effect = yes
		}

		narrative_event = {
			id = GBC.143 # Bad end
			days = 30
		}

		clr_character_flag = gbc_failed_shot
		clr_character_flag = gbc_do_nothing_maimed
	}

	# Lover dies
	option = {
		name = EVTOPTC_GBC_123

		trigger = { has_character_flag = gbc_do_nothing_death }

		event_target:gbc_lover = {
			show_scope_change = no

			death = { death_reason = death_accident }
		}

		narrative_event = {
			id = GBC.143 # Bad end
			days = 30
		}

		clr_character_flag = gbc_do_nothing_death
	}
}

# Few days later
character_event = {
	id = GBC.124
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_lovers
	desc = EVTDSC_GBC_124

	is_triggered_only = yes
	hide_from = yes

	# Be sneaky
	option = {
		name = EVTOPTA_GBC_124

		character_event = {
			id = GBC.126
			days = 3
		}
	}

	# Go hunting
	option = {
		name = EVTOPTB_GBC_124

		letter_event = {
			id = GBC.128
			days = 90
		}
	}
}

# Spouse discovers
character_event = {
	id = GBC.126
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_quarrel
	desc = EVTDSC_GBC_126

	is_triggered_only = yes

	trigger = {
		event_target:gbc_rival = {
			block_general_event_trigger = no
		}
	}

	option = {
		name = EVTOPTA_GBC_126

		character_event = {
			id = GBC.138
			days = 90
			random = 15
		}

		add_rival = event_target:gbc_rival

		if = {
			limit = { is_female = yes }

			add_character_modifier = {
				name = adulteress
				years = 10
			}

			event_target:gbc_lover = {
				show_scope_change = no

				add_character_modifier = {
					name = adulterer
					years = 10
				}
			}
		}
		else = {
			add_character_modifier = {
				name = adulterer
				years = 10
			}

			event_target:gbc_lover = {
				show_scope_change = no

				add_character_modifier = {
					name = adulteress
					years = 10
				}
			}
		}
	}
}

# Hunt is over
character_event = {
	id = GBC.140
	desc = EVTDSC_GBC_140
	picture = GFX_evt_hunting_scene
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes
	hide_from = yes

	ai = no

	option = {
		name = EVTOPTA_GBC_140
	}
}

# Lover requests for you to handle spouse
letter_event = {
	id = GBC.128
	desc = EVTDSC_GBC_128
	border = GFX_event_letter_frame_intrigue

	is_triggered_only = yes

	trigger = {
		event_target:gbc_lover = {
			is_lover = ROOT
			block_general_event_trigger = no
		}
	}

	# Yes
	option = {
		name = EVTOPTA_GBC_128

		character_event = {
			id = GBC.138
			days = 60
			random = 15
		}
	}

	# No
	option = {
		name = EVTOPTB_GBC_128

		narrative_event = {
			id = GBC.143 # Bad end
			days = 20
		}

		clr_character_flag = gbc_courtly_lover

		event_target:gbc_lover = {
			show_scope_change = no

			remove_lover = ROOT
			add_trait_silently_depressed_effect = yes
		}
	}
}

# What do with the spouse?
character_event = {
	id = GBC.138
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_spymaster
	desc = EVTDSC_GBC_138

	is_triggered_only = yes
	hide_from = yes

	# Duel to the death
	option = {
		name = EVTOPTA_GBC_138
		tooltip_info = martial

		set_character_flag = gbc_duel

		ai_chance = {
			factor = 1

			mult_modifier = {
				factor = 5

				OR = {
					trait = wroth
					trait = duelist
					trait = brave
				}
			}
		}
	}

	# Talk sense
	option = {
		name = EVTOPTB_GBC_138
		tooltip_info = diplomacy

		set_character_flag = gbc_talk

		ai_chance = {
			factor = 10
		}
	}

	#Assassinate
	option = {
		name = EVTOPTC_GBC_138
		tooltip_info = intrigue

		set_character_flag = gbc_assassinate

		ai_chance = {
			factor = 1

			mult_modifier = {
				factor = 5

				OR = {
					trait = deceitful
					trait = master_schemer
					trait = ambitious
				}
			}
		}
	}

	after = {
		# Duel
		if = {
			limit = { has_character_flag = gbc_duel }

			letter_event = {
				id = GBC.142
				days = 30
			}

			random_list = {
				# Success
				60 = {
					mult_modifier = {
						factor = 1.2
						combat_rating >= 10
					}

					mult_modifier = {
						factor = 1.2
						combat_rating >= 20
					}

					mult_modifier = {
						factor = 1.2
						combat_rating >= 30
					}

					mult_modifier = {
						factor = 1.2
						combat_rating >= 40
					}

					mult_modifier = {
						factor = 1.2
						combat_rating >= 50
					}

					mult_modifier = {
						factor = 1.2
						combat_rating >= 60
					}

					mult_modifier = {
						factor = 1.2
						combat_rating >= 70
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating < 0
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating < -10
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating < -20
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating < -30
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating < -40
						}
					}

					character_event = {
						id = GBC.130
						days = 80
						random = 15
					}
				}

				# Fail
				40 = {
					mult_modifier = {
						factor = 1.2
						combat_rating < 0
					}

					mult_modifier = {
						factor = 1.2
						combat_rating < -10
					}

					mult_modifier = {
						factor = 1.2
						combat_rating < -20
					}

					mult_modifier = {
						factor = 1.2
						combat_rating < -30
					}

					mult_modifier = {
						factor = 1.2
						combat_rating < -40
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating >= 10
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating >= 20
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating >= 30
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating >= 40
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating >= 50
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating >= 60
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							combat_rating >= 70
						}
					}

					character_event = {
						id = GBC.131
						days = 80
						random = 15
					}
				}
			}

			clr_character_flag = gbc_duel
		}

		# Talk sense
		if = {
			limit = { has_character_flag = gbc_talk }

			random_list = {
				# Success
				60 = {
					mult_modifier = {
						factor = 1.2
						diplomacy >= 10
					}

					mult_modifier = {
						factor = 1.2
						diplomacy >= 13
					}

					mult_modifier = {
						factor = 1.2
						diplomacy >= 16
					}

					mult_modifier = {
						factor = 1.2
						diplomacy >= 19
					}

					mult_modifier = {
						factor = 1.2
						diplomacy >= 22
					}

					mult_modifier = {
						factor = 1.5
						trait = socializer
					}

					character_event = {
						id = GBC.132
						days = 60
					}
				}

				# Fail
				40 = {
					mult_modifier = {
						factor = 1.5
						event_target:gbc_rival = { trait = wroth }
					}

					mult_modifier = {
						factor = 1.5
						event_target:gbc_rival = { trait = proud }
					}

					mult_modifier = {
						factor = 1.5
						event_target:gbc_rival = { trait = stubborn }
					}

					character_event = {
						id = GBC.133
						days = 60
					}
				}
			}

			clr_character_flag = gbc_talk
		}

		# Assassinate
		if = {
			limit = { has_character_flag = gbc_assassinate }

			random_list = {
				# Success
				60 = {
					mult_modifier = {
						factor = 1.2
						intrigue >= 10
					}

					mult_modifier = {
						factor = 1.2
						intrigue >= 13
					}

					mult_modifier = {
						factor = 1.2
						intrigue >= 16
					}

					mult_modifier = {
						factor = 1.2
						intrigue >= 19
					}

					mult_modifier = {
						factor = 1.2
						intrigue >= 22
					}

					mult_modifier = {
						factor = 1.5
						trait = master_schemer
					}

					character_event = {
						id = GBC.134
						days = 90
					}
				}

				# Fail
				40 = {
					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							intrigue >= 10
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							intrigue >= 13
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							intrigue >= 16
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							intrigue >= 19
						}
					}

					mult_modifier = {
						factor = 1.2

						event_target:gbc_rival = {
							intrigue >= 22
						}
					}

					mult_modifier = {
						factor = 1.5

						event_target:gbc_rival = {
							trait = master_schemer
						}
					}

					character_event = {
						id = GBC.135
						days = 90
					}
				}
			}

			clr_character_flag = gbc_assassinate
		}
	}
}

# Duel letter
letter_event = {
	id = GBC.142
	border = GFX_event_letter_frame_war
	desc = EVTDSC_GBC_142

	is_triggered_only = yes

	option = {
		name = EVTOPTA_GBC_142

		if = {
			limit = {
				NOT = { is_rival = FROM }
			}

			add_rival = FROM
		}
	}
}

# Duel success
character_event = {
	id = GBC.130
	border = GFX_event_normal_frame_war
	picture = GFX_evt_melee
	desc = EVTDSC_GBC_130

	is_triggered_only = yes

	option = {
		name = EVTOPTA_GBC_130

		narrative_event = {
			id = GBC.137
			days = 50
		}

		event_target:gbc_rival = {
			show_scope_change = no

			death = {
				death_reason = death_duel
				killer = ROOT
			}
		}
	}
}

# Duel fail
character_event = {
	id = GBC.131
	border = GFX_event_normal_frame_war
	picture = GFX_evt_melee
	desc = EVTDSC_GBC_131

	is_triggered_only = yes

	option = {
		name = EVTOPTA_GBC_131

		event_target:gbc_lover = {
			show_scope_change = no

			remove_lover = ROOT
		}

		random_list = {
			50 = {
				death = {
					death_reason = death_duel
					killer = ROOT
				}
			}

			50 = {
				add_maimed_trait_effect = yes

				narrative_event = {
					id = GBC.143 # Bad end
					days = 30
				}
			}
		}
	}
}

# Talk success
character_event = {
	id = GBC.132
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_courtiers_talking
	desc = EVTDSC_GBC_132

	is_triggered_only = yes

	option = {
		name = EVTOPTA_GBC_132

		narrative_event = {
			id = GBC.137
			days = 50
		}

		event_target:gbc_rival = {
			show_scope_change = no

			remove_spouse = event_target:gbc_lover
		}
	}
}

# Talk fail
character_event = {
	id = GBC.133
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_courtiers_talking
	desc = EVTDSC_GBC_133

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_GBC_133

		event_target:gbc_lover = {
			show_scope_change = no

			remove_lover = ROOT
		}

		narrative_event = {
			id = GBC.143 # Bad end
			days = 30
		}

		imprison = FROM

		if = {
			limit = {
				NOT = { is_rival = FROM }
			}

			add_rival = FROM
		}
	}
}

# Assassination success
character_event = {
	id = GBC.134
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_hunt
	desc = EVTDSC_GBC_134

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_GBC_134

		narrative_event = {
			id = GBC.137
			days = 50
		}

		event_target:gbc_rival = {
			show_scope_change = no

			death = {
				death_reason = death_murder_unknown_arrow
				killer = ROOT
			}
		}
	}
}

# Assassination fail
character_event = {
	id = GBC.135
	desc = EVTDSC_GBC_135
	picture = GFX_evt_hunt
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = EVTOPTA_GBC_135

		event_target:gbc_lover = {
			show_scope_change = no

			remove_lover = ROOT
		}

		narrative_event = {
			id = GBC.143 # Bad end
			days = 30
		}

		if = {
			limit = {
				NOT = { has_character_modifier = known_murderer }
			}

			add_character_modifier = {
				name = known_murderer
				years = 50
			}
		}

		if = {
			limit = {
				NOT = { is_rival = FROM }
			}

			add_rival = FROM
		}
	}
}

# The end (good)
narrative_event = {
	id = GBC.137
	title = EVTNAME_GBC_137
	desc = EVTDSC_GBC_137
	picture = GFX_evt_lovers
	border = GFX_event_narrative_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		event_target:gbc_lover = {
			is_lover = ROOT
			block_general_event_trigger = no
		}
	}

	option = {
		name = EVTOPTA_GBC_137

		hidden_effect = {
			event_target:gbc_lover = {
				move_character = ROOT
			}

			clr_character_flag = gbc_courtly_lover
		}
	}
}

# The end (bad)
narrative_event = {
	id = GBC.143
	title = EVTNAME_GBC_143
	desc = EVTDSC_GBC_143
	picture = GFX_evt_castle_garden
	border = GFX_event_narrative_frame_religion

	is_triggered_only = yes
	hide_from = yes

	trigger = { block_general_event_trigger = no }

	option = {
		name = EVTOPTA_GBC_143

		clr_character_flag = gbc_courtly_lover
		add_trait_silently_depressed_effect = yes
	}
}