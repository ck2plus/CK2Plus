#################################
#
# THE REPUBLIC
# - Trade Events
#
#################################

# Written by Henrik Eklund

namespace = REP

### Shipping Events

# Shipping Events Tombola delay randomization
character_event = {
	id = REP.0

	hide_window = yes
	is_triggered_only = yes # on_yearly_pulse

	ai = no
	is_patrician = yes
	has_dlc = "The Republic"

	immediate = {
		character_event = {
			id = REP.1
			days = 1
			random = 360
		}
	}
}

# Shipping Events Tombola
character_event = {
	id = REP.1

	hide_window = yes
	is_triggered_only = yes

	ai = no
	is_patrician = yes
	has_dlc = "The Republic"

	immediate = {
		if = {
			limit = { is_merchant_republic = yes }

			random_vassal = {
				limit = {
					is_patrician = yes
					ai = yes
				}

				save_event_target_as = rival_patrician
			}
		}
		else = {
			liege = {
				random_vassal = {
					limit = {
						is_patrician = yes
						ai = yes
					}

					save_event_target_as = rival_patrician
				}
			}
		}

		random_list = {
			500 = { } # Nothing Happens
			  8 = { # Thieving Captain
				trigger = {
					event_target:rival_patrician = { always = yes }
				}

				character_event = { id = REP.2 }
			}
			 10 = { # Spoiled Cargo
				character_event = { id = REP.3 }
			}
			  8 = { # Ship Lost in Storm
				trigger = {
					event_target:rival_patrician = { always = yes }
				}

				character_event = { id = REP.5 }
			}
			 10 = { # Pirates Attack Ships
				character_event = { id = REP.6 }
			}
			 11 = { # Pirates Captured
				character_event = { id = REP.7 }
			}
			 11 = { # Valuable Spice Obtained
				trigger = { in_revolt = no }

				character_event = { id = REP.8 }
			}
			 11 = { # New Markets Discovered
				character_event = { id = REP.9 }
			}
			 11 = { # Lost Ship Appears
				character_event = { id = REP.10 }
			}
			 10 = { # Dockworkers Strike
				character_event = { id = REP.11 }
			}
			 10 = { # Warehouse Fire
				character_event = { id = REP.12 }
			}
			  8 = { # Noble Books Passage
				trigger = {
					event_target:rival_patrician = { always = yes }
				}

				character_event = { id = REP.14 }
			}
			 11 = { # Efficient Dockworkers
				character_event = { id = REP.15 }
			}
			 11 = { # Treasure Found!
				character_event = { id = REP.16 }
			}
			 11 = { # Improved Charts
				character_event = { id = REP.17 }
			}
			 10 = { # Captain Rams Pier
				character_event = { id = REP.18 }
			}
			  8 = { # Mutiny!
				trigger = {
					event_target:rival_patrician = { always = yes }
				}

				character_event = { id = REP.20 } # Mutiny!
			}
		}
	}
}

# Thieving Captain
character_event = {
	id = REP.2
	desc = EVTDESC_REP_002
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_002

		scaled_wealth = -0.25
	}
}

# Spoiled Cargo
character_event = {
	id = REP.3
	desc = EVTDESC_REP_003
	picture = GFX_evt_merchant_ship_at_sea_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_003

		scaled_wealth = -0.25
	}
}

# Ship Lost in Storm
character_event = {
	id = REP.5
	desc = EVTDESC_REP_005
	picture = GFX_evt_bad_news

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_005

		wealth = -100
	}
}

# Pirates Attack Ships
character_event = {
	id = REP.6
	desc = EVTDESC_REP_006
	picture = GFX_evt_merchant_ship_at_sea_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_006

		scaled_wealth = -0.25
	}
}

# Pirates Captured
character_event = {
	id = REP.7
	desc = EVTDESC_REP_007
	picture = GFX_evt_merchant_ship_at_sea_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_007

		wealth = 100
	}
}

# Valuable Spice Obtained
character_event = {
	id = REP.8
	desc = EVTDESC_REP_008
	picture = GFX_evt_busy_trading_dock_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_008

		scaled_wealth = 0.25
	}
}

# New Markets Discovered
character_event = {
	id = REP.9
	desc = EVTDESC_REP_009
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_009

		scaled_wealth = 0.25
	}
}

# Lost Ship Appears
character_event = {
	id = REP.10
	desc = EVTDESC_REP_010
	picture = GFX_evt_merchant_ship_at_sea_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_010

		wealth = 100
	}
}

# Dockworkers Strike
character_event = {
	id = REP.11
	desc = EVTDESC_REP_011
	picture = GFX_evt_busy_trading_dock_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_011

		scaled_wealth = -0.25
	}
}

# Warehouse Fire
character_event = {
	id = REP.12
	desc = EVTDESC_REP_012
	picture = GFX_evt_burning_house

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_012

		scaled_wealth = -0.25
	}
}

# Noble Books Passage
character_event = {
	id = REP.14
	desc = EVTDESC_REP_014
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_014

		wealth = 50
	}
}

# Efficient Dockworkers
character_event = {
	id = REP.15
	desc = EVTDESC_REP_015
	picture = GFX_evt_busy_trading_dock_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_015

		scaled_wealth = 0.25
	}
}

# Treasure Found!
character_event = {
	id = REP.16
	desc = EVTDESC_REP_016
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_016

		wealth = 100
	}
}

# Improved Charts
character_event = {
	id = REP.17
	desc = EVTDESC_REP_017
	picture = GFX_evt_merchant_ship_at_sea_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_017

		scaled_wealth = 0.25
	}
}

# Captain Rams Pier
character_event = {
	id = REP.18
	desc = EVTDESC_REP_018
	picture = GFX_evt_busy_trading_dock_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_018

		trigger = {
			NOT = { trait = drunkard }
		}

		wealth = -50
	}

	option = {
		name = EVTOPTB_REP_018
		tooltip_info = drunkard

		trigger = { trait = drunkard }

		scaled_wealth = -0.25
	}
}

# Mutiny!
character_event = {
	id = REP.20
	desc = EVTDESC_REP_020
	picture = GFX_evt_merchant_ship_at_sea_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_020

		wealth = -50
	}
}


### The Rise of the Hansa

# Hansa formed (AI)
character_event = {
	id = REP.40

	hide_window = yes
	is_triggered_only = yes # on_bi_yearly_pulse

	only_playable = yes
	ai = yes

	trigger = {
		year >= 1170
		NOT = { has_global_flag = hansa_formed }

		any_demesne_province = {
			OR = {
				province = c_hamburg
				province = c_hadeln
				province = c_lubeck
				province = c_mecklemburg
				province = c_rostock
			}

			german_cultures_trigger = yes
			religion_group = christian
			has_city = yes
			owned_by = PREV
		}

		top_liege = {
			has_landed_title = e_hre
			religion_group = christian
		}

		is_patrician = no
		liege = { is_merchant_republic = no }
	}

	immediate = {
		set_global_flag = hansa_formed

		random_demesne_province = {
			limit = {
				OR = {
					province = c_hamburg
					province = c_hadeln
					province = c_lubeck
					province = c_mecklemburg
					province = c_rostock
				}

				german_cultures_trigger = yes
				religion_group = christian
				has_city = yes
				owned_by = PREV
			}

			county = {
				save_event_target_as = hansa_capital
			}
		}

		top_liege = {
			character_event = { id = REP.45 }
		}
	}
}

# Permit Hansa?
character_event = {
	id = REP.45
	desc = EVTDESC_REP_45
	picture = GFX_evt_busy_trading_dock_republic
	border = GFX_event_normal_frame_intrigue

	hide_from = yes
	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_45

		FROM = {
			show_scope_change = no

			character_event = {
				id = REP.50
				tooltip = permit_hansa_tooltip
			}

			opinion = {
				name = opinion_happy
				who = ROOT
				years = 4
			}

			if = {
				limit = {
					NOT = { vassal_of = ROOT }
				}

				liege = {
					show_scope_change = no

					opinion = {
						name = opinion_happy
						who = ROOT
						years = 4
					}
				}
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTB_REP_45

		custom_tooltip = { text = deny_hansa_tooltip }

		FROM = {
			show_scope_change = no

			opinion = {
				name = opinion_unhappy
				who = ROOT
				years = 4
			}

			if = {
				limit = {
					NOT = { vassal_of = ROOT }
				}

				liege = {
					show_scope_change = no

					opinion = {
						name = opinion_unhappy
						who = ROOT
						years = 4
					}
				}
			}
		}
	}
}

# Hansa formed (AI)
character_event = {
	id = REP.50

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		create_character = {
			random_traits = yes
			dynasty = random
			religion = FROM
			culture = saxon
			female = no
			age = 30
		}

		new_character = {
			event_target:hansa_capital = {
				location = {
					random_province_holding = {
						limit = { holding_type = city }
						grant_title = PREVPREVPREV
					}
				}

				grant_title = PREV
			}

			grant_title = k_hansa
			set_government_type = merchant_republic_government

			wealth = 1000

			e_hre = {
				holder_scope = {
					set_defacto_vassal = PREVPREV
				}
			}

			location = {
				if = {
					limit = { has_trade_post = yes }

					seize_trade_post = PREV

					any_neighbor_province = {
						seize_trade_post = PREVPREV
					}
				}
			}

			# Extra courtiers
			while = {
				count = 7

				create_character = {
					random_traits = yes
					dynasty = none
					religion = FROM
					culture = saxon
					female = no
					age = 16
				}

				new_character = {
					random_list = {
						1 = { }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
						1 = { add_age = 3 }
						1 = { add_age = 4 }
						1 = { add_age = 5 }
						1 = { add_age = 6 }
						1 = { add_age = 7 }
						1 = { add_age = 8 }
						1 = { add_age = 9 }
						1 = { add_age = 10 }
						1 = { add_age = 11 }
						1 = { add_age = 12 }
					}
				}
			}

			while = {
				count = 5

				create_character = {
					random_traits = yes
					dynasty = none
					religion = catholic
					culture = german
					female = yes
					age = 16
				}

				new_character = {
					random_list = {
						1 = { }
						1 = { add_age = 1 }
						1 = { add_age = 2 }
						1 = { add_age = 3 }
						1 = { add_age = 4 }
					}
				}
			}

			# Set up Patricians
			character_event = { id = REP.65 }

			narrative_event = { id = REP.61 }
		}
	}
}

# The Rise of the Hansa
narrative_event = {
	id = REP.61
	title = EVTNAME_REP_61
	desc = EVTDESC_REP_61
	picture = GFX_evt_busy_trading_dock_republic
	portrait = k_hansa

	is_triggered_only = yes
	major = yes
	hide_from = yes

	major_trigger = {
		ai = no
	}

	option = {
		name = {
			text = EVTOPTA_REP_61
			trigger = {
				is_patrician = no
				NOT = { character = ROOT }
			}
		}
		name = {
			text = EVTOPTB_REP_61
			trigger = {
				is_patrician = yes
				NOT = { character = ROOT }
			}
		}
		name = {
			text = EVTOPTC_REP_61
			trigger = { character = ROOT }
		}
	}
}

# Set up Patricians
character_event = {
	id = REP.65

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		set_variable = {
			which = local_patrician
			value = 1
		}

		any_vassal = {
			limit = { is_patrician = yes }

			count = 4

			wealth = 1000

			if = {
				limit = {
					check_variable = {
						which = local_patrician
						value == 1
					}
				}

				save_event_target_as = trade_post_usurper

				c_skagen = {
					location = {
						if = {
							limit = { has_trade_post = yes }

							save_event_target_as = lost_trade_post_province

							trade_post_owner = {
								character_event = { id = REP.70 }
							}

							seize_trade_post = PREVPREV
						}
					}
				}

				c_baahuslen = {
					location = {
						if = {
							limit = { has_trade_post = yes }

							save_event_target_as = lost_trade_post_province

							trade_post_owner = {
								character_event = { id = REP.70 }
							}

							seize_trade_post = PREVPREV
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = local_patrician
						value == 2
					}
				}

				save_event_target_as = trade_post_usurper

				c_friesland = {
					location = {
						if = {
							limit = { has_trade_post = yes }

							save_event_target_as = lost_trade_post_province

							trade_post_owner = {
								character_event = { id = REP.70 }
							}

							seize_trade_post = PREVPREV
						}
					}
				}

				c_ostfriesland = {
					location = {
						if = {
							limit = { has_trade_post = yes }

							save_event_target_as = lost_trade_post_province

							trade_post_owner = {
								character_event = { id = REP.70 }
							}

							seize_trade_post = PREVPREV
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = local_patrician
						value == 3
					}
				}

				save_event_target_as = trade_post_usurper

				c_middlesex = {
					location = {
						if = {
							limit = { has_trade_post = yes }

							save_event_target_as = lost_trade_post_province

							trade_post_owner = {
								character_event = { id = REP.70 }
							}

							seize_trade_post = PREVPREV
						}
					}
				}

				c_guines = {
					location = {
						if = {
							limit = { has_trade_post = yes }

							save_event_target_as = lost_trade_post_province

							trade_post_owner = {
								character_event = { id = REP.70 }
							}

							seize_trade_post = PREVPREV
						}
					}
				}
			}
			else = {
				save_event_target_as = trade_post_usurper

				c_danzig = {
					location = {
						if = {
							limit = { has_trade_post = yes }

							save_event_target_as = lost_trade_post_province

							trade_post_owner = {
								character_event = { id = REP.70 }
							}

							seize_trade_post = PREVPREV
						}
					}
				}

				c_marienburg = {
					location = {
						if = {
							limit = { has_trade_post = yes }

							save_event_target_as = lost_trade_post_province

							trade_post_owner = {
								character_event = { id = REP.70 }
							}

							seize_trade_post = PREVPREV
						}
					}
				}
			}

			change_variable = {
				which = local_patrician
				value = 1
			}
		}
	}
}

# Former Trade Post Owner Informed
character_event = {
	id = REP.70
	desc = EVTDESC_REP_070
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_REP_070

		tooltip = {
			event_target:lost_trade_post_province = {
				show_scope_change = no

				seize_trade_post = event_target:trade_post_usurper
			}
		}
	}
}


### Seize Trade Post Plot

# Decision Fired
character_event = {
	id = REP.300
	desc = EVTDESC_REP_300
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes # plot_decisions.txt
	hide_from = yes

	option = {
		name = EVTOPTA_REP_300

		trigger = {
			plot_power >= 1.0
			plot_power < 1.5
		}

		wealth = -250

		plot_target_char = {
			show_scope_change = no

			character_event = {
				id = REP.302
				days = 5
				tooltip = EVTOPTA_REP_300_tooltip
			}
		}
	}

	option = {
		name = EVTOPTB_REP_300

		trigger = { plot_power >= 1.5 }

		wealth = -200

		plot_target_char = {
			show_scope_change = no

			character_event = {
				id = REP.308
				days = 5
				tooltip = EVTOPTB_REP_300_tooltip
			}
		}
	}

	option = {
		name = EVTOPTC_REP_300

		trigger = { plot_power < 1.0 }

		wealth = -300

		plot_target_char = {
			show_scope_change = no

			character_event = {
				id = REP.301
				days = 5
				tooltip = EVTOPTC_REP_300_tooltip
			}
		}
	}

	option = {
		name = EVTOPTE_REP_300

		trigger = {
			is_merchant_republic = no

			plot_target_char = {
				is_merchant_republic = no

				num_of_trade_post_diff = {
					character = ROOT
					value >= 10
				}
			}
		}

		liege = {
			show_scope_change = no

			letter_event = {
				id = REP.310
				days = 5
				tooltip = EVTOPTE_REP_300_tooltip
			}
		}
	}

	option = {
		name = EVTOPTD_REP_300

		custom_tooltip = { text = EVTOPTD_REP_300_tooltip }
		cancel_plot = plot_seize_trade_post
	}
}

# Trade Post Owner Informed Of Bribe
character_event = {
	id = REP.301
	desc = EVTDESC_REP_301
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_301

		wealth = -250

		FROM = {
			show_scope_change = no

			character_event = {
				id = REP.303
				days = 5
				tooltip = EVTOPTA_REP_301_tooltip
			}
		}
	}

	option = {
		name = EVTOPTB_REP_301

		FROM = {
			show_scope_change = no

			character_event = {
				id = REP.306
				days = 5
				tooltip = EVTOPTB_REP_301_tooltip
			}
		}
	}
}

# Trade Post Owner Informed Of Plot Support
character_event = {
	id = REP.302
	desc = EVTDESC_REP_302
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_302

		wealth = -250

		FROM = {
			show_scope_change = no

			character_event = {
				id = REP.303
				days = 5
				tooltip = EVTOPTA_REP_302_tooltip
			}
		}
	}

	option = {
		name = EVTOPTB_REP_302

		FROM = {
			show_scope_change = no

			character_event = {
				id = REP.306
				days = 5
				tooltip = EVTOPTB_REP_302_tooltip
			}
		}
	}
}

# Plotter Informed Of Bribe
character_event = {
	id = REP.303
	desc = EVTDESC_REP_303
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_303

		wealth = -300

		FROM = {
			show_scope_change = no

			character_event = {
				id = REP.304
				days = 5
				tooltip = EVTOPTA_REP_303_tooltip
			}
		}
	}

	option = {
		name = EVTOPTB_REP_303

		cancel_plot = plot_seize_trade_post

		FROM = {
			show_scope_change = no

			character_event = {
				id = REP.307
				days = 5
				tooltip = EVTOPTB_REP_303_tooltip
			}
		}
	}
}

# Owner Informed Of Counter-Bribe
character_event = {
	id = REP.304
	desc = EVTDESC_REP_304
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_304

		wealth = -350

		FROM = {
			show_scope_change = no

			character_event = {
				id = REP.305
				days = 5
				tooltip = EVTOPTA_REP_304_tooltip
			}
		}
	}

	option = {
		name = EVTOPTB_REP_304

		FROM = {
			show_scope_change = no

			character_event = {
				id = REP.306
				days = 5
				tooltip = EVTOPTB_REP_302_tooltip
			}
		}
	}
}

# Plotter Informed He Has Been Outbid
character_event = {
	id = REP.305
	desc = EVTDESC_REP_305
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_305

		cancel_plot = plot_seize_trade_post
		clr_character_flag = plot_seize_trade_post_decision_taken

		prestige = -50

		FROM = {
			show_scope_change = no

			character_event = {
				id = REP.307
				days = 5
				tooltip = EVTOPTB_REP_303_tooltip
			}
		}
	}
}

# Victorious Plotter Informed About Success
character_event = {
	id = REP.306
	desc = EVTDESC_REP_306
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EXCELLENT

		plot_target_province = {
			show_scope_change = no

			seize_trade_post = ROOT
		}

		reverse_opinion = {
			name = opinion_seized_tp
			who = FROM
			years = 5
		}
	}
}

# Victorious Owner Informed About Success
character_event = {
	id = REP.307
	desc = EVTDESC_REP_306
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EXCELLENT

		prestige = 50
	}
}

# Trade Post Owner Informed Of Overwhelming Plot Support
character_event = {
	id = REP.308
	desc = EVTDESC_REP_308
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_308

		FROM = {
			show_scope_change = no

			character_event = {
				id = REP.306
				days = 5
				tooltip = EVTOPTB_REP_306_tooltip
			}
		}
	}
}

# Plotter goes to Doge
letter_event = {
	id = REP.310
	desc = EVTDESC_REP_310

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_310

		FROM = {
			show_scope_change = no

			plot_target_char = {
				show_scope_change = no

				letter_event = {
					id = REP.311
					days = 5
					tooltip = EVTTOOLTIPREP.311
				}

				opinion = {
					name = opinion_disgruntled
					who = ROOT
					years = 5
				}
			}

			letter_event = {
				id = REP.313
				days = 5
				tooltip = EVTTOOLTIPREP.311
			}

			opinion = {
				name = opinion_glad
				who = ROOT
			}
		}

		ai_chance = {
			factor = 1

			trigger = {
				opinion = {
					who = FROM
					value >= 0
				}
			}

			mult_modifier = {
				factor = 1.5

				opinion = {
					who = FROM
					value >= 25
				}
			}

			mult_modifier = {
				factor = 2

				opinion = {
					who = FROM
					value >= 50
				}
			}

			mult_modifier = {
				factor = 3

				opinion = {
					who = FROM
					value >= 75
				}
			}
		}
	}

	option = {
		name = EVTOPTB_REP_310

		FROM = {
			show_scope_change = no

			letter_event = {
				id = REP.312
				days = 5
				tooltip = EVTTOOLTIPREP.313
			}

			opinion = {
				name = opinion_disgruntled
				who = ROOT
				years = 5
			}
		}

		ai_chance = {
			factor = 1

			trigger = {
				opinion = {
					who = FROM
					value < 90
				}
			}

			modifier = {
				factor = 2

				opinion = {
					who = FROM
					value < 10
				}
			}
		}
	}
}

# Owner Told of Doge's Support
letter_event = {
	id = REP.311
	desc = EVTDESC_REP_311

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_311

		prestige = -30
	}
}

# Plotter Told Doge Refuses Support
letter_event = {
	id = REP.312
	desc = EVTDESC_REP_312

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_312

		cancel_plot = plot_seize_trade_post
		prestige = -50
	}
}

# Plotter Informed of Doge's Support
letter_event = {
	id = REP.313
	desc = EVTDESC_REP_313

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_313

		plot_target_char = {
			show_scope_change = no

			opinion = {
				name = opinion_seized_tp
				who = ROOT
				years = 5
			}
		}

		plot_target_province = {
			show_scope_change = no

			seize_trade_post = ROOT
		}
	}
}


### Dynastic Marriage Events

# Dynastic Marriage Tombola delay randomization
character_event = {
	id = REP.399

	hide_window = yes
	is_triggered_only = yes # on_yearly_pulse

	is_patrician = yes
	has_dlc = "The Republic"

	immediate = {
		character_event = {
			id = REP.400
			days = 1
			random = 360
		}
	}
}

# Dynastic Marriage Tombola
character_event = {
	id = REP.400

	hide_window = yes
	is_triggered_only = yes

	is_patrician = yes
	has_dlc = "The Republic"

	trigger = {
		any_courtier_or_vassal = {
			dynasty = ROOT
			is_female = no
			age >= 18
			can_marry = yes
			is_incapable = no
			prisoner = no
			is_primary_heir = no
			is_pretender = no
			ai = yes

			NOR = {
				is_child_of = ROOT
				trait = chaste
				trait = celibate
			}
		}
	}

	immediate = {
		random_list = {
			200 = {
				mult_modifier = {
					factor = 0.75

					any_courtier_or_vassal = {
						count >= 2

						dynasty = ROOT
						is_female = no
						age >= 18
						can_marry = yes
						is_incapable = no
						prisoner = no
						is_primary_heir = no
						is_pretender = no
						ai = yes

						NOR = {
							is_child_of = ROOT
							trait = chaste
							trait = celibate
						}
					}
				}
				mult_modifier = {
					factor = 0.75

					any_courtier_or_vassal = {
						count >= 3

						dynasty = ROOT
						is_female = no
						age >= 18
						can_marry = yes
						is_incapable = no
						prisoner = no
						is_primary_heir = no
						is_pretender = no
						ai = yes

						NOR = {
							is_child_of = ROOT
							trait = chaste
							trait = celibate
						}
					}
				}
				# Nothing happens
			}
			  9 = { # Family member marries burgher's daughter
				character_event = { id = REP.401 }
			}
			  6 = { # Family member marries bar wench/peasant girl/rich girl
				character_event = { id = REP.404 }
			}
			  4 = { # Old family member marries young woman
				trigger = {
					any_courtier_or_vassal = {
						dynasty = ROOT
						is_female = no
						practical_age >= 42
						can_marry = yes
						is_incapable = no
						prisoner = no
						is_primary_heir = no
						is_pretender = no
						ai = yes

						NOR = {
							is_child_of = ROOT
							trait = chaste
							trait = celibate
						}
					}
				}

				character_event = { id = REP.409 }
			}
			  4 = { # Young family member marries older woman
				trigger = {
					any_courtier_or_vassal = {
						dynasty = ROOT
						is_female = no
						age >= 18
						practical_age < 26
						can_marry = yes
						is_incapable = no
						prisoner = no
						is_primary_heir = no
						is_pretender = no
						ai = yes

						NOR = {
							is_child_of = ROOT
							trait = chaste
							trait = celibate
						}
					}
				}

				character_event = { id = REP.411 }
			}
			  4 = { # Family member marries foreign woman
				trigger = {
					NOT = { culture = mande }

					any_courtier_or_vassal = {
						dynasty = ROOT
						is_female = no
						age >= 18
						can_marry = yes
						is_incapable = no
						prisoner = no
						is_primary_heir = no
						is_pretender = no
						ai = yes

						NOR = {
							is_child_of = ROOT
							trait = chaste
							trait = celibate
							culture = mande
						}
					}
				}

				character_event = { id = REP.413 }
			}
		}
	}
}

# Family member marries burgher's daughter
character_event = {
	id = REP.401
	desc = EVTDESC_REP_401
	picture = GFX_evt_marriage
	portrait = event_target:dynasty_member

	is_triggered_only = yes

	immediate = {
		random_courtier_or_vassal = {
			limit = {
				dynasty = ROOT
				is_female = no
				age >= 18
				can_marry = yes
				is_incapable = no
				prisoner = no
				is_primary_heir = no
				is_pretender = no
				ai = yes

				NOR = {
					is_child_of = ROOT
					trait = chaste
					trait = celibate
				}
			}

			save_event_target_as = dynasty_member

			create_character = {
				random_traits = yes
				dynasty = none
				female = yes
				age = 24
				religion = event_target:dynasty_member
				culture = event_target:dynasty_member
			}
		}

		# Set appropriate age
		new_character = {
			if = {
				limit = {
					event_target:dynasty_member = {
						practical_age >= 45
					}
				}

				add_age = 24
			}
			else_if = {
				limit = {
					event_target:dynasty_member = {
						practical_age >= 30
					}
				}

				add_age = 11
			}
		}
	}

	option = {
		name = EVTOPTA_REP_401

		event_target:dynasty_member = {
			show_scope_change = no

			add_spouse = new_character
		}
	}
}

# Family member marries bar wench/peasant girl/rich girl
character_event = {
	id = REP.404
	picture = GFX_evt_marriage
	portrait = event_target:dynasty_member

	desc = {
		text = EVTDESC_REP_405
		trigger = { has_character_flag = bar_wench }
	}
	desc = {
		text = EVTDESC_REP_406
		trigger = { has_character_flag = peasant_girl }
	}
	desc = {
		text = EVTDESC_REP_407
		trigger = { has_character_flag = rich_girl }
	}

	is_triggered_only = yes

	immediate = {
		random_list = {
			33 = { set_character_flag = bar_wench }
			33 = { set_character_flag = peasant_girl }
			33 = { set_character_flag = rich_girl }
		}

		random_courtier_or_vassal = {
			limit = {
				dynasty = ROOT
				is_female = no
				age >= 18
				practical_age < 40
				can_marry = yes
				is_incapable = no
				prisoner = no
				is_primary_heir = no
				is_pretender = no
				ai = yes

				NOR = {
					is_child_of = ROOT
					trait = chaste
					trait = celibate
				}
			}

			save_event_target_as = dynasty_member

			create_character = {
				random_traits = yes
				dynasty = none
				female = yes
				age = 24
				religion = event_target:dynasty_member
				culture = event_target:dynasty_member
			}

			new_character = {
				random_list = {
					1 = { }
					1 = { add_age = 1 }
					1 = { add_age = 2 }
					1 = { add_age = 3 }
					1 = { add_age = 4 }
				}
			}
		}

		new_character = {
			if = {
				limit = {
					ROOT = { has_character_flag = peasant_girl }
				}

				add_trait = attractive
			}
			else_if = {
				limit = {
					ROOT = { has_character_flag = rich_girl }
				}

				add_trait = ugly
			}
		}
	}

	option = {
		name = {
			text = I_SEE
			trigger = { has_character_flag = bar_wench }
		}
		name = {
			text = EVTOPTA_REP_406
			trigger = { has_character_flag = peasant_girl }
		}
		name = {
			text = EVTOPTA_REP_407
			trigger = { has_character_flag = rich_girl }
		}

		event_target:dynasty_member = {
			show_scope_change = no

			add_spouse = new_character

			if = {
				limit = {
					ROOT = { has_character_flag = rich_girl }
				}

				wealth = 100
			}
		}

		clr_character_flag = bar_wench
		clr_character_flag = peasant_girl
		clr_character_flag = rich_girl
	}
}

# Old family member marries young woman
character_event = {
	id = REP.409
	desc = EVTDESC_REP_409
	picture = GFX_evt_marriage
	portrait = event_target:dynasty_member

	is_triggered_only = yes

	immediate = {
		random_courtier_or_vassal = {
			limit = {
				dynasty = ROOT
				is_female = no
				practical_age >= 42
				can_marry = yes
				is_incapable = no
				prisoner = no
				is_primary_heir = no
				is_pretender = no
				ai = yes

				NOR = {
					is_child_of = ROOT
					trait = chaste
					trait = celibate
				}
			}

			save_event_target_as = dynasty_member

			create_character = {
				random_traits = yes
				dynasty = none
				female = yes
				age = 20
				religion = event_target:dynasty_member
				culture = event_target:dynasty_member
			}
		}
	}

	option = {
		name = EVTOPTA_REP_409

		event_target:dynasty_member = {
			show_scope_change = no

			add_spouse = new_character
		}
	}
}

# Young family member marries older woman
character_event = {
	id = REP.411
	desc = EVTDESC_REP_411
	picture = GFX_evt_marriage
	portrait = event_target:dynasty_member

	is_triggered_only = yes

	immediate = {
		random_courtier_or_vassal = {
			limit = {
				dynasty = ROOT
				is_female = no
				age >= 18
				practical_age < 26
				can_marry = yes
				is_incapable = no
				prisoner = no
				is_primary_heir = no
				is_pretender = no
				ai = yes

				NOR = {
					is_child_of = ROOT
					trait = chaste
					trait = celibate
				}
			}

			save_event_target_as = dynasty_member

			create_character = {
				random_traits = yes
				dynasty = none
				female = yes
				age = 41
				religion = event_target:dynasty_member
				culture = event_target:dynasty_member
			}
		}
	}

	option = {
		name = EVTOPTA_REP_411

		event_target:dynasty_member = {
			show_scope_change = no

			add_spouse = new_character
		}
	}
}

# Family member marries foreign woman
character_event = {
	id = REP.413
	desc = EVTDESC_REP_413
	picture = GFX_evt_marriage
	portrait = event_target:dynasty_member

	is_triggered_only = yes

	trigger = {
		NOT = { culture = mande }

		any_courtier = {
			dynasty = ROOT
			is_female = no
			age >= 18
			can_marry = yes
			is_incapable = no
			prisoner = no
			is_primary_heir = no
			is_pretender = no
			is_ruler = no
			ai = yes

			NOR = {
				is_child_of = ROOT
				trait = chaste
				trait = celibate
				culture = mande
			}
		}
	}

	immediate = {
		random_courtier_or_vassal = {
			limit = {
				dynasty = ROOT
				is_female = no
				age >= 18
				can_marry = yes
				is_incapable = no
				prisoner = no
				is_primary_heir = no
				is_pretender = no
				ai = yes

				NOR = {
					is_child_of = ROOT
					trait = chaste
					trait = celibate
					culture = mande
				}
			}

			save_event_target_as = dynasty_member
		}

		create_character = {
			random_traits = yes
			dynasty = none
			female = yes
			age = 26
			religion = event_target:dynasty_member
			culture = mande
		}
	}

	option = {
		name = EVTOPTA_REP_413

		event_target:dynasty_member = {
			show_scope_change = no

			add_spouse = new_character
		}
	}
}


### Trade Post Decisions

# Doge approached by Patrician
letter_event = {
	id = REP.500
	desc = EVTDESC_REP_500

	is_triggered_only = yes # realm_decisions.txt, petition_doge_for_tp

	immediate = {
		if = {
			limit = {
				FROM = {
					num_of_trade_posts > 0
				}
			}

			random_vassal = {
				limit = {
					is_patrician = yes

					num_of_trade_post_diff = {
						character = FROM
						value >= 10
					}
				}

				save_event_target_as = target_patrician
			}
		}
		else = {
			random_vassal = {
				limit = {
					is_patrician = yes
					num_of_trade_posts >= 10
				}

				save_event_target_as = target_patrician
			}
		}

		FROM = {
			save_event_target_as = poor_patrician
		}
	}

	option = {
		name = EVTOPTA_REP_500

		event_target:poor_patrician = {
			letter_event = { id = REP.501 }
		}
	}

	option = {
		name = EVTOPTB_REP_500

		ai_chance = { factor = 100 }

		event_target:target_patrician = {
			show_scope_change = no

			letter_event = {
				id = REP.502
				tooltip = EVTTOOLTIP_REP_502
			}
		}
	}
}

# Doge refuses request
letter_event = {
	id = REP.501
	desc = EVTDESC_REP_501

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_501

		prestige = -100
	}
}

# Doge makes request to wealthy patrician
letter_event = {
	id = REP.502
	desc = EVTDESC_REP_502

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_502

		FROM = {
			show_scope_change = no

			letter_event = {
				id = REP.503
				tooltip = EVTTOOLTIP_REP_503
			}
		}

		tooltip = {
			random_trade_post = {
				show_scope_change = no

				seize_trade_post = event_target:poor_patrician

				any_neighbor_province = {
					show_scope_change = no

					limit = {
						trade_post_owner = {
							character = ROOT
						}
					}

					seize_trade_post = event_target:poor_patrician
				}
			}
		}
	}

	option = {
		name = EVTOPTB_REP_510
		tooltip_info = stewardship

		trigger = { stewardship >= 10 }

		FROM = {
			show_scope_change = no

			letter_event = {
				id = REP.505
				tooltip = EVTTOOLTIP_REP_512
			}
		}
	}

	option = {
		name = EVTOPTC_REP_510
		tooltip_info = diplomacy

		trigger = { diplomacy >= 10 }

		FROM = {
			show_scope_change = no

			letter_event = {
				id = REP.506
				tooltip = EVTTOOLTIP_REP_513
			}
		}
	}

	option = {
		name = EVTOPTD_REP_510
		tooltip_info = intrigue

		trigger = { intrigue >= 10 }

		FROM = {
			show_scope_change = no

			letter_event = {
				id = REP.507
				tooltip = EVTTOOLTIP_REP_514
			}
		}
	}
}

# Patrician grants Doge's request
letter_event = {
	id = REP.503
	desc = EVTDESC_REP_503

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_503

		reverse_opinion = {
			name = opinion_disgruntled
			who = FROM
			years = 5
		}

		event_target:poor_patrician = {
			show_scope_change = no

			letter_event = {
				id = REP.504
				tooltip = EVTTOOLTIP_REP_504
			}
		}
	}
}

# Doge informs original Patrician that request has been granted
letter_event = {
	id = REP.504
	desc = EVTDESC_REP_504

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_504

		event_target:target_patrician = {
			show_scope_change = no

			opinion = {
				name = opinion_angry
				who = ROOT
				years = 5
			}

			random_trade_post = {
				show_scope_change = no

				seize_trade_post = ROOT

				any_neighbor_province = {
					show_scope_change = no

					limit = {
						trade_post_owner = {
							character = event_target:target_patrician
						}
					}

					seize_trade_post = ROOT
				}
			}
		}
	}
}

# Patrician refuses demand due to stewardship
letter_event = {
	id = REP.505
	desc = EVTDESC_REP_512

	is_triggered_only = yes

	option = {
		name = I_SEE

		event_target:poor_patrician = {
			show_scope_change = no

			letter_event = {
				id = REP.508
				tooltip = EVTTOOLTIP_REP_508
			}
		}
	}
}

# Patrician refuses demand due to diplomacy
letter_event = {
	id = REP.506
	desc = EVTDESC_REP_513

	is_triggered_only = yes

	option = {
		name = I_SEE

		event_target:poor_patrician = {
			show_scope_change = no

			letter_event = {
				id = REP.508
				tooltip = EVTTOOLTIP_REP_508
			}
		}
	}
}

# Patrician refuses demand due to intrigue
letter_event = {
	id = REP.507
	desc = EVTDESC_REP_514

	is_triggered_only = yes

	option = {
		name = I_SEE

		event_target:poor_patrician = {
			show_scope_change = no

			letter_event = {
				id = REP.508
				tooltip = EVTTOOLTIP_REP_508
			}
		}
	}
}

# Doge informs Patrician of failure
letter_event = {
	id = REP.508
	desc = EVTDESC_REP_508

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_508

		prestige = -50
	}
}

# Patrician approached by Doge
letter_event = {
	id = REP.510
	desc = EVTDESC_REP_510

	is_triggered_only = yes # realm_decisions.txt, usurp_tp

	option = {
		name = EVTOPTA_REP_510

		FROM = {
			letter_event = { id = REP.511 }
		}

		tooltip = {
			random_trade_post = {
				show_scope_change = no

				seize_trade_post = FROM

				any_neighbor_province = {
					show_scope_change = no

					limit = {
						trade_post_owner = {
							character = ROOT
						}
					}

					seize_trade_post = FROM
				}
			}
		}
	}

	option = {
		name = EVTOPTB_REP_510
		tooltip_info = stewardship

		trigger = {
			stewardship >= 10
			FROM = { stewardship < 8 }
		}

		FROM = {
			show_scope_change = no

			letter_event = {
				id = REP.512
				tooltip = EVTTOOLTIP_REP_512
			}
		}
	}

	option = {
		name = EVTOPTC_REP_510
		tooltip_info = diplomacy

		trigger = {
			diplomacy >= 10
			FROM = { diplomacy < 8 }
		}

		FROM = {
			show_scope_change = no

			letter_event = {
				id = REP.513
				tooltip = EVTTOOLTIP_REP_513
			}
		}
	}

	option = {
		name = EVTOPTD_REP_510
		tooltip_info = intrigue

		trigger = {
			intrigue >= 10
			FROM = { intrigue < 8 }
		}

		FROM = {
			show_scope_change = no

			letter_event = {
				id = REP.514
				tooltip = EVTTOOLTIP_REP_514
			}
		}
	}
}

# Patrician agrees to demand
letter_event = {
	id = REP.511
	desc = EVTDESC_REP_511

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_511

		FROM = {
			show_scope_change = no

			opinion = {
				name = opinion_angry
				who = ROOT
				years = 5
			}

			random_trade_post = {
				show_scope_change = no

				seize_trade_post = ROOT

				any_neighbor_province = {
					show_scope_change = no

					limit = {
						trade_post_owner = {
							character = PREVPREVPREV
						}
					}

					seize_trade_post = ROOT
				}
			}
		}
	}
}

# Patrician refuses demand due to stewardship
letter_event = {
	id = REP.512
	desc = EVTDESC_REP_512

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_512

		prestige = -50
	}
}

# Patrician refuses demand due to diplomacy
letter_event = {
	id = REP.513
	desc = EVTDESC_REP_513

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_512

		prestige = -50
	}
}

# Patrician refuses demand due to intrigue
letter_event = {
	id = REP.514
	desc = EVTDESC_REP_514

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_512

		prestige = -50
	}
}


### Trade Post Razing

# Province has TP
province_event = {
	id = REP.600

	hide_window = yes

	trigger = {
		has_trade_post = yes

		trade_post_owner = {
			is_patrician = yes

			ROOT = {
				owner = {
					is_patrician = no

					NOR = {
						same_realm = PREVPREV
						has_non_aggression_pact_with = PREVPREV
					}

					top_liege = {
						is_patrician = no

						opinion = {
							who = PREVPREVPREV
							value < 0
						}

						NOR = {
							war_with = PREVPREVPREV
							has_opinion_modifier = { who = PREVPREVPREV name = opinion_bribed_tp }
							has_opinion_modifier = { who = PREVPREVPREV name = opinion_thwarted_tp_destruction }
							has_opinion_modifier = { who = PREVPREVPREV name = opinion_burned_tp }
							has_opinion_modifier = { who = PREVPREVPREV name = opinion_burned_tp_despite_bribe }
						}
					}

				}
			}
		}
	}

	mean_time_to_happen = {
		years = 135

		mult_modifier = {
			factor = 0.7

			trade_post_owner = {
				ROOT = {
					owner = {
						top_liege = {
							opinion = {
								who = PREVPREVPREV
								value < -20
							}
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.6

			trade_post_owner = {
				ROOT = {
					owner = {
						top_liege = {
							opinion = {
								who = PREVPREVPREV
								value < -40
							}
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.65

			trade_post_owner = {
				ROOT = {
					owner = {
						top_liege = {
							opinion = {
								who = PREVPREVPREV
								value < -60
							}
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.4

			trade_post_owner = {
				ROOT = {
					owner = {
						top_liege = {
							opinion = {
								who = PREVPREVPREV
								value < -80
							}
						}
					}
				}
			}
		}
	}

	immediate = {
		save_event_target_as = trade_post_province

		trade_post_owner = {
			save_event_target_as = province_trade_post_owner
		}

		owner = {
			top_liege = {
				save_event_target_as = province_top_liege
				character_event = { id = REP.601 }
			}
		}
	}
}

# Top Liege informed
character_event = {
	id = REP.601
	desc = EVTDESC_REP_601
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_601

		event_target:province_trade_post_owner = {
			show_scope_change = no

			character_event = {
				id = REP.602
				days = 6
				tooltip = EVTTOOLTIP_REP_602
			}
		}

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTB_REP_601

		custom_tooltip = { text = tp_spare }
	}
}

# Trade Post Owner Confronted
character_event = {
	id = REP.602
	desc = EVTDESC_REP_602
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = { # Accept

		name = EVTOPTA_REP_602

		destroy_tradepost = event_target:trade_post_province

		event_target:province_top_liege = {
			character_event = { id = REP.603 }
		}
	}

	option = { # Bribe
		name = EVTOPTB_REP_602

		trigger = { wealth >= 100 }

		wealth = -100

		event_target:province_top_liege = {
			show_scope_change = no

			character_event = {
				id = REP.604
				days = 6
				tooltip = EVTTOOLTIP_REP_604
			}

			tooltip = {
				wealth = 100
			}
		}
	}

	option = { # Stewardship
		name = EVTOPTC_REP_602
		tooltip_info = stewardship

		trigger = { stewardship >= 12 }

		event_target:province_top_liege = {
			show_scope_change = no

			character_event = {
				id = REP.605
				days = 6
				tooltip = EVTTOOLTIP_REP_605
			}
		}
	}

	option = { # Diplomacy
		name = EVTOPTD_REP_602
		tooltip_info = diplomacy

		trigger = { diplomacy >= 12 }

		event_target:province_top_liege = {
			show_scope_change = no

			character_event = {
				id = REP.606
				days = 6
				tooltip = EVTTOOLTIP_REP_605
			}
		}
	}
}

# Trade Post Destroyed
character_event = {
	id = REP.603
	desc = EVTDESC_REP_603
	picture = GFX_evt_burning_house

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_603

		prestige = 30

		reverse_opinion = {
			name = opinion_burned_tp
			who = event_target:province_trade_post_owner
		}
	}
}

# Bribe Offered
character_event = {
	id = REP.604
	desc = EVTDESC_REP_604
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_604

		opinion = {
			name = opinion_bribed_tp
			who = event_target:province_trade_post_owner
		}

		tooltip = {
			event_target:province_trade_post_owner = {
				show_scope_change = no

				if = {
					limit = {
						OR = {
							lower_real_tier_than = DUKE

							AND = {
								is_patrician = yes
								is_merchant_republic = no
							}
						}
					}

					transfer_scaled_wealth = {
						to = ROOT
						value = 2.5
					}
				}
				else = {
					transfer_scaled_wealth = {
						to = ROOT
						value = 0.65
					}
				}
			}
		}

		ai_chance = { factor = 70 }
	}

	option = {
		name = EVTOPTB_REP_604

		wealth = 100

		tooltip = {
			event_target:province_trade_post_owner = {
				show_scope_change = no

				if = {
					limit = {
						OR = {
							lower_real_tier_than = DUKE

							AND = {
								is_patrician = yes
								is_merchant_republic = no
							}
						}
					}

					transfer_scaled_wealth = {
						to = ROOT
						value = 2.5
					}
				}
				else = {
					transfer_scaled_wealth = {
						to = ROOT
						value = 0.65
					}
				}
			}
		}

		piety = -50

		event_target:province_trade_post_owner = {
			show_scope_change = no

			character_event = { id = REP.607 days = 6 }

			opinion = {
				name = opinion_burned_tp_despite_bribe
				who = ROOT
			}

			if = {
				limit = {
					liege = {
						is_merchant_republic = yes
						NOT = { character = event_target:province_trade_post_owner }
					}
				}

				liege = {
					show_scope_change = no

					opinion = {
						name = opinion_burned_tp_despite_bribe
						who = ROOT
					}
				}
			}
		}

		tooltip = {
			destroy_tradepost = event_target:trade_post_province
		}

		ai_chance = { factor = 30 }
	}
}

# Stewardship used to save TP
character_event = {
	id = REP.605
	desc = EVTDESC_REP_605
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_605

		opinion = {
			name = opinion_thwarted_tp_destruction
			who = event_target:province_trade_post_owner
		}

		prestige = -30
	}
}

# Diplomacy used to save TP
character_event = {
	id = REP.606
	desc = EVTDESC_REP_606
	picture = GFX_evt_trade_post_republic

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_605

		opinion = {
			name = opinion_thwarted_tp_destruction
			who = event_target:province_trade_post_owner
		}

		prestige = -30
	}
}

# TP owner informed of treachery
character_event = {
	id = REP.607
	desc = EVTDESC_REP_607
	picture = GFX_evt_burning_house

	is_triggered_only = yes

	option = {
		name = EVTOPTA_REP_607

		destroy_tradepost = event_target:trade_post_province
	}
}